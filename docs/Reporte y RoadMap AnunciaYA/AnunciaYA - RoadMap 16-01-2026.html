<!DOCTYPE html>
<html>
<head>
<title>AnunciaYA - RoadMap 16-01-2026.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="%F0%9F%97%BA%EF%B8%8F-anunciaya-v30---roadmap-maestro">ğŸ—ºï¸ AnunciaYA v3.0 - Roadmap Maestro</h1>
<p><strong>Fecha:</strong> 16 Enero 2026<br>
<strong>VersiÃ³n:</strong> 5.1<br>
<strong>Estado Global:</strong> Fases 1-4 âœ… | Fase 5.0-5.3.2 âœ… | <strong>Fase 5.4 â³ 27%</strong> | <strong>Fase 6.0 â³ 10%</strong></p>
<hr>
<h2 id="%F0%9F%93%8A-resumen-ejecutivo">ğŸ“Š Resumen Ejecutivo</h2>
<h3 id="progreso-por-fase">Progreso por Fase</h3>
<table>
<thead>
<tr>
<th>Fase</th>
<th>Nombre</th>
<th>Estado</th>
<th>Fecha</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Monorepo Setup</td>
<td>âœ… 100%</td>
<td>Completado</td>
</tr>
<tr>
<td>2</td>
<td>Base de Datos</td>
<td>âœ… 100%</td>
<td>Completado</td>
</tr>
<tr>
<td>3</td>
<td>Backend + Auth</td>
<td>âœ… 100%</td>
<td>Completado</td>
</tr>
<tr>
<td>4</td>
<td>Frontend Base + Auth UI</td>
<td>âœ… 100%</td>
<td>Completado</td>
</tr>
<tr>
<td>5.0</td>
<td>Sistema de Modos Backend</td>
<td>âœ… 100%</td>
<td>20/12/2024</td>
</tr>
<tr>
<td>5.1</td>
<td>Onboarding Backend</td>
<td>âœ… 100%</td>
<td>20/12/2024</td>
</tr>
<tr>
<td>5.1.1</td>
<td>Onboarding Frontend</td>
<td>âœ… 100%</td>
<td>26/12/2024</td>
</tr>
<tr>
<td>5.2</td>
<td>Toggle UI + ProtecciÃ³n Rutas</td>
<td>âœ… 100%</td>
<td>26/12/2024</td>
</tr>
<tr>
<td>5.3</td>
<td>Negocios Directorio</td>
<td>âœ… 100%</td>
<td>02/01/2026</td>
</tr>
<tr>
<td>5.3.1</td>
<td>Sistema Universal Compartir</td>
<td>âœ… 100%</td>
<td>02/01/2026</td>
</tr>
<tr>
<td>5.3.2</td>
<td>Auth Opcional + ModalAuthRequerido</td>
<td>âœ… 100%</td>
<td>16/01/2026</td>
</tr>
<tr>
<td><strong>5.4</strong></td>
<td><strong>Business Studio (4/15 mÃ³dulos)</strong></td>
<td><strong>â³ 27%</strong></td>
<td><strong>En progreso</strong></td>
</tr>
<tr>
<td>5.4.1</td>
<td>CatÃ¡logo CRUD</td>
<td>âœ… 100% Completado</td>
<td>07/01/2026</td>
</tr>
<tr>
<td><strong>5.4.2</strong></td>
<td><strong>Ofertas CRUD</strong></td>
<td><strong>â³ 90% Casi listo</strong></td>
<td><strong>16/01/2026</strong></td>
</tr>
<tr>
<td>5.5</td>
<td>ScanYA + PWA</td>
<td>Registrar ventas, dar puntos</td>
<td>~2-3 dÃ­as</td>
</tr>
<tr>
<td>5.6</td>
<td>CardYA + PWA</td>
<td>Usuario ve sus puntos, QR</td>
<td>~2-3 dÃ­as</td>
</tr>
<tr>
<td>5.7</td>
<td>Clientes + Transacciones</td>
<td>Historial de clientes y ventas en BS</td>
<td>~2-3 dÃ­as</td>
</tr>
<tr>
<td>5.8</td>
<td>Opiniones BS</td>
<td>Responder/Ver ReseÃ±as</td>
<td>~2-3 dÃ­as</td>
</tr>
<tr>
<td>5.9</td>
<td>Puntos</td>
<td>Config puntos del negocio en BS</td>
<td>~1 dÃ­a</td>
</tr>
<tr>
<td>5.10</td>
<td>ChatYA + PWA</td>
<td>MensajerÃ­a negocio-cliente</td>
<td>~3-4 dÃ­as</td>
</tr>
<tr>
<td>5.11</td>
<td>Cupones</td>
<td>Vista pÃºblica + CRUD en BS</td>
<td>~2-3 dÃ­as</td>
</tr>
<tr>
<td>6.0</td>
<td>Ofertas</td>
<td>Vista pÃºblica (ruta ya existe)</td>
<td>~1-2 dÃ­as</td>
</tr>
<tr>
<td>6.1</td>
<td>MarketPlace</td>
<td>Vista pÃºblica - Compra-venta usuarios</td>
<td>~3-4 dÃ­as</td>
</tr>
<tr>
<td>6.2</td>
<td>DinÃ¡micas</td>
<td>Vista pÃºblica + Rifas en BS</td>
<td>Rifas y sorteos</td>
</tr>
<tr>
<td>6.3</td>
<td>Empleos</td>
<td>Vista pÃºblica + Vacantes en BS</td>
<td>~2-3 dÃ­as</td>
</tr>
<tr>
<td>6.4</td>
<td>Empleados</td>
<td>GestiÃ³n empleados en BS (nick + PIN)</td>
<td>~1-2 dÃ­as</td>
</tr>
<tr>
<td>6.5</td>
<td>Sucursales</td>
<td>Agregar/editar sucursales en BS</td>
<td>~2 dÃ­as</td>
</tr>
<tr>
<td>6.6</td>
<td>Reportes + Alertas</td>
<td>EstadÃ­sticas y notificaciones en BS</td>
<td>~2-3 dÃ­as</td>
</tr>
<tr>
<td>6.7</td>
<td>Panel Admin</td>
<td>GestiÃ³n interna, vendedores, mÃ©tricas</td>
<td>~1-2 semanas</td>
</tr>
<tr>
<td>7</td>
<td>Testing + Deploy</td>
<td>QA y lanzamiento a producciÃ³n</td>
<td>~1 semana</td>
</tr>
</tbody>
</table>
<hr>
<hr>
<h2 id="%F0%9F%8E%AF-novedades-enero-16-2026">ğŸ¯ NOVEDADES (Enero 16, 2026)</h2>
<h3 id="%E2%9C%85-completado-recientemente">âœ… Completado Recientemente</h3>
<h4 id="1-sistema-de-auth-opcional-fase-532">1. Sistema de Auth Opcional (Fase 5.3.2)</h4>
<p><strong>Fecha:</strong> 16 Enero 2026<br>
<strong>DuraciÃ³n:</strong> 1 dÃ­a<br>
<strong>Archivos:</strong> 13 modificados/creados</p>
<p><strong>ImplementaciÃ³n:</strong></p>
<ul>
<li>Middleware <code>verificarTokenOpcional</code> (backend)</li>
<li>ModalAuthRequerido para acciones protegidas (frontend)</li>
<li>MigraciÃ³n de rutas pÃºblicas duplicadas a auth opcional</li>
<li>EliminaciÃ³n de 6 funciones duplicadas (-33% cÃ³digo)</li>
<li>Sistema unificado para ofertas, artÃ­culos y negocios</li>
</ul>
<p><strong>Beneficios:</strong></p>
<ul>
<li>âœ… Zero duplicaciÃ³n de cÃ³digo</li>
<li>âœ… Experiencia fluida con/sin login</li>
<li>âœ… MÃ©tricas confiables (solo usuarios reales)</li>
<li>âœ… ConversiÃ³n mejorada con CTAs contextuales</li>
</ul>
<p><strong>DocumentaciÃ³n:</strong> <code>Auth_Opcional_Sistema_Universal_de_Compartir.md</code></p>
<hr>
<h4 id="2-cat%C3%A1logo-crud---business-studio-fase-541">2. CatÃ¡logo CRUD - Business Studio (Fase 5.4.1)</h4>
<p><strong>Fecha:</strong> 7 Enero 2026<br>
<strong>Estado:</strong> âœ… 100% Completado</p>
<p><strong>ImplementaciÃ³n:</strong></p>
<ul>
<li>Backend: 7 endpoints CRUD completos</li>
<li>Frontend BS: 13 componentes con sistema 3 capas</li>
<li>IntegraciÃ³n Perfil Negocio: SecciÃ³nCatÃ¡logo con cards</li>
<li>Multi-sucursales: Tabla intermedia <code>articulo_sucursales</code></li>
<li>Cloudinary: Upload/delete optimizado</li>
</ul>
<p><strong>Lecciones Aprendidas:</strong></p>
<ol>
<li><strong>Sistema de 3 Capas:</strong> Previene race conditions</li>
<li><strong>IIFE Async:</strong> Para dueÃ±os no bloquea UI</li>
<li><strong>Tabla Intermedia:</strong> Productos pueden estar en mÃºltiples sucursales</li>
<li><strong>Cloudinary Optimista:</strong> Upload inmediato, rollback si falla</li>
</ol>
<p><strong>DocumentaciÃ³n:</strong> <code>DOC_02_Catalogo_Backend_Frontend_BusinessStudio.md</code></p>
<hr>
<h4 id="3-ofertas-crud---business-studio-fase-542">3. Ofertas CRUD - Business Studio (Fase 5.4.2)</h4>
<p><strong>Fecha:</strong> 16 Enero 2026<br>
<strong>Estado:</strong> â³ 90% Completado</p>
<p><strong>ImplementaciÃ³n Completa:</strong></p>
<ul>
<li>âœ… Backend: CRUD completo con 8 endpoints</li>
<li>âœ… Frontend BS: GestiÃ³n completa de ofertas</li>
<li>âœ… IntegraciÃ³n Perfil Negocio: SecciÃ³nOfertas</li>
<li>âœ… Tabla <code>ofertas</code> con 5 tipos (2x1, %, $, combo, happy_hour)</li>
<li>âœ… Sistema multi-sucursales con filtros</li>
<li>âœ… DiseÃ±o Glassmorphism Moderno confirmado</li>
</ul>
<p><strong>DiseÃ±o Glassmorphism:</strong></p>
<ul>
<li>Barra lateral 4px (identifica tipo de oferta)</li>
<li>Badge pill con glass effect (valor descuento)</li>
<li>Overlay oscuro en imagen para contraste</li>
<li>Backdrop-blur en card (efecto glass)</li>
<li>Colores por tipo: ğŸŸ  2x1, ğŸ”´ %, ğŸŸ¢ $, ğŸŸ¡ Combo, ğŸ”µ Happy Hour</li>
</ul>
<p><strong>Pendiente (10%):</strong></p>
<ul>
<li>âŒ Modal detalle individual (<code>ModalDetalleOferta.tsx</code>)</li>
<li>âŒ PÃ¡gina pÃºblica <code>/ofertas</code> (feed geolocalizado)</li>
<li>Tiempo estimado: 4-5 horas</li>
</ul>
<p><strong>DocumentaciÃ³n:</strong> <code>PROMPT_Ofertas_COMPLETO_Fase_5.4.2.md</code></p>
<h3 id="54-business-studio---desglose-15-m%C3%B3dulos">5.4 Business Studio - Desglose (15 mÃ³dulos)</h3>
<table>
<thead>
<tr>
<th>#</th>
<th>MÃ³dulo</th>
<th>Estado</th>
<th>Depende de</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Dashboard</td>
<td>âœ… Completado</td>
<td>-</td>
</tr>
<tr>
<td>2</td>
<td>Transacciones</td>
<td>â³ Pendiente</td>
<td>5.5 ScanYA</td>
</tr>
<tr>
<td>3</td>
<td>Clientes</td>
<td>â³ Pendiente</td>
<td>5.5 ScanYA</td>
</tr>
<tr>
<td>4</td>
<td>Opiniones</td>
<td>â³ Pendiente</td>
<td>5.5 ScanYA + 5.7 Transacciones</td>
</tr>
<tr>
<td>5</td>
<td>Alertas</td>
<td>â³ Pendiente</td>
<td>-</td>
</tr>
<tr>
<td>6</td>
<td>CatÃ¡logo</td>
<td>âœ… 100% Completado</td>
<td>07/01/2026</td>
</tr>
<tr>
<td>7</td>
<td>Ofertas</td>
<td>â³ 90% Casi listo</td>
<td>16/01/2026</td>
</tr>
<tr>
<td>8</td>
<td>Cupones</td>
<td>â³ Pendiente</td>
<td>5.11 Cupones</td>
</tr>
<tr>
<td>9</td>
<td>Puntos</td>
<td>â³ Pendiente</td>
<td>5.6 CardYA</td>
</tr>
<tr>
<td>10</td>
<td>Rifas</td>
<td>â³ Pendiente</td>
<td>6.2 DinÃ¡micas</td>
</tr>
<tr>
<td>11</td>
<td>Empleados</td>
<td>â³ Pendiente</td>
<td>5.5 ScanYA</td>
</tr>
<tr>
<td>12</td>
<td>Vacantes</td>
<td>â³ Pendiente</td>
<td>6.3 Empleos</td>
</tr>
<tr>
<td>13</td>
<td>Reportes</td>
<td>â³ Pendiente</td>
<td>5.5 ScanYA</td>
</tr>
<tr>
<td>14</td>
<td>Sucursales</td>
<td>â³ Pendiente</td>
<td>-</td>
</tr>
<tr>
<td>15</td>
<td>Mi Perfil</td>
<td>âœ… 100% Completado</td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="%F0%9F%8E%AF-orden-de-implementaci%C3%B3n-recomendado">ğŸ¯ Orden de ImplementaciÃ³n Recomendado</h2>
<blockquote>
<p><strong>Actualizado:</strong> 16 Enero 2026</p>
</blockquote>
<h3 id="%E2%9C%85-ya-completado">âœ… Ya Completado</h3>
<table>
<thead>
<tr>
<th>#</th>
<th>Fase</th>
<th>Estado</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>5.1 Onboarding Comercial</td>
<td>âœ… 100%</td>
</tr>
<tr>
<td>2</td>
<td>5.2 Toggle UI + ProtecciÃ³n Rutas</td>
<td>âœ… 100%</td>
</tr>
<tr>
<td>3</td>
<td>5.3 Negocios Directorio</td>
<td>âœ… 100%</td>
</tr>
<tr>
<td>4</td>
<td>5.3.1 Sistema Compartir (base)</td>
<td>âœ… Parcial</td>
</tr>
<tr>
<td>5</td>
<td>5.4 BS - Dashboard</td>
<td>âœ… 100%</td>
</tr>
<tr>
<td>6</td>
<td>5.4 BS - Mi Perfil</td>
<td>âœ… 100%</td>
</tr>
<tr>
<td>7</td>
<td>5.4 BS - CatÃ¡logo</td>
<td>âœ… 100%</td>
</tr>
<tr>
<td>8</td>
<td>5.3.2 Auth Opcional</td>
<td>âœ… 100%</td>
</tr>
<tr>
<td><strong>9</strong></td>
<td><strong>5.4.2 BS - Ofertas</strong></td>
<td><strong>â³ 90%</strong> *</td>
</tr>
</tbody>
</table>
<ul>
<li>Pendiente: Modal detalle individual + PÃ¡gina pÃºblica <code>/ofertas</code></li>
</ul>
<h3 id="%E2%8F%B3-siguiente-a-implementar">â³ Siguiente a Implementar</h3>
<table>
<thead>
<tr>
<th>#</th>
<th>Fase</th>
<th>QuÃ© incluye</th>
<th>Tiempo Est.</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td></td>
<td>5.4.2</td>
<td>Modal detalle + PÃ¡gina pÃºblica /ofertas</td>
</tr>
<tr>
<td>2</td>
<td></td>
<td>5.5</td>
<td>ScanYA + PWA</td>
</tr>
<tr>
<td>3</td>
<td></td>
<td>5.6</td>
<td>CardYA + PWA</td>
</tr>
<tr>
<td>4</td>
<td></td>
<td>5.7</td>
<td>Clientes + Transacciones</td>
</tr>
<tr>
<td>5</td>
<td></td>
<td>5.8</td>
<td>Opiniones</td>
</tr>
<tr>
<td>6</td>
<td></td>
<td>5.9</td>
<td>Puntos</td>
</tr>
<tr>
<td>7</td>
<td></td>
<td>5.10</td>
<td>ChatYA + PWA</td>
</tr>
<tr>
<td>8</td>
<td></td>
<td>5.11</td>
<td>Cupones</td>
</tr>
<tr>
<td>9</td>
<td></td>
<td>6.0</td>
<td>Ofertas</td>
</tr>
<tr>
<td>10</td>
<td></td>
<td>6.1</td>
<td>MarketPlace</td>
</tr>
<tr>
<td>11</td>
<td></td>
<td>6.2</td>
<td>DinÃ¡micas</td>
</tr>
<tr>
<td>12</td>
<td></td>
<td>6.3</td>
<td>Empleos</td>
</tr>
<tr>
<td>13</td>
<td></td>
<td>6.4</td>
<td>Empleados</td>
</tr>
<tr>
<td>14</td>
<td></td>
<td>6.5</td>
<td>Sucursales</td>
</tr>
<tr>
<td>15</td>
<td></td>
<td>6.6</td>
<td>Reportes + Alertas</td>
</tr>
<tr>
<td>16</td>
<td></td>
<td>6.7</td>
<td>Panel Admin</td>
</tr>
<tr>
<td>17</td>
<td></td>
<td>7</td>
<td>Testing + Deploy</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="%F0%9F%94%97-flujo-de-dependencias">ğŸ”— Flujo de Dependencias</h3>
<pre class="hljs"><code><div>5.4.1 CatÃ¡logo + 5.4.2 Ofertas â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â†“                                                     â”‚
5.5 ScanYA (registrar ventas, otorgar puntos)         â”‚
â†“                                                     â”‚
5.6 CardYA (usuario ve sus puntos)                    â”‚
â†“                                                     â”‚
5.7 Clientes + Transacciones                          â”‚
â†“                                                     â”‚
5.8 Opiniones (ver y responder reseÃ±as)               â”‚
â†“                                                     â”‚
5.9 Puntos BS                                         â”‚
â†“                                                     â”‚
5.10 ChatYA (comunicaciÃ³n negocio-cliente)            â”‚
â†“                                                     â”‚
5.11 Cupones + 6.0 Ofertas PÃºblicas                   â”‚
â†“                                                     â”‚
6.1 MarketPlace â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
6.2 DinÃ¡micas (Rifas)
6.3 Empleos
â†“
6.4 Empleados + 6.5 Sucursales + 6.6 Reportes + Alertas
â†“
Fase 7: Testing + Deploy
</div></code></pre>
<h3 id="%E2%8F%B1%EF%B8%8F-tiempo-estimado-total">â±ï¸ Tiempo Estimado Total</h3>
<table>
<thead>
<tr>
<th>Bloque</th>
<th>Fases</th>
<th>Tiempo</th>
</tr>
</thead>
<tbody>
<tr>
<td>Inmediato</td>
<td>Completar 5.4.2 Ofertas (modal + pÃ¡gina pÃºblica)</td>
<td>~1 dÃ­a</td>
</tr>
<tr>
<td>Core Transaccional</td>
<td>5.5 ScanYA + 5.6 CardYA</td>
<td>~4-6 dÃ­as</td>
</tr>
<tr>
<td>MÃ³dulos BS dependientes</td>
<td>5.7 Clientes, Transacciones, 5.8 Opiniones, 5.9 Puntos</td>
<td>~4-6 dÃ­as</td>
</tr>
<tr>
<td>ComunicaciÃ³n</td>
<td>5.10 ChatYA</td>
<td>~3-4 dÃ­as</td>
</tr>
<tr>
<td>Cupones/Ofertas</td>
<td>5.11 + 6.0</td>
<td>~3-5 dÃ­as</td>
</tr>
<tr>
<td>Secciones PÃºblicas</td>
<td>6.1, 6.2, 6.3</td>
<td>~8-11 dÃ­as</td>
</tr>
<tr>
<td>BS Restantes</td>
<td>6.4 Empleados, 6.5 Sucursales, 6.6 Reportes, Alertas</td>
<td>~6-8 dÃ­as</td>
</tr>
<tr>
<td>Deploy</td>
<td>Testing + ProducciÃ³n</td>
<td>~1 semana</td>
</tr>
<tr>
<td><strong>Total Restante</strong></td>
<td></td>
<td><strong>~6-7 semanas</strong></td>
</tr>
</tbody>
</table>
<h3 id="%F0%9F%93%8A-progreso-general">ğŸ“Š Progreso General</h3>
<table>
<thead>
<tr>
<th>MÃ³dulo</th>
<th>Completado</th>
<th>Total</th>
<th>%</th>
</tr>
</thead>
<tbody>
<tr>
<td>Business Studio</td>
<td>4</td>
<td>15</td>
<td>27%</td>
</tr>
<tr>
<td>Fase 5 (Frontend)</td>
<td>~4</td>
<td>~11</td>
<td>~36%</td>
</tr>
<tr>
<td>Proyecto Total</td>
<td>Fases 1-4 + parcial 5</td>
<td>7 fases</td>
<td>~60%</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="%F0%9F%8F%97%EF%B8%8F-parte-1-requisitos-arquitect%C3%B3nicos">ğŸ—ï¸ PARTE 1: REQUISITOS ARQUITECTÃ“NICOS</h1>
<blockquote>
<p>âš ï¸ <strong>IMPORTANTE:</strong> Estos requisitos son TRANSVERSALES a todo el proyecto.</p>
</blockquote>
<hr>
<h2 id="11-%F0%9F%8C%8D-geolocalizaci%C3%B3n-global">1.1 ğŸŒ GeolocalizaciÃ³n Global</h2>
<table>
<thead>
<tr>
<th>Aspecto</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Auto-detecciÃ³n</strong></td>
<td>Al entrar, la app detecta la ciudad automÃ¡ticamente (GPS â†’ IP/WiFi)</td>
</tr>
<tr>
<td><strong>Filtrado automÃ¡tico</strong></td>
<td>TODAS las secciones muestran contenido de la ciudad del usuario</td>
</tr>
<tr>
<td><strong>Cambio manual</strong></td>
<td>Si el usuario cambia ciudad â†’ TODO se refresca instantÃ¡neamente</td>
</tr>
<tr>
<td><strong>Store central</strong></td>
<td><code>useGpsStore</code> es la fuente Ãºnica de verdad</td>
</tr>
<tr>
<td><strong>Backend</strong></td>
<td>PostGIS con <code>ST_DWithin</code> para bÃºsquedas por radio</td>
</tr>
</tbody>
</table>
<p><strong>Secciones afectadas:</strong> <code>/negocios</code>, <code>/marketplace</code>, <code>/ofertas</code>, <code>/dinamicas</code>, <code>/empleos</code></p>
<hr>
<h2 id="12-%F0%9F%92%AC-chatya-persistente">1.2 ğŸ’¬ ChatYA Persistente</h2>
<table>
<thead>
<tr>
<th>Aspecto</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Montaje</strong></td>
<td>FUERA del <code>&lt;Outlet /&gt;</code> en MainLayout</td>
</tr>
<tr>
<td><strong>Persistencia</strong></td>
<td>NO se cierra al navegar entre secciones</td>
</tr>
<tr>
<td><strong>Cierre</strong></td>
<td><input type="checkbox" id="checkbox0" checked="true"><label for="checkbox0">o cerrar sesiÃ³n</label></td>
</tr>
<tr>
<td><strong>TecnologÃ­a</strong></td>
<td>Socket.io + MongoDB</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="13-%F0%9F%94%84-sistema-de-modos-de-cuenta">1.3 ğŸ”„ Sistema de Modos de Cuenta</h2>
<table>
<thead>
<tr>
<th>Aspecto</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Modelo</strong></td>
<td>1 correo = 1 cuenta = 2 modos posibles</td>
</tr>
<tr>
<td><strong>Modo Personal</strong></td>
<td>Siempre disponible (gratis)</td>
</tr>
<tr>
<td><strong>Modo Comercial</strong></td>
<td>Requiere pago ($449 MXN/mes)</td>
</tr>
<tr>
<td><strong>Alternancia</strong></td>
<td>Toggle en UI para cambiar de modo</td>
</tr>
<tr>
<td><strong>ChatYA</strong></td>
<td>Unificado (mismo historial, diferente &quot;rol&quot;)</td>
</tr>
</tbody>
</table>
<h3 id="modelo-de-datos">Modelo de Datos</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> Usuario {
  <span class="hljs-comment">// IdentificaciÃ³n</span>
  id: <span class="hljs-built_in">string</span>;
  correo: <span class="hljs-built_in">string</span>;
  nombre: <span class="hljs-built_in">string</span>;
  
  <span class="hljs-comment">// Sistema de Modos</span>
  tieneModoComercial: <span class="hljs-built_in">boolean</span>;  <span class="hljs-comment">// True si pagÃ³ suscripciÃ³n</span>
  modoActivo: <span class="hljs-string">'personal'</span> | <span class="hljs-string">'comercial'</span>;
  
  <span class="hljs-comment">// Datos Modo Personal</span>
  puntosDisponibles: <span class="hljs-built_in">number</span>;
  puntosAcumuladosLifetime: <span class="hljs-built_in">number</span>;
  nivelCardya: <span class="hljs-string">'bronce'</span> | <span class="hljs-string">'plata'</span> | <span class="hljs-string">'oro'</span>;
  
  <span class="hljs-comment">// Datos Modo Comercial</span>
  negocioId?: <span class="hljs-built_in">string</span>;
  onboardingCompletado?: <span class="hljs-built_in">boolean</span>;
  
  <span class="hljs-comment">// SuscripciÃ³n</span>
  stripeCustomerId?: <span class="hljs-built_in">string</span>;
  suscripcionActiva: <span class="hljs-built_in">boolean</span>;
}
</div></code></pre>
<h3 id="visibilidad-por-modo">Visibilidad por Modo</h3>
<table>
<thead>
<tr>
<th>Elemento</th>
<th style="text-align:center">Personal</th>
<th style="text-align:center">Comercial</th>
</tr>
</thead>
<tbody>
<tr>
<td>CardYA</td>
<td style="text-align:center">âœ…</td>
<td style="text-align:center">âŒ</td>
</tr>
<tr>
<td>Mis Cupones</td>
<td style="text-align:center">âœ…</td>
<td style="text-align:center">âŒ</td>
</tr>
<tr>
<td>MarketPlace (ver)</td>
<td style="text-align:center">âœ…</td>
<td style="text-align:center">âœ…</td>
</tr>
<tr>
<td>MarketPlace (publicar)</td>
<td style="text-align:center">âœ…</td>
<td style="text-align:center">âŒ</td>
</tr>
<tr>
<td>Favoritos</td>
<td style="text-align:center">âœ…</td>
<td style="text-align:center">âœ…</td>
</tr>
<tr>
<td>ChatYA</td>
<td style="text-align:center">âœ…</td>
<td style="text-align:center">âœ…</td>
</tr>
<tr>
<td>Business Studio</td>
<td style="text-align:center">âŒ</td>
<td style="text-align:center">âœ…</td>
</tr>
<tr>
<td>ScanYA</td>
<td style="text-align:center">âŒ</td>
<td style="text-align:center">âœ…</td>
</tr>
<tr>
<td>Mi Negocio</td>
<td style="text-align:center">âŒ</td>
<td style="text-align:center">âœ…</td>
</tr>
</tbody>
</table>
<h3 id="flujo-de-activaci%C3%B3n-comercial">Flujo de ActivaciÃ³n Comercial</h3>
<pre class="hljs"><code><div>Usuario registrado (modo Personal por defecto)
         â†“
Click &quot;Conocer planes&quot; / &quot;ğŸ”’ Comercial&quot;
         â†“
Modal de planes â†’ Pago Stripe ($449/mes)
         â†“
tieneModoComercial = true
         â†“
Redirige a Onboarding Wizard
         â†“
Crea negocio â†’ negocioId asignado
         â†“
Toggle disponible para alternar modos
</div></code></pre>
<h3 id="%E2%9A%A0%EF%B8%8F-degradaci%C3%B3n-autom%C3%A1tica-por-falta-de-pago">âš ï¸ DegradaciÃ³n AutomÃ¡tica por Falta de Pago</h3>
<p><strong>Cuando un comerciante deja de pagar:</strong></p>
<pre class="hljs"><code><div>SuscripciÃ³n vencida/rechazada
         â†“
Sistema degrada automÃ¡ticamente a Modo Personal
         â†“
suscripcionActiva = false
tieneModoComercial = false (temporalmente)
modoActivo = 'personal' (forzado)
         â†“
BLOQUEO DE DATOS COMERCIALES:
â”œâ”€â”€ Negocio despublicado (no visible en directorio)
â”œâ”€â”€ Productos/servicios ocultos
â”œâ”€â”€ Ofertas despublicadas
â”œâ”€â”€ Cupones desactivados
â”œâ”€â”€ Empleos despublicados
â”œâ”€â”€ Rifas pausadas
â”œâ”€â”€ Empleados sin acceso a ScanYA
â””â”€â”€ Business Studio bloqueado
         â†“
DATOS PRESERVADOS (no eliminados):
â”œâ”€â”€ InformaciÃ³n del negocio âœ…
â”œâ”€â”€ CatÃ¡logo de productos âœ…
â”œâ”€â”€ Base de clientes âœ…
â”œâ”€â”€ Historial de ventas âœ…
â”œâ”€â”€ Empleados registrados âœ…
â””â”€â”€ Configuraciones âœ…
         â†“
Usuario sigue activo en Modo Personal
â””â”€â”€ Puede seguir usando la app como usuario normal
</div></code></pre>
<p><strong>Cuando el comerciante paga de nuevo:</strong></p>
<pre class="hljs"><code><div>Pago procesado exitosamente
         â†“
suscripcionActiva = true
tieneModoComercial = true
         â†“
REACTIVACIÃ“N AUTOMÃTICA:
â”œâ”€â”€ Negocio republicado (visible en directorio)
â”œâ”€â”€ Productos/servicios visibles
â”œâ”€â”€ Ofertas reactivadas
â”œâ”€â”€ Cupones activados
â”œâ”€â”€ Empleos republicados
â”œâ”€â”€ Rifas reactivadas
â”œâ”€â”€ Empleados recuperan acceso
â””â”€â”€ Business Studio desbloqueado
         â†“
Todo vuelve EXACTAMENTE como estaba
â””â”€â”€ Sin pÃ©rdida de datos ni configuraciones
</div></code></pre>
<p><strong>Modelo de Datos Actualizado:</strong></p>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> Usuario {
  <span class="hljs-comment">// SuscripciÃ³n</span>
  suscripcionActiva: <span class="hljs-built_in">boolean</span>;
  fechaVencimientoSuscripcion?: <span class="hljs-built_in">Date</span>;
  estadoSuscripcion: <span class="hljs-string">'activa'</span> | <span class="hljs-string">'vencida'</span> | <span class="hljs-string">'cancelada'</span>;
  
  <span class="hljs-comment">// Modo degradado</span>
  modoDegradado: <span class="hljs-built_in">boolean</span>;  <span class="hljs-comment">// True cuando se degrada por falta de pago</span>
  fechaDegradacion?: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-keyword">interface</span> Negocio {
  <span class="hljs-comment">// Estado</span>
  publicado: <span class="hljs-built_in">boolean</span>;  <span class="hljs-comment">// False cuando suscripciÃ³n vencida</span>
  motivoDespublicacion?: <span class="hljs-string">'falta_pago'</span> | <span class="hljs-string">'usuario'</span> | <span class="hljs-string">'admin'</span>;
}
</div></code></pre>
<p><strong>Cron Job de VerificaciÃ³n:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// Ejecutar diariamente</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">verificarSuscripcionesVencidas</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> hoy = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
  
  <span class="hljs-keyword">const</span> vencidas = <span class="hljs-keyword">await</span> db.usuarios.find({
    suscripcionActiva: <span class="hljs-literal">true</span>,
    fechaVencimientoSuscripcion: { $lt: hoy }
  });
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> usuario of vencidas) {
    <span class="hljs-keyword">await</span> degradarCuenta(usuario.id);
  }
}

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">degradarCuenta</span>(<span class="hljs-params">usuarioId: <span class="hljs-built_in">string</span></span>) </span>{
  <span class="hljs-comment">// 1. Actualizar usuario</span>
  <span class="hljs-keyword">await</span> db.usuarios.updateOne({ id: usuarioId }, {
    suscripcionActiva: <span class="hljs-literal">false</span>,
    tieneModoComercial: <span class="hljs-literal">false</span>,
    modoActivo: <span class="hljs-string">'personal'</span>,
    modoDegradado: <span class="hljs-literal">true</span>,
    fechaDegradacion: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()
  });
  
  <span class="hljs-comment">// 2. Despublicar negocio</span>
  <span class="hljs-keyword">await</span> db.negocios.updateOne({ usuarioId }, {
    publicado: <span class="hljs-literal">false</span>,
    motivoDespublicacion: <span class="hljs-string">'falta_pago'</span>
  });
  
  <span class="hljs-comment">// 3. Desactivar empleados</span>
  <span class="hljs-keyword">await</span> db.empleados.updateMany(
    { negocioId: usuario.negocioId },
    { activo: <span class="hljs-literal">false</span> }
  );
  
  <span class="hljs-comment">// 4. Notificar usuario</span>
  <span class="hljs-keyword">await</span> enviarNotificacion(usuarioId, <span class="hljs-string">'suscripcion_vencida'</span>);
}

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reactivarCuenta</span>(<span class="hljs-params">usuarioId: <span class="hljs-built_in">string</span></span>) </span>{
  <span class="hljs-comment">// Proceso inverso - todo vuelve a la normalidad</span>
  <span class="hljs-keyword">await</span> db.usuarios.updateOne({ id: usuarioId }, {
    suscripcionActiva: <span class="hljs-literal">true</span>,
    tieneModoComercial: <span class="hljs-literal">true</span>,
    modoDegradado: <span class="hljs-literal">false</span>
  });
  
  <span class="hljs-keyword">await</span> db.negocios.updateOne({ usuarioId }, {
    publicado: <span class="hljs-literal">true</span>,
    motivoDespublicacion: <span class="hljs-literal">null</span>
  });
  
  <span class="hljs-keyword">await</span> db.empleados.updateMany(
    { negocioId: usuario.negocioId },
    { activo: <span class="hljs-literal">true</span> }
  );
}
</div></code></pre>
<h3 id="ui-del-toggle">UI del Toggle</h3>
<p><strong>Ambos modos disponibles:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ‘¤ Personal â”‚ ğŸª Comercialâ”‚  â”‚
â”‚  â”‚     âœ“       â”‚             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Solo Personal (no ha pagado):</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ‘¤ Personal â”‚ ğŸ”’ Comercialâ”‚  â”‚
â”‚  â”‚     âœ“       â”‚ Desbloquear â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h2 id="14-%F0%9F%8F%AA-negocios-solo-f%C3%ADsicos">1.4 ğŸª Negocios Solo FÃ­sicos</h2>
<blockquote>
<p><strong>DecisiÃ³n:</strong> 6 Enero 2026</p>
</blockquote>
<table>
<thead>
<tr>
<th>Aspecto</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Regla</strong></td>
<td>Todos los negocios requieren ubicaciÃ³n fÃ­sica</td>
</tr>
<tr>
<td><strong>Eliminado</strong></td>
<td>Tipo &quot;Online&quot; y columna <code>requiere_direccion</code></td>
</tr>
<tr>
<td><strong>Agregado</strong></td>
<td><code>tiene_servicio_domicilio</code> y <code>tiene_envio_domicilio</code> en <code>negocio_sucursales</code></td>
</tr>
</tbody>
</table>
<h3 id="justificaci%C3%B3n">JustificaciÃ³n</h3>
<table>
<thead>
<tr>
<th>Sin local fÃ­sico</th>
<th>Con local fÃ­sico</th>
</tr>
</thead>
<tbody>
<tr>
<td>Publica GRATIS en Empleos</td>
<td>Publica en Negocios (PAGO)</td>
</tr>
<tr>
<td>Publica GRATIS en MarketPlace</td>
<td>Usa Business Studio</td>
</tr>
<tr>
<td>No necesita CardYA</td>
<td>CardYA requiere escaneo presencial</td>
</tr>
</tbody>
</table>
<h3 id="nuevos-campos">Nuevos Campos</h3>
<table>
<thead>
<tr>
<th>Campo</th>
<th>Tabla</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tiene_envio_domicilio</code></td>
<td><code>negocio_sucursales</code></td>
<td>EnvÃ­as productos al cliente</td>
</tr>
<tr>
<td><code>tiene_servicio_domicilio</code></td>
<td><code>negocio_sucursales</code></td>
<td>TÃº vas al domicilio del cliente</td>
</tr>
</tbody>
</table>
<p><strong>DocumentaciÃ³n:</strong> <code>EliminaciÃ³n_de_Negocios_Online.md</code></p>
<hr>
<h1 id="%F0%9F%93%B1-parte-2-fases-de-desarrollo">ğŸ“± PARTE 2: FASES DE DESARROLLO</h1>
<hr>
<h2 id="%E2%9C%85-fase-4-frontend-base--auth-ui---completada">âœ… FASE 4: Frontend Base + Auth UI - COMPLETADA</h2>
<h3 id="componentes-implementados">Componentes Implementados</h3>
<ul>
<li>Setup React + Vite + Tailwind v4</li>
<li>Stores Zustand (auth, gps, ui, notificaciones)</li>
<li>Sistema de rutas protegidas</li>
<li>Landing page con i18n (ES/EN)</li>
<li>ModalLogin (login, 2FA, recuperar)</li>
<li>PaginaRegistro + Stripe</li>
<li>MainLayout responsive</li>
<li>Navbar desktop (5 tabs + ChatYA)</li>
<li>MobileHeader + BottomNav</li>
<li>Sistema GPS con fallback</li>
<li>Safe areas configuradas</li>
<li>MenuDrawer (diseÃ±o premium)</li>
<li>ColumnaIzquierda (diseÃ±o con CardYA + niveles, CTA negocio)</li>
<li>ColumnaDerecha (Destacados + Fundadores)</li>
<li>PanelNotificaciones (UI + mock)</li>
<li>ChatOverlay (UI + mock)</li>
<li>PÃ¡ginas placeholder (cupones, favoritos, publicaciones)</li>
</ul>
<hr>
<h2 id="%F0%9F%93%B1-fase-5-secciones-de-la-app">ğŸ“± FASE 5: Secciones de la App</h2>
<h3 id="50-sistema-de-modos---backend-%E2%9C%85-completado">5.0 Sistema de Modos - Backend âœ… COMPLETADO</h3>
<blockquote>
<p>âœ… Implementado el 20 Diciembre 2024</p>
</blockquote>
<table>
<thead>
<tr>
<th>Componente</th>
<th>Estado</th>
</tr>
</thead>
<tbody>
<tr>
<td>MigraciÃ³n BD (2 campos + constraints + Ã­ndices)</td>
<td>âœ…</td>
</tr>
<tr>
<td>Schema Drizzle actualizado</td>
<td>âœ…</td>
</tr>
<tr>
<td>JWT con <code>modoActivo</code> (7 archivos)</td>
<td>âœ…</td>
</tr>
<tr>
<td>Middleware <code>validarModo.ts</code></td>
<td>âœ…</td>
</tr>
<tr>
<td>PATCH <code>/api/auth/modo</code></td>
<td>âœ…</td>
</tr>
<tr>
<td>GET <code>/api/auth/modo-info</code></td>
<td>âœ…</td>
</tr>
<tr>
<td>Webhook cancelaciÃ³n Stripe</td>
<td>âœ…</td>
</tr>
</tbody>
</table>
<h4 id="endpoints-implementados">Endpoints Implementados</h4>
<pre class="hljs"><code><div>PATCH /api/auth/modo        â†’ Cambiar modo activo
GET   /api/auth/modo-info   â†’ Info del modo actual
</div></code></pre>
<h4 id="middleware-disponibles">Middleware Disponibles</h4>
<pre class="hljs"><code><div>requiereModoPersonal    <span class="hljs-comment">// Bloquea si estÃ¡ en comercial</span>
requiereModoComercial   <span class="hljs-comment">// Bloquea si estÃ¡ en personal o no pagÃ³</span>
requiereAccesoComercial <span class="hljs-comment">// Solo verifica que tenga suscripciÃ³n</span>
</div></code></pre>
<h4 id="archivos-creadosmodificados">Archivos Creados/Modificados</h4>
<ul>
<li><code>apps/api/src/middleware/validarModo.ts</code> â† NUEVO</li>
<li><code>apps/api/src/db/schemas/schema.ts</code></li>
<li><code>apps/api/src/utils/jwt.ts</code></li>
<li><code>apps/api/src/services/auth.service.ts</code></li>
<li><code>apps/api/src/services/pago.service.ts</code></li>
<li><code>apps/api/src/controllers/auth.controller.ts</code></li>
<li><code>apps/api/src/routes/auth.routes.ts</code></li>
</ul>
<hr>
<h3 id="51-onboarding-wizard---backend-%E2%9C%85-completado--sistema-sucursales">5.1 Onboarding Wizard - Backend âœ… COMPLETADO + Sistema Sucursales</h3>
<blockquote>
<p>âœ… Implementado el 20 Diciembre 2024</p>
</blockquote>
<h4 id="cambio-arquitect%C3%B3nico-sistema-de-sucursales">Cambio ArquitectÃ³nico: Sistema de Sucursales</h4>
<pre class="hljs"><code><div>ANTES:
negocio â†’ direcciÃ³n, telÃ©fono, whatsapp, horarios

AHORA:
negocio â†’ ciudad general, correo, sitio_web
    â””â”€â”€ sucursales (N)
        â”œâ”€â”€ Principal (creada en onboarding)
        â”‚   â””â”€â”€ direcciÃ³n, telÃ©fono, whatsapp, horarios, ubicaciÃ³n PostGIS
        â””â”€â”€ Adicionales (futuras)
</div></code></pre>
<p><strong>Decisiones ArquitectÃ³nicas:</strong></p>
<ul>
<li>Sistema de Puntos: A nivel NEGOCIO (compartido entre sucursales)</li>
<li>Transacciones/Canjes: A nivel SUCURSAL (trazabilidad completa)</li>
<li>Onboarding: Crea solo SUCURSAL PRINCIPAL automÃ¡ticamente</li>
<li>Horarios: Independientes por sucursal</li>
<li>Empleados: Asignados a sucursales especÃ­ficas</li>
</ul>
<h4 id="backend-completado">Backend Completado</h4>
<table>
<thead>
<tr>
<th>Componente</th>
<th>Estado</th>
</tr>
</thead>
<tbody>
<tr>
<td>MigraciÃ³n BD + tabla <code>negocio_sucursales</code></td>
<td>âœ…</td>
</tr>
<tr>
<td>Schema Drizzle (8 cambios)</td>
<td>âœ…</td>
</tr>
<tr>
<td>Relations Drizzle (8 cambios)</td>
<td>âœ…</td>
</tr>
<tr>
<td>15 endpoints REST</td>
<td>âœ…</td>
</tr>
<tr>
<td>Servicios onboarding</td>
<td>âœ…</td>
</tr>
<tr>
<td>Controllers</td>
<td>âœ…</td>
</tr>
<tr>
<td>Routes</td>
<td>âœ…</td>
</tr>
<tr>
<td>Middleware verificarPropietarioNegocio</td>
<td>âœ…</td>
</tr>
<tr>
<td>Validaciones Zod</td>
<td>âœ…</td>
</tr>
<tr>
<td>CompilaciÃ³n TypeScript</td>
<td>âœ… 0 errores</td>
</tr>
</tbody>
</table>
<h4 id="endpoints-implementados">Endpoints Implementados</h4>
<pre class="hljs"><code><div>CATEGORÃAS:
GET  /api/categorias                    â†’ Lista 11 categorÃ­as
GET  /api/categorias/:id/subcategorias  â†’ Lista subcategorÃ­as

ONBOARDING (15 endpoints):
POST /api/onboarding/iniciar            â†’ Crea negocio borrador
POST /api/onboarding/:id/categorias     â†’ Paso 1: Asignar subcategorÃ­as (mÃ¡x 3)
POST /api/onboarding/:id/ubicacion      â†’ Paso 2: Crea sucursal principal
POST /api/onboarding/:id/contacto       â†’ Paso 3: TelÃ©fono/WhatsApp sucursal
POST /api/onboarding/:id/horarios       â†’ Paso 4: Horarios sucursal
POST /api/onboarding/:id/logo           â†’ Paso 5a: Logo
POST /api/onboarding/:id/portada        â†’ Paso 5b: Portada
POST /api/onboarding/:id/galeria        â†’ Paso 5c: GalerÃ­a (1-10)
POST /api/onboarding/:id/metodos-pago   â†’ Paso 6: MÃ©todos de pago
POST /api/onboarding/:id/puntos         â†’ Paso 7: Â¿Participa en puntos?
POST /api/onboarding/:id/articulos      â†’ Paso 8: Productos (mÃ­n 3)
POST /api/onboarding/:id/finalizar      â†’ Publica negocio
GET  /api/onboarding/:id/progreso       â†’ Estado del onboarding
</div></code></pre>
<h4 id="archivos-creadosmodificados">Archivos Creados/Modificados</h4>
<pre class="hljs"><code><div>apps/api/src/
â”œâ”€â”€ db/schemas/
â”‚   â”œâ”€â”€ schema.ts           # 8 cambios (nueva tabla negocio_sucursales)
â”‚   â””â”€â”€ relations.ts        # 8 cambios (relaciones sucursales)
â”œâ”€â”€ services/
â”‚   â””â”€â”€ onboarding.service.ts
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ categorias.controller.ts
â”‚   â””â”€â”€ onboarding.controller.ts
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ categorias.routes.ts
â”‚   â”œâ”€â”€ onboarding.routes.ts
â”‚   â””â”€â”€ index.ts            # Actualizado
â”œâ”€â”€ middleware/
â”‚   â””â”€â”€ negocio.middleware.ts
â””â”€â”€ schemas/
    â”œâ”€â”€ categorias.schema.ts
    â””â”€â”€ onboarding.schema.ts
</div></code></pre>
<hr>
<h3 id="511-estandarizaci%C3%B3n-nomenclatura-%E2%9C%85-completado">5.1.1 EstandarizaciÃ³n Nomenclatura âœ… COMPLETADO</h3>
<blockquote>
<p>âœ… Implementado el 21 Diciembre 2024</p>
</blockquote>
<h4 id="cambios-arquitect%C3%B3nicos">Cambios ArquitectÃ³nicos</h4>
<p><strong>Antes:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// PostgreSQL usaba snake_case</span>
<span class="hljs-comment">// TypeScript usaba mezcla de estilos</span>
<span class="hljs-comment">// API responses inconsistentes</span>
</div></code></pre>
<p><strong>Ahora:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// PostgreSQL: snake_case (negocio_id, created_at)</span>
<span class="hljs-comment">//      â†“ Drizzle (transformaciÃ³n automÃ¡tica)</span>
<span class="hljs-comment">// TypeScript: camelCase (negocioId, createdAt)</span>
<span class="hljs-comment">//      â†“</span>
<span class="hljs-comment">// API Response: { success, data, message }</span>
</div></code></pre>
<h4 id="implementaci%C3%B3n">ImplementaciÃ³n</h4>
<table>
<thead>
<tr>
<th>Componente</th>
<th>Estado</th>
</tr>
</thead>
<tbody>
<tr>
<td>Drizzle <code>casing: 'snake_case'</code> configurado</td>
<td>âœ…</td>
</tr>
<tr>
<td>TransformaciÃ³n automÃ¡tica snake_case â†” camelCase</td>
<td>âœ…</td>
</tr>
<tr>
<td>API responses en inglÃ©s (success, data, message)</td>
<td>âœ…</td>
</tr>
<tr>
<td>439 cambios aplicados en backend</td>
<td>âœ…</td>
</tr>
<tr>
<td>0 errores TypeScript</td>
<td>âœ…</td>
</tr>
<tr>
<td>Backend compila correctamente</td>
<td>âœ…</td>
</tr>
<tr>
<td>Frontend compila correctamente</td>
<td>âœ…</td>
</tr>
</tbody>
</table>
<h4 id="archivos-modificados">Archivos Modificados</h4>
<p><strong>ConfiguraciÃ³n Drizzle:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// apps/api/drizzle.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  casing: <span class="hljs-string">'snake_case'</span>  <span class="hljs-comment">// â† NUEVO</span>
}
</div></code></pre>
<p><strong>EstÃ¡ndar API Response:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// Todas las respuestas ahora usan:</span>
{
  success: <span class="hljs-built_in">boolean</span>,
  data?: <span class="hljs-built_in">any</span>,
  message?: <span class="hljs-built_in">string</span>
}
</div></code></pre>
<hr>
<h3 id="512-onboarding-wizard---frontend-%E2%9C%85-completado">5.1.2 Onboarding Wizard - Frontend âœ… COMPLETADO</h3>
<blockquote>
<p>âœ… Completado el 26 Diciembre 2024</p>
</blockquote>
<h4 id="progreso-actual---100-completado">Progreso Actual - 100% COMPLETADO</h4>
<table>
<thead>
<tr>
<th>Componente</th>
<th>Estado</th>
</tr>
</thead>
<tbody>
<tr>
<td>Layout estilo Stripe</td>
<td>âœ…</td>
</tr>
<tr>
<td>Indicador de 8 pasos</td>
<td>âœ…</td>
</tr>
<tr>
<td>BotonesNavegacion con validaciÃ³n</td>
<td>âœ…</td>
</tr>
<tr>
<td>ModalPausar con guardado</td>
<td>âœ…</td>
</tr>
<tr>
<td>useOnboardingStore completo</td>
<td>âœ…</td>
</tr>
<tr>
<td>Paso 1 (CategorÃ­as)</td>
<td>âœ…</td>
</tr>
<tr>
<td>Paso 2 (UbicaciÃ³n Dual)</td>
<td>âœ…</td>
</tr>
<tr>
<td>Paso 3 (Contacto + Lada)</td>
<td>âœ…</td>
</tr>
<tr>
<td>Paso 4 (Horarios)</td>
<td>âœ…</td>
</tr>
<tr>
<td>Paso 5 (ImÃ¡genes + Cloudinary)</td>
<td>âœ…</td>
</tr>
<tr>
<td>Paso 6 (MÃ©todos de Pago)</td>
<td>âœ…</td>
</tr>
<tr>
<td>Paso 7 (Sistema de Puntos)</td>
<td>âœ…</td>
</tr>
<tr>
<td>Paso 8 (Productos/Servicios)</td>
<td>âœ…</td>
</tr>
<tr>
<td>Sistema de FinalizaciÃ³n</td>
<td>âœ…</td>
</tr>
<tr>
<td>RedirecciÃ³n segÃºn onboardingCompletado</td>
<td>âœ…</td>
</tr>
<tr>
<td>JWT incluye <code>onboardingCompletado</code></td>
<td>âœ…</td>
</tr>
<tr>
<td>Cloudinary upload/delete optimista</td>
<td>âœ…</td>
</tr>
</tbody>
</table>
<h4 id="estructura-de-archivos">Estructura de Archivos</h4>
<pre class="hljs"><code><div>apps/web/src/
pages/
â”œâ”€â”€ private/
â”‚   â””â”€â”€ business/
â”‚       â””â”€â”€ onboarding/
â”‚           â”œâ”€â”€ PaginaOnboarding.tsx          âœ…
â”‚           â””â”€â”€ pasos/
â”‚               â”œâ”€â”€ index.ts                  âœ…
â”‚               â”œâ”€â”€ PasoCategoria.tsx         âœ…
â”‚               â”œâ”€â”€ PasoUbicacion.tsx         âœ… (Sistema Dual)
â”‚               â”œâ”€â”€ PasoContacto.tsx          âœ… (Lada Editable)
â”‚               â”œâ”€â”€ PasoHorarios.tsx          âœ…
â”‚               â”œâ”€â”€ PasoImagenes.tsx          âœ… (Cloudinary + OptimizaciÃ³n)
â”‚               â”œâ”€â”€ PasoMetodosPago.tsx       âœ…
â”‚               â”œâ”€â”€ PasoPuntos.tsx            âœ…
â”‚               â”œâ”€â”€ PasoProductos.tsx         âœ…
â”‚               â””â”€â”€ ModalAgregarProducto.tsx  âœ…
â”œâ”€â”€ componentes/
â”‚   â””â”€â”€ onboarding/
â”‚       â”œâ”€â”€ LayoutOnboarding.tsx              âœ…
â”‚       â”œâ”€â”€ IndicadorPasos.tsx                âœ… (7/8 dinÃ¡mico)
â”‚       â”œâ”€â”€ BotonesNavegacion.tsx             âœ… (Finalizar + Guardar AtrÃ¡s)
â”‚       â””â”€â”€ ModalPausar.tsx                   âœ…
â””â”€â”€ stores/
â””â”€â”€ useOnboardingStore.ts                 âœ…


</div></code></pre>
<h4 id="funcionalidades-implementadas-%E2%9C%85">Funcionalidades Implementadas âœ…</h4>
<p><strong>Layout y NavegaciÃ³n:</strong></p>
<ul>
<li>âœ… DiseÃ±o estilo Stripe (moderno y limpio)</li>
<li>âœ… Indicador visual dinÃ¡mico (7 u 8 pasos segÃºn tipo negocio)</li>
<li>âœ… Botones AtrÃ¡s/Siguiente con validaciÃ³n y guardado</li>
<li>âœ… Modal &quot;Pausar&quot; con confirmaciÃ³n</li>
<li>âœ… PrevenciÃ³n de salida sin guardar</li>
<li>âœ… BotÃ³n &quot;Finalizar y Publicar&quot; en paso final</li>
</ul>
<p><strong>Paso 1 - CategorÃ­as:</strong> âœ…</p>
<ul>
<li>âœ… SelecciÃ³n de hasta 3 subcategorÃ­as</li>
<li>âœ… BÃºsqueda y filtrado</li>
<li>âœ… ValidaciÃ³n mÃ­nimo 1 subcategorÃ­a</li>
<li>âœ… Estado persistente en store</li>
<li>âœ… Guardado optimista</li>
</ul>
<p><strong>Paso 2 - UbicaciÃ³n:</strong> âœ…</p>
<ul>
<li>âœ… Mapa Leaflet interactivo</li>
<li>âœ… Marcador arrastrable</li>
<li>âœ… DetecciÃ³n GPS automÃ¡tica</li>
<li>âœ… Campo ciudad + direcciÃ³n</li>
<li>âœ… ExtracciÃ³n PostGIS (ST_X/ST_Y)</li>
</ul>
<p><strong>Paso 3 - Contacto:</strong> âœ…</p>
<ul>
<li>âœ… Lada editable (+52, +1, +34, +593, etc.)</li>
<li>âœ… ValidaciÃ³n telÃ©fono (10 dÃ­gitos)</li>
<li>âœ… Checkbox &quot;Usar mismo nÃºmero para WhatsApp&quot;</li>
<li>âœ… Campo correo electrÃ³nico</li>
<li>âœ… Campo sitio web (opcional)</li>
<li>âœ… Soporte internacional</li>
</ul>
<p><strong>Paso 4 - Horarios:</strong> âœ…</p>
<ul>
<li>âœ… Selector horarios por dÃ­a (Lun-Dom)</li>
<li>âœ… Toggle 24/7</li>
<li>âœ… Toggle &quot;Cerrado&quot;</li>
<li>âœ… Horario de comida (pausa)</li>
<li>âœ… Copiar horario a todos los dÃ­as</li>
<li>âœ… ValidaciÃ³n rangos</li>
</ul>
<p><strong>Paso 5 - ImÃ¡genes:</strong> âœ…</p>
<ul>
<li>âœ… Upload logo (opcional, 500x500px)</li>
<li>âœ… Upload portada (obligatorio, 1600x900px)</li>
<li>âœ… Upload galerÃ­a (1-10 imÃ¡genes, 1200x1200px)</li>
<li>âœ… Drag &amp; drop en las 3 zonas</li>
<li>âœ… OptimizaciÃ³n automÃ¡tica a .webp (~90% ahorro)</li>
<li>âœ… Upload optimista (preview instantÃ¡neo)</li>
<li>âœ… EliminaciÃ³n dual (Cloudinary + BD)</li>
</ul>
<p><strong>Paso 6 - MÃ©todos de Pago:</strong> âœ…</p>
<ul>
<li>âœ… Checkbox Efectivo</li>
<li>âœ… Checkbox Tarjeta de crÃ©dito/dÃ©bito</li>
<li>âœ… Checkbox Transferencia bancaria</li>
<li>âœ… ValidaciÃ³n mÃ­nimo 1 mÃ©todo</li>
</ul>
<p><strong>Paso 7 - Sistema de Puntos (CardYA):</strong> âœ…</p>
<ul>
<li>âœ… Toggle participar/no participar</li>
<li>âœ… ExplicaciÃ³n del sistema CardYA</li>
<li>âœ… Sin validaciÃ³n obligatoria</li>
</ul>
<p><strong>Paso 8 - Productos/Servicios:</strong> âœ…</p>
<ul>
<li>âœ… Formulario agregar producto/servicio</li>
<li>âœ… Lista de productos agregados</li>
<li>âœ… Editar producto existente</li>
<li>âœ… Eliminar producto</li>
<li>âœ… Upload imagen por producto (optimizada a .webp)</li>
<li>âœ… ValidaciÃ³n mÃ­nimo 3 productos para publicar</li>
<li>âœ… ValidaciÃ³n mÃ­nimo 1 producto para guardar borrador</li>
<li>âœ… BotÃ³n &quot;Finalizar y Publicar&quot;</li>
</ul>
<p><strong>Sistema de FinalizaciÃ³n:</strong> âœ…</p>
<ul>
<li>âœ… Endpoint POST /api/onboarding/:id/finalizar</li>
<li>âœ… Actualiza onboarding_completado = true</li>
<li>âœ… Actualiza es_borrador = false</li>
<li>âœ… RedirecciÃ³n a Business Studio</li>
<li>âœ… PrevenciÃ³n de loop infinito</li>
</ul>
<p><strong>Cloudinary:</strong> âœ…</p>
<ul>
<li>âœ… Upload de imÃ¡genes optimista</li>
<li>âœ… Delete de imÃ¡genes optimista</li>
<li>âœ… PrevisualizaciÃ³n inmediata</li>
<li>âœ… Manejo de errores con rollback</li>
<li>âœ… OptimizaciÃ³n automÃ¡tica a .webp</li>
<li>âœ… Upload diferido (evita huÃ©rfanos)</li>
</ul>
<p><strong>RedirecciÃ³n:</strong> âœ…</p>
<ul>
<li>âœ… Primera vez con modo comercial â†’ <code>/business/onboarding</code></li>
<li>âœ… Usuario puede abortar onboarding y navegar como usuario normal</li>
<li>âœ… Al intentar entrar a <code>/business-studio</code> se verifica <code>onboardingCompletado</code></li>
<li>âœ… Si <code>onboardingCompletado: false</code> â†’ Redirige a <code>/business/onboarding</code></li>
<li>âœ… Si <code>onboardingCompletado: true</code> â†’ Acceso completo a Business Studio</li>
</ul>
<p><strong>Endpoints Nuevos Creados:</strong></p>
<table>
<thead>
<tr>
<th>MÃ©todo</th>
<th>Ruta</th>
<th>FunciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/api/negocios/:id</code></td>
<td>Obtener negocio</td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/negocios/:id/galeria</code></td>
<td>Obtener galerÃ­a</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/onboarding/:id/logo</code></td>
<td>Guardar logo</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/onboarding/:id/portada</code></td>
<td>Guardar portada</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/onboarding/:id/galeria</code></td>
<td>Guardar galerÃ­a</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/api/negocios/:id/logo</code></td>
<td>Eliminar logo</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/api/negocios/:id/portada</code></td>
<td>Eliminar portada</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/api/negocios/:id/galeria/:imagenId</code></td>
<td>Eliminar imagen</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="%F0%9F%93%9D-decisiones-arquitect%C3%B3nicas---fase-511">ğŸ“ Decisiones ArquitectÃ³nicas - Fase 5.1.1</h3>
<h4 id="1-negocios-solo-f%C3%ADsicos-actualizado-06012026">1. Negocios Solo FÃ­sicos (Actualizado 06/01/2026)</h4>
<ul>
<li>Todos los negocios requieren ubicaciÃ³n fÃ­sica</li>
<li>8 pasos de onboarding (mapa obligatorio)</li>
<li>Eliminado tipo &quot;Online&quot; y columna <code>requiere_direccion</code></li>
<li>Agregado <code>tiene_servicio_domicilio</code> y <code>tiene_envio_domicilio</code></li>
</ul>
<h4 id="2-optimizaci%C3%B3n-de-im%C3%A1genes-client-side">2. OptimizaciÃ³n de ImÃ¡genes Client-Side</h4>
<pre class="hljs"><code><div>Logo:     maxWidth: <span class="hljs-number">500</span>px,  quality: <span class="hljs-number">0.85</span>, format: webp
Portada:  maxWidth: <span class="hljs-number">1600</span>px, quality: <span class="hljs-number">0.85</span>, format: webp
GalerÃ­a:  maxWidth: <span class="hljs-number">1200</span>px, quality: <span class="hljs-number">0.85</span>, format: webp
Productos: maxWidth: <span class="hljs-number">800</span>px, quality: <span class="hljs-number">0.85</span>, format: webp
</div></code></pre>
<h4 id="3-upload-diferido">3. Upload Diferido</h4>
<ul>
<li>Preview local inmediato (URL.createObjectURL)</li>
<li>Upload a Cloudinary solo al confirmar</li>
<li>Evita imÃ¡genes huÃ©rfanas</li>
</ul>
<h4 id="4-validaci%C3%B3n-flexible-de-productos">4. ValidaciÃ³n Flexible de Productos</h4>
<ul>
<li>Guardar borrador: mÃ­nimo 1 producto</li>
<li>Publicar negocio: mÃ­nimo 3 productos</li>
</ul>
<hr>
<h3 id="%E2%9A%A0%EF%B8%8F-pendientes-documentados---para-fase-6">âš ï¸ Pendientes Documentados - Para Fase 6</h3>
<table>
<thead>
<tr>
<th>Funcionalidad</th>
<th>Estado</th>
<th>Prioridad</th>
</tr>
</thead>
<tbody>
<tr>
<td>Endpoint DELETE <code>/api/negocios/:id</code></td>
<td>âŒ No existe</td>
<td>Media</td>
</tr>
<tr>
<td>Limpieza Cloudinary al eliminar negocio</td>
<td>âŒ No existe</td>
<td>Media</td>
</tr>
<tr>
<td>Endpoint DELETE <code>/api/usuarios/:id</code></td>
<td>âŒ No existe</td>
<td>Baja</td>
</tr>
</tbody>
</table>
<p><strong>DecisiÃ³n:</strong> Implementar a nivel de NEGOCIO (no usuario). Al eliminar negocio â†’ Limpiar Cloudinary â†’ CASCADE en BD.</p>
<hr>
<h3 id="%F0%9F%94%AE-estado-y-recomendaciones-por-fase">ğŸ”® Estado y Recomendaciones por Fase</h3>
<h4 id="%E2%9C%85-fases-completadas">âœ… Fases Completadas</h4>
<table>
<thead>
<tr>
<th>Fase</th>
<th>Estado</th>
<th>Fecha</th>
</tr>
</thead>
<tbody>
<tr>
<td>5.1 Onboarding Comercial</td>
<td>âœ… 100%</td>
<td>Dic 2024</td>
</tr>
<tr>
<td>5.2 Toggle UI + ProtecciÃ³n Rutas</td>
<td>âœ… 100%</td>
<td>26/12/2024</td>
</tr>
<tr>
<td>5.3 Negocios Directorio</td>
<td>âœ… 100%</td>
<td>02/01/2026</td>
</tr>
<tr>
<td>5.3.1 Sistema Compartir (base)</td>
<td>âœ… Parcial</td>
<td>02/01/2026</td>
</tr>
<tr>
<td>5.3.2 Auth Opcional + ModalAuthRequerido</td>
<td>âœ… 100%</td>
<td>16/01/2026</td>
</tr>
<tr>
<td>5.4 BS - Dashboard</td>
<td>âœ… 100%</td>
<td>02/01/2026</td>
</tr>
<tr>
<td>5.4 BS - Mi Perfil</td>
<td>âœ… 100%</td>
<td>06/01/2026</td>
</tr>
<tr>
<td>5.4.1 CatÃ¡logo CRUD</td>
<td>âœ… 100%</td>
<td>07/01/2026</td>
</tr>
<tr>
<td>5.4.2 Ofertas CRUD</td>
<td>â³ 90%</td>
<td>16/01/2026</td>
</tr>
</tbody>
</table>
<h4 id="%E2%8F%B3-fase-actual-54-business-studio-27">â³ Fase Actual: 5.4 Business Studio (27%)</h4>
<p><strong>Completado:</strong></p>
<ul>
<li>âœ… Layout y navegaciÃ³n</li>
<li>âœ… Router con 15 rutas</li>
<li>âœ… Dashboard con KPIs</li>
<li>âœ… Mi Perfil (6 tabs)</li>
<li>âœ… CatÃ¡logo CRUD completo</li>
<li>âœ… Ofertas CRUD (90% - falta modal detalle + pÃ¡gina pÃºblica)</li>
<li>âœ… Arquitectura de sucursales</li>
<li>âœ… Interceptor Axios automÃ¡tico</li>
<li>âœ… Service centralizado (<code>negocioManagement.service.ts</code>)</li>
</ul>
<p><strong>Siguiente inmediato:</strong></p>
<ul>
<li>â³ Completar Ofertas (modal detalle + pÃ¡gina pÃºblica) - ~1 dÃ­a</li>
<li>â³ ScanYA + PWA - ~2-3 dÃ­as</li>
</ul>
<h4 id="%F0%9F%8E%AF-orden-de-implementaci%C3%B3n-recomendado">ğŸ¯ Orden de ImplementaciÃ³n Recomendado</h4>
<table>
<thead>
<tr>
<th>#</th>
<th>Fase</th>
<th>DescripciÃ³n</th>
<th>Tiempo</th>
<th>Depende de</th>
</tr>
</thead>
<tbody>
<tr>
<td>5.4.2</td>
<td>Completar Ofertas</td>
<td>Modal detalle + PÃ¡gina pÃºblica /ofertas</td>
<td>~1 dÃ­a</td>
<td>-</td>
</tr>
<tr>
<td>5.5</td>
<td>ScanYA + PWA</td>
<td>Registrar ventas, dar puntos</td>
<td>~2-3 dÃ­as</td>
<td>-</td>
</tr>
<tr>
<td>5.6</td>
<td>CardYA + PWA</td>
<td>Usuario ve sus puntos, QR</td>
<td>~2-3 dÃ­as</td>
<td>5.5 ScanYA</td>
</tr>
<tr>
<td>5.7</td>
<td>Clientes + Transacciones</td>
<td>Historial de clientes y ventas en BS</td>
<td>~2-3 dÃ­as</td>
<td>5.5 ScanYA</td>
</tr>
<tr>
<td>5.8</td>
<td>Opiniones</td>
<td>Ver y responder reseÃ±as en BS</td>
<td>~2-3 dÃ­as</td>
<td>5.5 ScanYA + 5.7</td>
</tr>
<tr>
<td>5.9</td>
<td>Puntos</td>
<td>Config puntos del negocio en BS</td>
<td>~1 dÃ­a</td>
<td>5.6 CardYA</td>
</tr>
<tr>
<td>5.10</td>
<td>ChatYA + PWA</td>
<td>MensajerÃ­a negocio-cliente</td>
<td>~3-4 dÃ­as</td>
<td>-</td>
</tr>
<tr>
<td>5.11</td>
<td>Cupones</td>
<td>Vista pÃºblica + CRUD en BS</td>
<td>~2-3 dÃ­as</td>
<td>5.5 ScanYA</td>
</tr>
<tr>
<td>6.0</td>
<td>Ofertas PÃºblicas</td>
<td>Vista pÃºblica (ruta ya existe)</td>
<td>~1-2 dÃ­as</td>
<td>5.4.2</td>
</tr>
<tr>
<td>6.1</td>
<td>MarketPlace</td>
<td>Vista pÃºblica, compra-venta usuarios</td>
<td>~3-4 dÃ­as</td>
<td>-</td>
</tr>
<tr>
<td>6.2</td>
<td>DinÃ¡micas</td>
<td>Vista pÃºblica + Rifas en BS</td>
<td>~3-4 dÃ­as</td>
<td>-</td>
</tr>
<tr>
<td>6.3</td>
<td>Empleos</td>
<td>Vista pÃºblica + Vacantes en BS</td>
<td>~2-3 dÃ­as</td>
<td>-</td>
</tr>
<tr>
<td>6.4</td>
<td>Empleados</td>
<td>GestiÃ³n empleados en BS (nick + PIN)</td>
<td>~1-2 dÃ­as</td>
<td>5.5 ScanYA</td>
</tr>
<tr>
<td>6.5</td>
<td>Sucursales</td>
<td>Agregar/editar sucursales en BS</td>
<td>~2 dÃ­as</td>
<td>-</td>
</tr>
<tr>
<td>6.6</td>
<td>Reportes + Alertas</td>
<td>EstadÃ­sticas y notificaciones en BS</td>
<td>~2-3 dÃ­as</td>
<td>5.5 ScanYA</td>
</tr>
<tr>
<td>7</td>
<td>Testing + Deploy</td>
<td>QA y lanzamiento a producciÃ³n</td>
<td>~1 semana</td>
<td>Todo lo anterior</td>
</tr>
</tbody>
</table>
<h4 id="%F0%9F%92%A1-recomendaciones-t%C3%A9cnicas-por-fase">ğŸ’¡ Recomendaciones TÃ©cnicas por Fase</h4>
<p><strong>5.4.1 CatÃ¡logo:</strong></p>
<ul>
<li>Reutilizar <code>negocioManagement.service.ts</code> para CRUD</li>
<li>Modal de creaciÃ³n/ediciÃ³n similar a Onboarding</li>
<li>Upload de imÃ¡genes con optimismo (ya implementado)</li>
<li>Filtros por tipo (producto/servicio) y categorÃ­a</li>
<li>Tabla <code>articulos</code> ya existe en BD</li>
</ul>
<p><strong>5.4.2 Ofertas:</strong></p>
<ul>
<li>Reutilizar <code>negocioManagement.service.ts</code> para CRUD</li>
<li>Tipos: 2x1, %, $, combo, happy hour</li>
<li>Configurar dÃ­as y horarios aplicables</li>
<li>Toggle activar/pausar oferta</li>
<li>Vista previa de cÃ³mo se verÃ¡ en pÃºblico</li>
<li>Conectar con ruta pÃºblica <code>/p/oferta/:id</code> (ya existe)</li>
</ul>
<p><strong>5.5 ScanYA + PWA:</strong></p>
<ul>
<li>PWA standalone para uso rÃ¡pido en caja</li>
<li>Login empleados: nick + PIN (no email)</li>
<li>Validar QR con expiraciÃ³n de 2 minutos</li>
<li>Calcular puntos: <code>monto / valorPunto * multiplicadorNivel</code></li>
</ul>
<p><strong>5.6 CardYA + PWA:</strong></p>
<ul>
<li>QR dinÃ¡mico que se regenera cada 2 min</li>
<li>Niveles calculados por <code>puntos_lifetime</code> global</li>
<li>Puntos son especÃ­ficos por negocio (no transferibles)</li>
<li>3 diseÃ±os de tarjeta (Bronce, Plata, Oro)</li>
</ul>
<p><strong>5.7 Clientes + Transacciones:</strong></p>
<ul>
<li>Historial de clientes que han comprado</li>
<li>Lista de transacciones con filtros</li>
<li>Detalle por cliente (visitas, puntos, nivel)</li>
<li>Requiere datos de ScanYA (5.5)</li>
</ul>
<p><strong>5.8 Opiniones:</strong></p>
<ul>
<li>Ver todas las reseÃ±as del negocio con filtros</li>
<li>Responder reseÃ±as de clientes verificados</li>
<li>Validar que cliente haya comprado antes (requiere ScanYA)</li>
<li>MÃ©tricas: promedio calificaciÃ³n, tasa respuesta</li>
<li>Templates de respuestas profesionales</li>
<li>Sistema de reportes para reseÃ±as inapropiadas</li>
</ul>
<p><strong>5.9 Puntos:</strong></p>
<ul>
<li>Configurar valor del punto (1 punto = $X pesos)</li>
<li>Activar/desactivar sistema de puntos</li>
<li>Simulador de acumulaciÃ³n por nivel</li>
<li>EstadÃ­sticas de puntos otorgados</li>
</ul>
<p><strong>5.10 ChatYA + PWA:</strong></p>
<ul>
<li>Socket.io + MongoDB para mensajes</li>
<li>Identidad segÃºn modo (usuario personal o negocio)</li>
<li>Overlay persistente (no ruta dedicada)</li>
<li>Reutilizar <code>obtenerDatosNegocio()</code> para avatar comercial</li>
</ul>
<p><strong>Fase 7 - Testing + Deploy:</strong></p>
<ul>
<li>Variables de entorno en Railway/Vercel</li>
<li>Stripe en modo live</li>
<li>Cloudinary con folder de producciÃ³n</li>
<li>Redis para sesiones</li>
<li>Dominio personalizado + SSL</li>
</ul>
<h4 id="%F0%9F%93%8A-progreso-general">ğŸ“Š Progreso General</h4>
<table>
<thead>
<tr>
<th>Ãrea</th>
<th>Completado</th>
<th>Total</th>
<th>%</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fases 1-4 (Base)</td>
<td>4</td>
<td>4</td>
<td>100%</td>
</tr>
<tr>
<td>Fase 5 (Frontend)</td>
<td>~4</td>
<td>~11</td>
<td>~36%</td>
</tr>
<tr>
<td>Business Studio</td>
<td>4</td>
<td>15</td>
<td>27%</td>
</tr>
<tr>
<td><strong>Proyecto Total</strong></td>
<td></td>
<td></td>
<td><strong>~60%</strong></td>
</tr>
</tbody>
</table>
<p><strong>Tiempo estimado restante:</strong> ~6-7 semanas</p>
<hr>
<h3 id="%F0%9F%93%8A-m%C3%A9tricas-fase-511">ğŸ“Š MÃ©tricas Fase 5.1.1</h3>
<table>
<thead>
<tr>
<th>MÃ©trica</th>
<th>Valor</th>
</tr>
</thead>
<tbody>
<tr>
<td>Archivos creados/modificados</td>
<td>~20</td>
</tr>
<tr>
<td>LÃ­neas de cÃ³digo</td>
<td>~5,000</td>
</tr>
<tr>
<td>Endpoints nuevos</td>
<td>8</td>
</tr>
<tr>
<td>Bugs resueltos</td>
<td>12</td>
</tr>
<tr>
<td>Tiempo de desarrollo</td>
<td>~5 dÃ­as</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="52-toggle-ui--protecci%C3%B3n-de-rutas-%E2%9C%85-completado-26122024">5.2 Toggle UI + ProtecciÃ³n de Rutas âœ… COMPLETADO (26/12/2024)</h3>
<blockquote>
<p>Permite a usuarios con ambos modos alternar entre Personal y Comercial.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Elemento</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>FunciÃ³n</strong></td>
<td>Alternar modo activo desde el frontend</td>
</tr>
<tr>
<td><strong>QuiÃ©n usa</strong></td>
<td>Usuarios con <code>tiene_modo_comercial: true</code></td>
</tr>
<tr>
<td><strong>Backend</strong></td>
<td>Ya implementado (PATCH /api/auth/modo)</td>
</tr>
</tbody>
</table>
<h4 id="componentes-creados-%E2%9C%85">Componentes Creados âœ…</h4>
<table>
<thead>
<tr>
<th>Componente</th>
<th>AcciÃ³n</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ToggleModoUsuario.tsx</code></td>
<td>âœ… CREADO</td>
<td>Toggle [Personal] [Comercial] reutilizable</td>
</tr>
<tr>
<td><code>ModalCambiarModo.tsx</code></td>
<td>âœ… CREADO</td>
<td>ConfirmaciÃ³n antes de cambiar modo</td>
</tr>
<tr>
<td><code>ModoGuard.tsx</code></td>
<td>âœ… CREADO</td>
<td>Guard de protecciÃ³n de rutas</td>
</tr>
<tr>
<td><code>ColumnaIzquierda.tsx</code></td>
<td>âœ… MODIFICADO</td>
<td>Contenido dinÃ¡mico por modo</td>
</tr>
<tr>
<td><code>MenuDrawer.tsx</code></td>
<td>âœ… MODIFICADO</td>
<td>Toggle + avatar dinÃ¡mico</td>
</tr>
<tr>
<td><code>BottomNav.tsx</code></td>
<td>âœ… MODIFICADO</td>
<td>Market â†” Business segÃºn modo</td>
</tr>
<tr>
<td><code>Navbar.tsx</code></td>
<td>âœ… MODIFICADO</td>
<td>Toggle + NAV_ITEMS dinÃ¡micos</td>
</tr>
</tbody>
</table>
<h4 id="store-zustand">Store Zustand</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// useAuthStore - Implementado âœ…</span>
<span class="hljs-keyword">interface</span> AuthState {
  tieneModoComercial: <span class="hljs-built_in">boolean</span>;
  modoActivo: <span class="hljs-string">'personal'</span> | <span class="hljs-string">'comercial'</span>;
  negocioId?: <span class="hljs-built_in">string</span>;
  <span class="hljs-comment">// Datos del negocio (modo comercial)</span>
  nombreNegocio?: <span class="hljs-built_in">string</span>;
  correoNegocio?: <span class="hljs-built_in">string</span>;
  logoNegocio?: <span class="hljs-built_in">string</span>;
  fotoPerfilNegocio?: <span class="hljs-built_in">string</span>;
  cambiarModo: <span class="hljs-function">(<span class="hljs-params">modo: 'personal' | 'comercial'</span>) =&gt;</span> <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;
}
</div></code></pre>
<h4 id="ui-del-toggle">UI del Toggle</h4>
<pre class="hljs"><code><div>Ambos modos:  [ğŸ‘¤ Personal âœ“] [ğŸª Comercial]
Solo Personal: [ğŸ‘¤ Personal âœ“] [ğŸ”’ Desbloquear]
</div></code></pre>
<h4 id="protecci%C3%B3n-de-rutas-frontend">ProtecciÃ³n de Rutas Frontend</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// Rutas PÃšBLICAS (sin login requerido)</span>
/dinamicas/rifa/:id/sorteo-publico    <span class="hljs-comment">// Ver sorteo en vivo (rifas offline)</span>
/dinamicas/resultado/:id              <span class="hljs-comment">// Ver resultado de sorteo pÃºblico</span>

<span class="hljs-comment">// Rutas que requieren modo Personal</span>
/marketplace/publicar
/puntos/canjear
/card

<span class="hljs-comment">// Rutas que requieren modo Comercial</span>
/business<span class="hljs-comment">/*
/scan/*

// Rutas que requieren estar logueado (cualquier modo)
/dinamicas/*          // Excepto las pÃºblicas de arriba
/negocios/*
/ofertas/*
/chat/*
/perfil/*
</span></div></code></pre>
<h4 id="%E2%9A%A0%EF%B8%8F-excepci%C3%B3n-importante-rifas-offline-p%C3%BAblicas">âš ï¸ ExcepciÃ³n Importante: Rifas Offline PÃºblicas</h4>
<p><strong>Contexto:</strong> Las rifas offline permiten participantes sin registro en la app.</p>
<p><strong>Rutas pÃºblicas necesarias:</strong></p>
<table>
<thead>
<tr>
<th>Ruta</th>
<th>Acceso</th>
<th>PropÃ³sito</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/dinamicas/rifa/:id/sorteo-publico</code></td>
<td>SIN LOGIN</td>
<td>Ver sorteo en vivo transmitido</td>
</tr>
<tr>
<td><code>/dinamicas/resultado/:id</code></td>
<td>SIN LOGIN</td>
<td>Ver resultado del sorteo</td>
</tr>
<tr>
<td><code>/dinamicas/compartir/:id</code></td>
<td>SIN LOGIN</td>
<td>Vista compartible de la rifa</td>
</tr>
</tbody>
</table>
<p><strong>ImplementaciÃ³n:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// routes.jsx</span>
<span class="hljs-keyword">const</span> publicRoutes = [
  {
    path: <span class="hljs-string">'/dinamicas/rifa/:id/sorteo-publico'</span>,
    element: &lt;SorteoPublicoLive /&gt;,
    auth: <span class="hljs-literal">false</span>  <span class="hljs-comment">// â† No requiere login</span>
  },
  {
    path: <span class="hljs-string">'/dinamicas/resultado/:id'</span>,
    element: &lt;ResultadoPublico /&gt;,
    auth: <span class="hljs-literal">false</span>  <span class="hljs-comment">// â† No requiere login</span>
  }
];

<span class="hljs-keyword">const</span> privateRoutes = [
  {
    path: <span class="hljs-string">'/dinamicas/*'</span>,
    element: &lt;Dinamicas /&gt;,
    auth: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// â† Requiere login para crear/administrar</span>
    guard: &lt;AuthGuard /&gt;
  }
];
</div></code></pre>
<p><strong>Flujo de Acceso:</strong></p>
<pre class="hljs"><code><div>Usuario NO logueado:
â”œâ”€â”€ âœ… Puede ver sorteo en vivo (link compartido)
â”œâ”€â”€ âœ… Puede ver resultado (link compartido)
â””â”€â”€ âŒ NO puede crear rifas ni gestionar

Usuario logueado:
â”œâ”€â”€ âœ… Puede crear rifas
â”œâ”€â”€ âœ… Puede gestionar rifas
â”œâ”€â”€ âœ… Puede compartir links pÃºblicos
â””â”€â”€ âœ… Puede ver sorteos pÃºblicos
</div></code></pre>
<p><strong>Componente de Sorteo PÃºblico:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// SorteoPublicoLive.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SorteoPublicoLive</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> { rifaId } = useParams();
  <span class="hljs-keyword">const</span> { data, loading } = useSorteoPublico(rifaId);
  
  <span class="hljs-comment">// No requiere auth</span>
  <span class="hljs-comment">// Muestra sorteo en tiempo real</span>
  <span class="hljs-comment">// Link: /dinamicas/rifa/abc123/sorteo-publico</span>
  
  <span class="hljs-keyword">return</span> (
    &lt;LayoutPublico&gt; {<span class="hljs-comment">/* Sin navbar de usuario */</span>}
      &lt;SorteoEnVivoPublico rifa={data} /&gt;
      &lt;BannerRegistro /&gt; {<span class="hljs-comment">/* CTA para registrarse */</span>}
    &lt;<span class="hljs-regexp">/LayoutPublico&gt;
  );
}
</span></div></code></pre>
<p><strong>Banner de InvitaciÃ³n:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Â¿Quieres organizar tus propias rifas?                      â”‚
â”‚  [RegÃ­strate gratis] [Conocer mÃ¡s]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h3 id="53-negocios-locales-negocios-%E2%9C%85-completado-02012026">5.3 Negocios Locales (<code>/negocios</code>) âœ… COMPLETADO (02/01/2026)</h3>
<h4 id="implementado">Implementado:</h4>
<ul>
<li><input type="checkbox" id="checkbox1" checked="true"><label for="checkbox1">Vista Mapa con Leaflet</label></li>
<li><input type="checkbox" id="checkbox2" checked="true"><label for="checkbox2">Tarjeta preview en mapa (carrusel, rating, contacto)</label></li>
<li><input type="checkbox" id="checkbox3" checked="true"><label for="checkbox3">Filtros (distancia, categorÃ­a, CardYA, envÃ­o)</label></li>
<li><input type="checkbox" id="checkbox4" checked="true"><label for="checkbox4">Perfil completo (header, mÃ©tricas, horario)</label></li>
<li><input type="checkbox" id="checkbox5" checked="true"><label for="checkbox5">CatÃ¡logo desde BD con bÃºsqueda y paginaciÃ³n</label></li>
<li><input type="checkbox" id="checkbox6" checked="true"><label for="checkbox6">GalerÃ­a con paginaciÃ³n</label></li>
<li><input type="checkbox" id="checkbox7" checked="true"><label for="checkbox7">ReseÃ±as desde BD</label></li>
<li><input type="checkbox" id="checkbox8" checked="true"><label for="checkbox8">Mapa en sidebar del perfil</label></li>
<li><input type="checkbox" id="checkbox9" checked="true"><label for="checkbox9">Redes sociales dinÃ¡micas</label></li>
<li><input type="checkbox" id="checkbox10" checked="true"><label for="checkbox10">MÃ©todos de pago</label></li>
<li><input type="checkbox" id="checkbox11" checked="true"><label for="checkbox11">WhatsApp + ChatYA botones</label></li>
<li><input type="checkbox" id="checkbox12" checked="true"><label for="checkbox12">3 resoluciones (mÃ³vil, laptop, desktop)</label></li>
</ul>
<h4 id="pendientes-bloqueados">Pendientes (Bloqueados):</h4>
<table>
<thead>
<tr>
<th>Pendiente</th>
<th>Bloqueador</th>
</tr>
</thead>
<tbody>
<tr>
<td>Conectar ChatYA con Negocios</td>
<td>Requiere 5.10 ChatYA</td>
</tr>
<tr>
<td>Validar compra para reseÃ±a</td>
<td>Requiere 6.1 ScanYA</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Elemento</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>FunciÃ³n</strong></td>
<td>Directorio de negocios geolocalizados</td>
</tr>
<tr>
<td><strong>QuiÃ©n publica</strong></td>
<td>Usuarios con modo comercial (via Onboarding)</td>
</tr>
<tr>
<td><strong>GeolocalizaciÃ³n</strong></td>
<td>âœ… PostGIS - ST_DWithin</td>
</tr>
</tbody>
</table>
<p><strong>Componentes Frontend:</strong></p>
<pre class="hljs"><code><div>pages/private/negocios/
â”œâ”€â”€ index.ts
â”œâ”€â”€ PaginaNegocios.tsx            # Lista + Mapa
â””â”€â”€ PaginaPerfilNegocio.tsx       # Perfil del negocio

components/negocios/
â”œâ”€â”€ index.ts
â”œâ”€â”€ ModalDetalleItem.tsx          # Modal producto/servicio
â”œâ”€â”€ ModalHorarios.tsx             # Modal horarios completos
â”œâ”€â”€ PanelFiltros.tsx              # Filtros laterales
â””â”€â”€ SeccionCatalogo.tsx           # CatÃ¡logo del negocio

hooks/
â”œâ”€â”€ useListaNegocios.ts
â”œâ”€â”€ usePerfilNegocio.ts
â”œâ”€â”€ useHorariosNegocio.ts
â””â”€â”€ useVotos.ts

stores/
â””â”€â”€ useFiltrosNegociosStore.ts

services/
â””â”€â”€ negociosService.ts
</div></code></pre>
<p><strong>Backend:</strong></p>
<pre class="hljs"><code><div>controllers/
â”œâ”€â”€ negocios.controller.ts
â”œâ”€â”€ resenas.controller.ts
â”œâ”€â”€ votos.controller.ts
â””â”€â”€ metricas.controller.ts

services/
â”œâ”€â”€ negocios.service.ts
â”œâ”€â”€ resenas.service.ts
â”œâ”€â”€ votos.service.ts
â””â”€â”€ metricas.service.ts

routes/
â”œâ”€â”€ negocios.routes.ts
â”œâ”€â”€ resenas.routes.ts
â”œâ”€â”€ votos.routes.ts
â””â”€â”€ metricas.routes.ts
</div></code></pre>
<p><strong>Funcionalidades:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox13" checked="true"><label for="checkbox13">Lista de negocios cercanos (suscrito a useGpsStore)</label></li>
<li><input type="checkbox" id="checkbox14" checked="true"><label for="checkbox14">Filtros por categorÃ­a/subcategorÃ­a</label></li>
<li><input type="checkbox" id="checkbox15" checked="true"><label for="checkbox15">BÃºsqueda por nombre</label></li>
<li><input type="checkbox" id="checkbox16" checked="true"><label for="checkbox16">Vista mapa con marcadores</label></li>
<li><input type="checkbox" id="checkbox17" checked="true"><label for="checkbox17">Perfil de negocio (galerÃ­a, horarios, catÃ¡logo)</label></li>
<li><input type="checkbox" id="checkbox18"><label for="checkbox18">BotÃ³n &quot;Contactar&quot; â†’ ChatYA </label><em>(bloqueado por 5.8)</em></li>
<li><input type="checkbox" id="checkbox19"><label for="checkbox19">ReseÃ±as validadas por compra </label><em>(bloqueado por 6.1 ScanYA)</em></li>
</ul>
<p><strong>RestricciÃ³n de ReseÃ±as:</strong></p>
<pre class="hljs"><code><div>Para dejar reseÃ±a/calificaciÃ³n:
â”œâ”€â”€ Usuario debe tener pedido completado con el negocio
â”œâ”€â”€ Backend valida historial de pedidos
â””â”€â”€ Si no hay pedidos â†’ BotÃ³n &quot;Calificar&quot; deshabilitado

ValidaciÃ³n:
SELECT COUNT(*) FROM pedidos 
WHERE usuario_id = ? 
  AND negocio_id = ? 
  AND estado = 'completado'
</div></code></pre>
<hr>
<h3 id="531-sistema-universal-de-compartir-%E2%9C%85-parcial-02012026">5.3.1 Sistema Universal de Compartir âœ… PARCIAL (02/01/2026)</h3>
<blockquote>
<p>Se implementÃ³ la base del sistema. Rutas adicionales se agregan conforme se completan las fases correspondientes.</p>
</blockquote>
<p><strong>TODAS las publicaciones pueden compartirse fuera de la app y verse SIN REGISTRO</strong></p>
<h4 id="rutas-p%C3%BAblicas-para-todo-el-contenido">Rutas PÃºblicas para Todo el Contenido</h4>
<table>
<thead>
<tr>
<th>Tipo de Contenido</th>
<th>Ruta PÃºblica</th>
<th>Estado</th>
<th>Fase</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Negocio</strong></td>
<td><code>/p/negocio/:id</code></td>
<td>âœ… Implementado</td>
<td>5.3</td>
</tr>
<tr>
<td><strong>ArtÃ­culo</strong></td>
<td><code>/p/articulo/:id</code></td>
<td>âœ… Implementado</td>
<td>5.3</td>
</tr>
<tr>
<td><strong>Oferta</strong></td>
<td><code>/p/oferta/:id</code></td>
<td>âœ… Implementado</td>
<td>5.3</td>
</tr>
<tr>
<td><strong>CupÃ³n</strong></td>
<td><code>/p/cupon/:codigo</code></td>
<td>â³ Pendiente</td>
<td>5.11</td>
</tr>
<tr>
<td><strong>Marketplace</strong></td>
<td><code>/p/marketplace/:id</code></td>
<td>â³ Pendiente</td>
<td>5.9</td>
</tr>
<tr>
<td><strong>Empleo</strong></td>
<td><code>/p/empleo/:id</code></td>
<td>â³ Pendiente</td>
<td>5.11</td>
</tr>
<tr>
<td><strong>Rifa</strong></td>
<td><code>/p/rifa/:id</code></td>
<td>â³ Pendiente</td>
<td>5.10</td>
</tr>
</tbody>
</table>
<p><strong>Cada vista pÃºblica incluye:</strong></p>
<ul>
<li>âœ… Contenido completo visible</li>
<li>âœ… ImÃ¡genes y galerÃ­a</li>
<li>âœ… InformaciÃ³n del publicador</li>
<li>âœ… BotÃ³n de registro/descarga de app</li>
<li>âœ… Metadatos Open Graph (preview en redes sociales)</li>
</ul>
<h4 id="archivos-creados-%E2%9C%85">Archivos Creados âœ…</h4>
<p><strong>Frontend:</strong></p>
<pre class="hljs"><code><div>components/compartir/
â”œâ”€â”€ index.ts
â”œâ”€â”€ BannerRegistro.tsx        # CTA para usuarios no logueados
â””â”€â”€ DropdownCompartir.tsx     # MenÃº WhatsApp, Facebook, Twitter, Copiar

components/layout/
â””â”€â”€ LayoutPublico.tsx         # Layout sin navbar para vistas pÃºblicas

hooks/
â””â”€â”€ useOpenGraph.ts           # Meta tags dinÃ¡micos

pages/public/
â”œâ”€â”€ PaginaNegocioPublico.tsx
â”œâ”€â”€ PaginaArticuloPublico.tsx
â””â”€â”€ PaginaOfertaPublico.tsx
</div></code></pre>
<p><strong>Backend:</strong></p>
<pre class="hljs"><code><div>GET /api/negocios/publico/:id     âœ…
GET /api/articulos/publico/:id    âœ…
GET /api/ofertas/publico/:id      âœ…
</div></code></pre>
<h4 id="componente-%22compartir%22-universal">Componente &quot;Compartir&quot; Universal</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// En TODAS las pantallas de detalle</span>
&lt;DropdownCompartir
  url={<span class="hljs-string">`/p/negocio/<span class="hljs-subst">${id}</span>`</span>}
  titulo=<span class="hljs-string">"PizzerÃ­a Roma"</span>
/&gt;

<span class="hljs-comment">// Dropdown al hacer click</span>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¤ Compartir              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ’¬ WhatsApp]             â”‚
â”‚  [ğŸ“˜ Facebook]             â”‚
â”‚  [ğŸ¦ Twitter]              â”‚
â”‚  [ğŸ“‹ Copiar enlace]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h4 id="ejemplo-vista-p%C3%BAblica-de-negocio">Ejemplo: Vista PÃºblica de Negocio</h4>
<pre class="hljs"><code><div>URL: https://anunciaya.com/p/negocio/abc123

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸª PizzerÃ­a Roma                                           â”‚
â”‚  â­ 4.8 (234 reseÃ±as) â€¢ ğŸ“ CDMX                             â”‚
â”‚  [GalerÃ­a de imÃ¡genes]                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ INFORMACIÃ“N                                             â”‚
â”‚  ğŸ• Horario: Lun-Dom 1pm - 11pm                            â”‚
â”‚  ğŸ“ TelÃ©fono: 55-1234-5678                                 â”‚
â”‚  ğŸŒ Web: www.pizzeriaroma.com                              â”‚
â”‚  ğŸ“ DirecciÃ³n: Av. Principal 123                           â”‚
â”‚  [Ver en mapa]                                             â”‚
â”‚                                                             â”‚
â”‚  ğŸ• MENÃš (6 productos)                                      â”‚
â”‚  â€¢ Margarita $120                                          â”‚
â”‚  â€¢ Pepperoni $140                                          â”‚
â”‚  [Ver menÃº completo]                                       â”‚
â”‚                                                             â”‚
â”‚  âš¡ OFERTAS ACTIVAS (2)                                     â”‚
â”‚  â€¢ 2x1 Martes                                              â”‚
â”‚  â€¢ 20% Happy Hour                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¬ Â¿Quieres acumular puntos y usar cupones?               â”‚
â”‚  [ğŸ“± Descargar AnunciaYA] [Registrarse gratis]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h4 id="ejemplo-vista-p%C3%BAblica-de-oferta">Ejemplo: Vista PÃºblica de Oferta</h4>
<pre class="hljs"><code><div>URL: https://anunciaya.com/p/oferta/xyz789

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš¡ 2x1 en Hamburguesas                                     â”‚
â”‚  ğŸ“ Burger House                                            â”‚
â”‚  [Imagen de la oferta]                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“… VIGENCIA                                                â”‚
â”‚  â€¢ VÃ¡lido: Todos los martes                                â”‚
â”‚  â€¢ Horario: 1pm - 11pm                                     â”‚
â”‚                                                             â”‚
â”‚  ğŸ“‹ CONDICIONES                                             â”‚
â”‚  â€¢ Solo hamburguesas sencillas                             â”‚
â”‚  â€¢ No aplica con otras promociones                         â”‚
â”‚  â€¢ Dine-in y para llevar                                   â”‚
â”‚                                                             â”‚
â”‚  ğŸª UBICACIÃ“N                                               â”‚
â”‚  Burger House                                              â”‚
â”‚  Av. Reforma 456, CDMX                                     â”‚
â”‚  [CÃ³mo llegar]                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ Registrate para guardar esta oferta                    â”‚
â”‚  [ğŸ“± Descargar app] [âœ‰ï¸ Registrarse]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h4 id="metadatos-open-graph-preview-en-redes">Metadatos Open Graph (Preview en Redes)</h4>
<pre class="hljs"><code><div><span class="hljs-comment">&lt;!-- Negocio --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"og:title"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"PizzerÃ­a Roma | AnunciaYA"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"og:description"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"â­ 4.8 - La mejor pizza de la ciudad"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"og:image"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"https://cdn.anunciaya.com/negocios/abc/portada.jpg"</span> /&gt;</span>

<span class="hljs-comment">&lt;!-- Oferta --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"og:title"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"2x1 en Hamburguesas - Burger House"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"og:description"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"Todos los martes 1pm-11pm"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"og:image"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"https://cdn.anunciaya.com/ofertas/xyz/imagen.jpg"</span> /&gt;</span>

<span class="hljs-comment">&lt;!-- Marketplace --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"og:title"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"iPhone 12 Pro - $8,000"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"og:description"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"128GB, excelente estado"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"og:image"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"https://cdn.anunciaya.com/marketplace/qwe/foto1.jpg"</span> /&gt;</span>
</div></code></pre>
<h4 id="backend---endpoints-p%C3%BAblicos">Backend - Endpoints PÃºblicos</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// GET /api/public/:tipo/:id</span>
<span class="hljs-comment">// NO requiere autenticaciÃ³n</span>
app.get(<span class="hljs-string">'/api/public/:tipo/:id'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">const</span> { tipo, id } = req.params;
  
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> getContenidoPublico(tipo, id);
  
  <span class="hljs-comment">// Verificar que estÃ© publicado</span>
  <span class="hljs-keyword">if</span> (!data || !data.publicado) {
    <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">404</span>).json({ error: <span class="hljs-string">'Contenido no encontrado'</span> });
  }
  
  <span class="hljs-comment">// Incrementar contador de vistas</span>
  <span class="hljs-keyword">await</span> incrementarVistas(tipo, id, req.headers[<span class="hljs-string">'referer'</span>]);
  
  res.json(data);
});
</div></code></pre>
<h4 id="analytics-para-comerciantes-pendiente---m%C3%B3dulo-reportes-bs">Analytics para Comerciantes <em>(Pendiente - MÃ³dulo Reportes BS)</em></h4>
<pre class="hljs"><code><div>ğŸ“Š ESTADÃSTICAS DE COMPARTIDOS

Tu negocio:
- 234 vistas desde links compartidos
- 45 clicks en &quot;Ver ubicaciÃ³n&quot;
- 18 clicks en &quot;Descargar app&quot;
- 12 registros atribuidos a tu link

Origen de visitas:
- WhatsApp: 65%
- Facebook: 25%
- Directo: 10%

[Ver detalles] [Compartir de nuevo]
</div></code></pre>
<h4 id="funcionalidades-del-sistema">Funcionalidades del Sistema</h4>
<ul>
<li><input type="checkbox" id="checkbox20" checked="true"><label for="checkbox20">BotÃ³n &quot;Compartir&quot; visible</label></li>
<li><input type="checkbox" id="checkbox21" checked="true"><label for="checkbox21">Generar link pÃºblico</label></li>
<li><input type="checkbox" id="checkbox22" checked="true"><label for="checkbox22">Vista pÃºblica sin login</label></li>
<li><input type="checkbox" id="checkbox23" checked="true"><label for="checkbox23">Banner de registro</label></li>
<li><input type="checkbox" id="checkbox24" checked="true"><label for="checkbox24">Metadatos Open Graph</label></li>
<li><input type="checkbox" id="checkbox25"><label for="checkbox25">Tracking de vistas </label><em>(pendiente)</em></li>
<li><input type="checkbox" id="checkbox26"><label for="checkbox26">Deep linking a la app </label><em>(pendiente)</em></li>
<li><input type="checkbox" id="checkbox27"><label for="checkbox27">Analytics para comerciantes </label><em>(pendiente - mÃ³dulo Reportes BS)</em></li>
</ul>
<p><strong>Restricciones:</strong></p>
<ul>
<li>âœ… Ver contenido: SIN LOGIN</li>
<li>âŒ Contactar/Aplicar/Canjear: CON LOGIN</li>
<li>âœ… Descargar app desde vista pÃºblica</li>
</ul>
<hr>
<h3 id="54-business-studio---panel-de-control-%E2%8F%B3-en-progreso-15">5.4 Business Studio - Panel de Control â³ EN PROGRESO (15%)</h3>
<blockquote>
<p>Centro de administraciÃ³n completo para negocios. GestiÃ³n de perfil, catÃ¡logos, clientes, ventas, cupones, ofertas, empleos, rifas, y anÃ¡lisis de negocio.</p>
</blockquote>
<p><strong>Acceso:</strong> <code>/business-studio/*</code> (Requiere modo Comercial)</p>
<p><strong>Progreso:</strong> 4 de 15 mÃ³dulos completados</p>
<hr>
<h4 id="%F0%9F%93%8B-resumen-de-m%C3%B3dulos-business-studio">ğŸ“‹ Resumen de MÃ³dulos Business Studio</h4>
<table>
<thead>
<tr>
<th>#</th>
<th>MÃ³dulo</th>
<th>Estado</th>
<th>Fase</th>
<th>Depende de</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Dashboard</td>
<td>âœ… Completado</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>2</td>
<td>Transacciones</td>
<td>â³ Pendiente</td>
<td>5.7</td>
<td>5.5 ScanYA</td>
</tr>
<tr>
<td>3</td>
<td>Clientes</td>
<td>â³ Pendiente</td>
<td>5.7</td>
<td>5.5 ScanYA</td>
</tr>
<tr>
<td>4</td>
<td>Opiniones</td>
<td>â³ Pendiente</td>
<td>5.8</td>
<td>5.5 ScanYA + 5.7</td>
</tr>
<tr>
<td>5</td>
<td>Alertas</td>
<td>â³ Pendiente</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>6</td>
<td>CatÃ¡logo</td>
<td>âœ… 100% Completado</td>
<td>5.4.1</td>
<td>07/01/2026</td>
</tr>
<tr>
<td>7</td>
<td>Ofertas</td>
<td>â³ 90% Casi listo</td>
<td>5.4.2</td>
<td>16/01/2026</td>
</tr>
<tr>
<td>8</td>
<td>Cupones</td>
<td>â³ Pendiente</td>
<td>5.11</td>
<td>5.5 ScanYA</td>
</tr>
<tr>
<td>9</td>
<td>Puntos</td>
<td>â³ Pendiente</td>
<td>5.9</td>
<td>5.6 CardYA</td>
</tr>
<tr>
<td>10</td>
<td>Rifas</td>
<td>â³ Pendiente</td>
<td>6.2</td>
<td>6.2 DinÃ¡micas</td>
</tr>
<tr>
<td>11</td>
<td>Empleados</td>
<td>â³ Pendiente</td>
<td>6.4</td>
<td>5.5 ScanYA</td>
</tr>
<tr>
<td>12</td>
<td>Vacantes</td>
<td>â³ Pendiente</td>
<td>6.3</td>
<td>6.3 Empleos</td>
</tr>
<tr>
<td>13</td>
<td>Reportes</td>
<td>â³ Pendiente</td>
<td>6.6</td>
<td>5.5 ScanYA</td>
</tr>
<tr>
<td>14</td>
<td>Sucursales</td>
<td>â³ Pendiente</td>
<td>6.5</td>
<td>-</td>
</tr>
<tr>
<td>15</td>
<td>Mi Perfil</td>
<td>âœ… 100% Completado</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="%F0%9F%8F%97%EF%B8%8F-arquitectura-implementada-01-06-enero-2026">ğŸ—ï¸ Arquitectura Implementada (01-06 Enero 2026)</h4>
<p><strong>DecisiÃ³n ArquitectÃ³nica - Negocios Solo FÃ­sicos (06/01/2026):</strong></p>
<ul>
<li>âŒ Eliminado tipo &quot;Online&quot; - Todos los negocios requieren ubicaciÃ³n fÃ­sica</li>
<li>âœ… Columna <code>requiere_direccion</code> eliminada de BD</li>
<li>âœ… Agregado <code>tiene_servicio_domicilio</code> en <code>negocio_sucursales</code></li>
<li>âœ… Agregado <code>tiene_envio_domicilio</code> en <code>negocio_sucursales</code></li>
<li>ğŸ“„ DocumentaciÃ³n: <code>EliminaciÃ³n_de_Negocios_Online.md</code></li>
</ul>
<p><strong>Sistema de Sucursales:</strong></p>
<ul>
<li>Arquitectura donde usuario ve &quot;negocio&quot; pero internamente opera sobre SUCURSALES</li>
<li>Middleware <code>verificarNegocio</code> corregido para dueÃ±os Y gerentes</li>
<li>Middleware <code>validarAccesoSucursal</code> para validar acceso por sucursal</li>
<li>Interceptor Axios agrega <code>?sucursalId=</code> automÃ¡tico en modo comercial</li>
<li>Filtros SQL manuales en backend con <code>WHERE sucursal_id = ?</code></li>
</ul>
<p><strong>Service Centralizado:</strong></p>
<ul>
<li><code>negocioManagement.service.ts</code> con 15 funciones CRUD reutilizables</li>
<li>Onboarding y Business Studio comparten las mismas funciones</li>
<li>Controllers solo llaman a services, nunca duplican lÃ³gica</li>
</ul>
<h4 id="%F0%9F%93%81-archivos-creados-%E2%9C%85">ğŸ“ Archivos Creados âœ…</h4>
<p><strong>Frontend - Layout y NavegaciÃ³n:</strong></p>
<pre class="hljs"><code><div>components/layout/
â”œâ”€â”€ DrawerBusinessStudio.tsx      # Drawer mÃ³vil con menÃº BS
â”œâ”€â”€ MenuBusinessStudio.tsx        # MenÃº lateral desktop
â””â”€â”€ PanelPreviewNegocio.tsx       # Preview del negocio con tabs

router/
â””â”€â”€ index.tsx                     # 15 rutas de BS configuradas
</div></code></pre>
<p><strong>Frontend - Dashboard:</strong></p>
<pre class="hljs"><code><div>pages/private/business-studio/dashboard/
â”œâ”€â”€ PaginaDashboard.tsx
â””â”€â”€ componentes/
    â”œâ”€â”€ index.ts
    â”œâ”€â”€ HeaderDashboard.tsx
    â”œâ”€â”€ KPIPrincipal.tsx
    â”œâ”€â”€ KPISecundario.tsx
    â”œâ”€â”€ GraficaVentas.tsx
    â”œâ”€â”€ PanelActividad.tsx
    â”œâ”€â”€ PanelAlertas.tsx
    â”œâ”€â”€ PanelCampanas.tsx
    â”œâ”€â”€ PanelOpiniones.tsx
    â”œâ”€â”€ FooterAcciones.tsx
    â””â”€â”€ SelectorSucursalesInline.tsx

stores/
â””â”€â”€ useDashboardStore.ts

services/
â””â”€â”€ dashboardService.ts
</div></code></pre>
<p><strong>Frontend - Mi Perfil:</strong></p>
<pre class="hljs"><code><div>pages/private/business-studio/perfil/
â”œâ”€â”€ PaginaPerfil.tsx
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ usePerfil.ts
â””â”€â”€ components/
    â”œâ”€â”€ index.ts
    â”œâ”€â”€ TabInformacion.tsx
    â”œâ”€â”€ TabUbicacion.tsx
    â”œâ”€â”€ TabContacto.tsx
    â”œâ”€â”€ TabHorarios.tsx
    â”œâ”€â”€ TabOperacion.tsx        # MÃ©todos pago + Servicios entrega
    â”œâ”€â”€ TabImagenes.tsx
    â”œâ”€â”€ SelectorCategoria.tsx
    â””â”€â”€ CardYA.tsx
</div></code></pre>
<p><strong>Backend:</strong></p>
<pre class="hljs"><code><div>controllers/
â””â”€â”€ dashboard.controller.ts

services/
â”œâ”€â”€ dashboard.service.ts
â””â”€â”€ negocioManagement.service.ts   # 15 funciones CRUD centralizadas

routes/
â””â”€â”€ dashboard.routes.ts

middleware/
â””â”€â”€ sucursal.middleware.ts         # validarAccesoSucursal
</div></code></pre>
<p><strong>Endpoints Dashboard:</strong></p>
<pre class="hljs"><code><div>GET /api/dashboard/kpis
GET /api/dashboard/grafica-ventas
GET /api/dashboard/actividad-reciente
GET /api/dashboard/alertas
GET /api/dashboard/campanas
GET /api/dashboard/opiniones
GET /api/dashboard/resumen
</div></code></pre>
<hr>
<h2 id="%F0%9F%93%8A-m%C3%B3dulos-de-business-studio">ğŸ“Š MÃ³dulos de Business Studio</h2>
<h3 id="1-dashboard-business-studio---vista-general-%E2%9C%85-completado">1. Dashboard (<code>/business-studio</code>) - Vista General âœ… COMPLETADO</h3>
<p><strong>Vista Implementada:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š DASHBOARD - MÃ©tricas y actividad reciente              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ·ï¸] [ğŸ«] [ğŸ“¦]  Hoy [7 dÃ­as] 30 dÃ­as 90 dÃ­as 12 meses [ğŸ”„]â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ’° $0        â”‚ ğŸ‘¥ 0         â”‚ ğŸ’³ 0                     â”‚
â”‚  â”‚ Ventas       â”‚ Clientes     â”‚ Transacciones            â”‚â”‚
â”‚  â”‚ Totales      â”‚ 0 nuevos     â”‚ Ticket prom: $0          â”‚â”‚
â”‚  â”‚ â€” 0%         â”‚ 0 recurrentesâ”‚ â€” 0%                     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚ğŸ« 0â”‚ğŸ·ï¸ 3â”‚ğŸ‘¥ 2â”‚â¤ï¸ 2â”‚â­ 0â”‚ğŸ‘ï¸ 8â”‚                        â”‚
â”‚  â”‚Cup.â”‚Ofr.â”‚Flw.â”‚Lks.â”‚Rtg.â”‚Vistâ”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                            â”‚
â”‚  ğŸ“ˆ Ventas del Periodo          â”‚  ğŸ« Cupones y Ofertas   â”‚
â”‚  EvoluciÃ³n diaria               â”‚  3 activas               â”‚
â”‚  Promedio/dÃ­a: $0  Mejor: -     â”‚                          â”‚
â”‚  [GrÃ¡fica vacÃ­a]                â”‚  â€¢ En todas tus compras  â”‚
â”‚                                 â”‚    ğŸ‘ï¸ 0 ğŸ›’ 0 ğŸ“¤ 0  â° 2d  â”‚
â”‚                                 â”‚  â€¢ REVISAR...            â”‚
â”‚                                 â”‚    ğŸ‘ï¸ 0 ğŸ›’ 0 ğŸ“¤ 0  â° 23d â”‚
â”‚                                 â”‚  â€¢ DESAYUNOS             â”‚
â”‚                                 â”‚    ğŸ‘ï¸ 0 ğŸ›’ 0 ğŸ“¤ 0  â° 50d â”‚
â”‚                                 â”‚                          â”‚
â”‚                                 â”‚  [Ver Cupones][Ver Ofrt.]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’¬ Interacciones â”‚ ğŸ’­ Opiniones                â”‚ ğŸ”” Alertasâ”‚
â”‚ Actividad        â”‚ ReseÃ±as recientes           â”‚ Al dÃ­a    â”‚
â”‚                  â”‚                             â”‚           â”‚
â”‚ Juan Manuel      â”‚ Sin reseÃ±as recientes       â”‚ âœ… Todo   â”‚
â”‚ ComenzÃ³ a        â”‚                             â”‚    bien   â”‚
â”‚ seguirte (2h)    â”‚                             â”‚           â”‚
â”‚                  â”‚                             â”‚ Sin alert.â”‚
â”‚ Juan Manuel      â”‚                             â”‚ pendientesâ”‚
â”‚ Le gustÃ³ (2h)    â”‚                             â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>KPIs Implementados:</strong></p>
<p><strong>Principales (3 cards grandes):</strong></p>
<ul>
<li><input type="checkbox" id="checkbox28" checked="true"><label for="checkbox28">ğŸ’° Ventas Totales - Monto total del perÃ­odo</label></li>
<li><input type="checkbox" id="checkbox29" checked="true"><label for="checkbox29">ğŸ‘¥ Clientes - Total, nuevos y recurrentes</label></li>
<li><input type="checkbox" id="checkbox30" checked="true"><label for="checkbox30">ğŸ’³ Transacciones - Total y ticket promedio</label></li>
</ul>
<p><strong>Secundarios (6 cards pequeÃ±os):</strong></p>
<ul>
<li><input type="checkbox" id="checkbox31" checked="true"><label for="checkbox31">ğŸ« Cupones Canjeados</label></li>
<li><input type="checkbox" id="checkbox32" checked="true"><label for="checkbox32">ğŸ·ï¸ Ofertas Activas</label></li>
<li><input type="checkbox" id="checkbox33" checked="true"><label for="checkbox33">ğŸ‘¥ Followers (seguidores)</label></li>
<li><input type="checkbox" id="checkbox34" checked="true"><label for="checkbox34">â¤ï¸ Likes del negocio</label></li>
<li><input type="checkbox" id="checkbox35" checked="true"><label for="checkbox35">â­ Rating Perfil - Promedio y total reseÃ±as</label></li>
<li><input type="checkbox" id="checkbox36" checked="true"><label for="checkbox36">ğŸ‘ï¸ Vistas del Perfil</label></li>
</ul>
<p><strong>Paneles Implementados:</strong></p>
<p><strong>1. Ventas del Periodo:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox37" checked="true"><label for="checkbox37">EvoluciÃ³n diaria con grÃ¡fica de lÃ­neas</label></li>
<li><input type="checkbox" id="checkbox38" checked="true"><label for="checkbox38">Promedio por dÃ­a</label></li>
<li><input type="checkbox" id="checkbox39" checked="true"><label for="checkbox39">Mejor dÃ­a de ventas</label></li>
<li><input type="checkbox" id="checkbox40" checked="true"><label for="checkbox40">Estado vacÃ­o: &quot;No hay datos de ventas para este perÃ­odo&quot;</label></li>
</ul>
<p><strong>2. Cupones y Ofertas:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox41" checked="true"><label for="checkbox41">Lista de cupones/ofertas activos (3 visibles)</label></li>
<li><input type="checkbox" id="checkbox42" checked="true"><label for="checkbox42">MÃ©tricas por item: vistas, usos, compartidos, tiempo restante</label></li>
<li><input type="checkbox" id="checkbox43" checked="true"><label for="checkbox43">Botones: [Ver Cupones] [Ver Ofertas]</label></li>
</ul>
<p><strong>3. Interacciones:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox44" checked="true"><label for="checkbox44">Actividad de clientes (follows, likes)</label></li>
<li><input type="checkbox" id="checkbox45" checked="true"><label for="checkbox45">Timestamp relativo (2h, 1d)</label></li>
<li><input type="checkbox" id="checkbox46" checked="true"><label for="checkbox46">Avatar del cliente</label></li>
</ul>
<p><strong>4. Opiniones:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox47" checked="true"><label for="checkbox47">Ãšltimas reseÃ±as recibidas</label></li>
<li><input type="checkbox" id="checkbox48" checked="true"><label for="checkbox48">Estado vacÃ­o: &quot;Sin reseÃ±as recientes&quot;</label></li>
</ul>
<p><strong>5. Alertas:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox49" checked="true"><label for="checkbox49">Estado actual: &quot;Todo bien&quot; o pendientes</label></li>
<li><input type="checkbox" id="checkbox50" checked="true"><label for="checkbox50">Lista de alertas con prioridad</label></li>
<li><input type="checkbox" id="checkbox51" checked="true"><label for="checkbox51">Estado vacÃ­o: &quot;Sin alertas pendientes&quot;</label></li>
</ul>
<p><strong>Selectores Superiores:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox52" checked="true"><label for="checkbox52">3 botones de acciÃ³n rÃ¡pida (ğŸ·ï¸ ğŸ« ğŸ“¦)</label></li>
<li><input type="checkbox" id="checkbox53" checked="true"><label for="checkbox53">Selector de perÃ­odo: Hoy, 7 dÃ­as, 30 dÃ­as, 90 dÃ­as, 12 meses</label></li>
<li><input type="checkbox" id="checkbox54" checked="true"><label for="checkbox54">BotÃ³n refresh para actualizar datos</label></li>
</ul>
<p><strong>Componentes Implementados:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox55" checked="true"><label for="checkbox55">HeaderDashboard - TÃ­tulo + descripciÃ³n</label></li>
<li><input type="checkbox" id="checkbox56" checked="true"><label for="checkbox56">SelectorPeriodo - Botones de tiempo</label></li>
<li><input type="checkbox" id="checkbox57" checked="true"><label for="checkbox57">KPIPrincipal - 3 cards grandes (Ventas, Clientes, Transacciones)</label></li>
<li><input type="checkbox" id="checkbox58" checked="true"><label for="checkbox58">KPISecundario - 6 cards pequeÃ±os (mÃ©tricas adicionales)</label></li>
<li><input type="checkbox" id="checkbox59" checked="true"><label for="checkbox59">GraficaVentas - Panel con grÃ¡fica de lÃ­neas</label></li>
<li><input type="checkbox" id="checkbox60" checked="true"><label for="checkbox60">PanelCuponesOfertas - Lista de promociones activas</label></li>
<li><input type="checkbox" id="checkbox61" checked="true"><label for="checkbox61">PanelInteracciones - Actividad de clientes</label></li>
<li><input type="checkbox" id="checkbox62" checked="true"><label for="checkbox62">PanelOpiniones - Ãšltimas reseÃ±as</label></li>
<li><input type="checkbox" id="checkbox63" checked="true"><label for="checkbox63">PanelAlertas - Estado de alertas</label></li>
</ul>
<hr>
<h3 id="2-transacciones-business-studiotransacciones-%E2%8F%B3-pendiente-requiere-61-scanya">2. Transacciones (<code>/business-studio/transacciones</code>) â³ PENDIENTE (Requiere 6.1 ScanYA)</h3>
<p><strong>Historial Completo de Ventas:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’° TRANSACCIONES                                           â”‚
â”‚  [Hoy] [Semana] [Mes] [Rango personalizado]               â”‚
â”‚  Total del perÃ­odo: $45,280  â€¢  89 transacciones           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ #0089  â€¢  22 Dic 2024 - 2:45 PM      $325.00       â”‚  â”‚
â”‚  â”‚ Cliente: Juan PÃ©rez ğŸ¥ˆ  â€¢  +32 puntos otorgados    â”‚  â”‚
â”‚  â”‚ Productos: 2 hamburguesas, 1 refresco               â”‚  â”‚
â”‚  â”‚ MÃ©todo: Efectivo  â€¢  [Ver detalle]                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Funcionalidades:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox64"><label for="checkbox64">Ver todas las transacciones</label></li>
<li><input type="checkbox" id="checkbox65"><label for="checkbox65">Filtrar por fecha</label></li>
<li><input type="checkbox" id="checkbox66"><label for="checkbox66">Filtrar por mÃ©todo de pago</label></li>
<li><input type="checkbox" id="checkbox67"><label for="checkbox67">Filtrar por sucursal</label></li>
<li><input type="checkbox" id="checkbox68"><label for="checkbox68">Ver detalle de transacciÃ³n</label></li>
<li><input type="checkbox" id="checkbox69"><label for="checkbox69">Exportar reporte (CSV/PDF)</label></li>
<li><input type="checkbox" id="checkbox70"><label for="checkbox70">EstadÃ­sticas de ventas</label></li>
<li><input type="checkbox" id="checkbox71"><label for="checkbox71">Ticket promedio</label></li>
<li><input type="checkbox" id="checkbox72"><label for="checkbox72">Productos mÃ¡s vendidos</label></li>
</ul>
<hr>
<h3 id="3-clientes-business-studioclientes-%E2%8F%B3-pendiente-requiere-61-scanya">3. Clientes (<code>/business-studio/clientes</code>) â³ PENDIENTE (Requiere 6.1 ScanYA)</h3>
<p><strong>GestiÃ³n de Base de Clientes:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¥ BASE DE CLIENTES                                        â”‚
â”‚  Total: 234 clientes  â€¢  Nuevos este mes: 18               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” Buscar...  [Filtros: Todos | Bronce | Plata | Oro]    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ¥‡ MarÃ­a GonzÃ¡lez                    Nivel: ORO     â”‚  â”‚
â”‚  â”‚ 1,250 puntos  â€¢  15 visitas  â€¢  â­ Cliente desde    â”‚  â”‚
â”‚  â”‚ Ãšltima compra: hace 3 dÃ­as           Feb 2024       â”‚  â”‚
â”‚  â”‚ [Ver Perfil] [Historial] [ğŸ’¬ Chat]                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>InformaciÃ³n por Cliente:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox73"><label for="checkbox73">Nombre y foto</label></li>
<li><input type="checkbox" id="checkbox74"><label for="checkbox74">Nivel CardYA (Bronce/Plata/Oro)</label></li>
<li><input type="checkbox" id="checkbox75"><label for="checkbox75">Puntos acumulados EN TU NEGOCIO</label></li>
<li><input type="checkbox" id="checkbox76"><label for="checkbox76">Total de visitas</label></li>
<li><input type="checkbox" id="checkbox77"><label for="checkbox77">Ãšltima compra</label></li>
<li><input type="checkbox" id="checkbox78"><label for="checkbox78">Cliente desde (fecha)</label></li>
<li><input type="checkbox" id="checkbox79"><label for="checkbox79">Historial de compras</label></li>
<li><input type="checkbox" id="checkbox80"><label for="checkbox80">Cupones canjeados</label></li>
<li><input type="checkbox" id="checkbox81"><label for="checkbox81">BotÃ³n para chatear</label></li>
</ul>
<p><strong>Filtros:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox82"><label for="checkbox82">Por nivel CardYA</label></li>
<li><input type="checkbox" id="checkbox83"><label for="checkbox83">Por puntos</label></li>
<li><input type="checkbox" id="checkbox84"><label for="checkbox84">Por frecuencia de visita</label></li>
<li><input type="checkbox" id="checkbox85"><label for="checkbox85">Por fecha de registro</label></li>
<li><input type="checkbox" id="checkbox86"><label for="checkbox86">Clientes inactivos (&gt;30 dÃ­as sin comprar)</label></li>
</ul>
<hr>
<h3 id="4-opiniones-business-studioopiniones---gesti%C3%B3n-de-rese%C3%B1as-%E2%8F%B3-pendiente">4. Opiniones (<code>/business-studio/opiniones</code>) - GestiÃ³n de ReseÃ±as â³ PENDIENTE</h3>
<blockquote>
<p>Permite ver y responder reseÃ±as de clientes, mejorando la reputaciÃ³n y engagement del negocio.</p>
</blockquote>
<p><strong>Acceso:</strong></p>
<ul>
<li>Business Studio (web) - DueÃ±os y gerentes</li>
<li>ScanYA (PWA) - Empleados autorizados</li>
</ul>
<p><strong>Requiere:</strong> Fase 5.5 ScanYA (validaciÃ³n de compras)</p>
<p><strong>Vista Propuesta:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ OPINIONES - ReseÃ±as y Calificaciones                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â­ 4.3 promedio  â€¢  24 reseÃ±as  â€¢  87% tasa de respuesta  â”‚
â”‚                                                             â”‚
â”‚  [ğŸ“Š EstadÃ­sticas] [ğŸ“ Responder pendientes (3)]           â”‚
â”‚                                                             â”‚
â”‚  Filtros: [Todas â–¼] [CalificaciÃ³n â–¼] [Sucursal â–¼]         â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ‘¤ MarÃ­a LÃ³pez        â­â­â­â­â­  Hace 2 dÃ­as          â”‚ â”‚
â”‚  â”‚ &quot;Excelente servicio, muy rÃ¡pida la atenciÃ³n...&quot;       â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ ğŸ’¬ Tu respuesta:                                      â”‚ â”‚
â”‚  â”‚ &quot;Â¡Gracias MarÃ­a! Nos alegra que hayas disfrutado...&quot; â”‚ â”‚
â”‚  â”‚ Respondida por: Juan (Empleado) â€¢ Hace 1 dÃ­a         â”‚ â”‚
â”‚  â”‚ [âœï¸ Editar] [ğŸ—‘ï¸ Eliminar]                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ‘¤ Juan PÃ©rez         â­â­â­â˜†â˜†  Hace 5 dÃ­as          â”‚ â”‚
â”‚  â”‚ &quot;Buen producto pero tardÃ³ mucho la entrega&quot;          â”‚ â”‚
â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚ [ğŸ’¬ Responder] [ğŸ“‹ Usar plantilla] [ğŸš« Reportar]      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  [1] [2] [3] ... [8]  Mostrando 1-10 de 24 reseÃ±as       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Funcionalidades Principales:</strong></p>
<p><strong>1. Dashboard de Opiniones:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox87" checked="true"><label for="checkbox87">Promedio de calificaciÃ³n general (â­ 1-5)</label></li>
<li><input type="checkbox" id="checkbox88" checked="true"><label for="checkbox88">Total de reseÃ±as recibidas</label></li>
<li><input type="checkbox" id="checkbox89" checked="true"><label for="checkbox89">Tasa de respuesta (% respondidas)</label></li>
<li><input type="checkbox" id="checkbox90" checked="true"><label for="checkbox90">DistribuciÃ³n de calificaciones (grÃ¡fico de barras)</label></li>
<li><input type="checkbox" id="checkbox91" checked="true"><label for="checkbox91">Tiempo promedio de respuesta</label></li>
<li><input type="checkbox" id="checkbox92" checked="true"><label for="checkbox92">Comparativa entre sucursales</label></li>
</ul>
<p><strong>2. GestiÃ³n de ReseÃ±as:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox93" checked="true"><label for="checkbox93">Lista completa de reseÃ±as con paginaciÃ³n</label></li>
<li><input type="checkbox" id="checkbox94" checked="true"><label for="checkbox94">Filtros por:</label>
<ul>
<li>CalificaciÃ³n (1-5 estrellas)</li>
<li>Estado (todas, sin responder, respondidas)</li>
<li>Sucursal (multi-branch)</li>
<li>Fecha (mÃ¡s recientes, mÃ¡s antiguas)</li>
</ul>
</li>
<li><input type="checkbox" id="checkbox95" checked="true"><label for="checkbox95">BÃºsqueda por nombre de cliente</label></li>
<li><input type="checkbox" id="checkbox96" checked="true"><label for="checkbox96">Ordenar por: fecha, calificaciÃ³n, sin responder primero</label></li>
</ul>
<p><strong>3. Responder ReseÃ±as:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox97" checked="true"><label for="checkbox97">Campo de texto para escribir respuesta</label></li>
<li><input type="checkbox" id="checkbox98" checked="true"><label for="checkbox98">Templates pre-escritos sugeridos:</label>
<ul>
<li>Agradecimiento positivo</li>
<li>Disculpa profesional</li>
<li>Solicitud de contacto</li>
<li>InvitaciÃ³n a regresar</li>
</ul>
</li>
<li><input type="checkbox" id="checkbox99" checked="true"><label for="checkbox99">Preview antes de publicar</label></li>
<li><input type="checkbox" id="checkbox100" checked="true"><label for="checkbox100">Editar respuestas existentes</label></li>
<li><input type="checkbox" id="checkbox101" checked="true"><label for="checkbox101">Eliminar respuestas propias</label></li>
<li><input type="checkbox" id="checkbox102" checked="true"><label for="checkbox102">Contador de caracteres (mÃ¡x 500)</label></li>
<li><input type="checkbox" id="checkbox103" checked="true"><label for="checkbox103"></label><strong>AtribuciÃ³n de respuesta:</strong> Sistema registra quiÃ©n respondiÃ³ (dueÃ±o/gerente/empleado)</li>
</ul>
<p><strong>4. Acceso desde ScanYA (PWA):</strong></p>
<p><strong>Vista MÃ³vil Simplificada:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¬ ReseÃ±as Pendientes            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”” 3 sin responder               â”‚
â”‚                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ â­â­â­â­â­                    â”‚â”‚
â”‚ â”‚ MarÃ­a LÃ³pez â€¢ Hace 2 dÃ­as    â”‚â”‚
â”‚ â”‚ &quot;Excelente servicio...&quot;      â”‚â”‚
â”‚ â”‚ [Responder] [Template]       â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ â­â­â­â˜†â˜†                     â”‚â”‚
â”‚ â”‚ Juan PÃ©rez â€¢ Hace 5 dÃ­as     â”‚â”‚
â”‚ â”‚ &quot;Buen producto pero...&quot;      â”‚â”‚
â”‚ â”‚ [Responder] [Template]       â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Funcionalidades en ScanYA:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox104" checked="true"><label for="checkbox104">Ver reseÃ±as sin responder (solo sucursal asignada)</label></li>
<li><input type="checkbox" id="checkbox105" checked="true"><label for="checkbox105">Responder con templates rÃ¡pidos</label></li>
<li><input type="checkbox" id="checkbox106" checked="true"><label for="checkbox106">NotificaciÃ³n push de nuevas reseÃ±as</label></li>
<li><input type="checkbox" id="checkbox107" checked="true"><label for="checkbox107">Badge con contador en menÃº ScanYA</label></li>
<li><input type="checkbox" id="checkbox108" checked="true"><label for="checkbox108">Interface optimizada para mÃ³vil</label></li>
<li><input type="checkbox" id="checkbox109" checked="true"><label for="checkbox109">Permisos por empleado (configurables desde BS)</label></li>
</ul>
<p><strong>Sistema de Permisos:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// Tabla empleados</span>
<span class="hljs-keyword">interface</span> Empleado {
  id: <span class="hljs-built_in">string</span>;
  negocio_id: <span class="hljs-built_in">string</span>;
  sucursal_id: <span class="hljs-built_in">string</span>;
  
  <span class="hljs-comment">// Permisos</span>
  puede_responder_resenas: <span class="hljs-built_in">boolean</span>;  <span class="hljs-comment">// â† Nuevo permiso</span>
  puede_editar_respuestas: <span class="hljs-built_in">boolean</span>;  <span class="hljs-comment">// â† Solo sus propias respuestas</span>
  puede_ver_todas_resenas: <span class="hljs-built_in">boolean</span>;  <span class="hljs-comment">// â† O solo de su sucursal</span>
}
</div></code></pre>
<p><strong>Flujo de Respuesta desde ScanYA:</strong></p>
<pre class="hljs"><code><div>Empleado abre ScanYA
         â†“
Ve badge &quot;3 reseÃ±as pendientes&quot;
         â†“
Entra a mÃ³dulo Opiniones
         â†“
Ve solo reseÃ±as de su sucursal
         â†“
Selecciona reseÃ±a sin responder
         â†“
Escoge template o escribe respuesta
         â†“
Publica respuesta
         â†“
Sistema registra: &quot;Respondida por Juan (Empleado)&quot;
         â†“
Cliente recibe notificaciÃ³n
         â†“
Respuesta aparece en perfil pÃºblico del negocio
</div></code></pre>
<p><strong>5. ValidaciÃ³n de Clientes:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox110" checked="true"><label for="checkbox110">Solo clientes con compras pueden reseÃ±ar</label></li>
<li><input type="checkbox" id="checkbox111" checked="true"><label for="checkbox111">VerificaciÃ³n automÃ¡tica en backend:</label></li>
</ul>
<pre class="hljs"><code><div>  <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(*) <span class="hljs-keyword">FROM</span> transacciones 
  <span class="hljs-keyword">WHERE</span> usuario_id = ? 
    <span class="hljs-keyword">AND</span> negocio_id = ?
    <span class="hljs-keyword">AND</span> sucursal_id = ?
</div></code></pre>
<ul>
<li><input type="checkbox" id="checkbox112" checked="true"><label for="checkbox112">Badge &quot;Compra verificada&quot; en reseÃ±as vÃ¡lidas</label></li>
<li><input type="checkbox" id="checkbox113" checked="true"><label for="checkbox113">LÃ­mite: 1 reseÃ±a cada 30 dÃ­as por cliente</label></li>
</ul>
<p><strong>6. ModeraciÃ³n:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox114" checked="true"><label for="checkbox114">Reportar reseÃ±as inapropiadas</label></li>
<li><input type="checkbox" id="checkbox115" checked="true"><label for="checkbox115">Motivos: spam, lenguaje ofensivo, falsa, duplicada</label></li>
<li><input type="checkbox" id="checkbox116" checked="true"><label for="checkbox116">EnvÃ­o a revisiÃ³n de admin</label></li>
<li><input type="checkbox" id="checkbox117" checked="true"><label for="checkbox117">OpciÃ³n de responder antes de reportar</label></li>
<li><input type="checkbox" id="checkbox118" checked="true"><label for="checkbox118">Solo dueÃ±o/gerente puede reportar (no empleados)</label></li>
</ul>
<p><strong>7. EstadÃ­sticas Detalladas:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š DistribuciÃ³n de Calificaciones          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â­â­â­â­â­  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  15 (63%)  â”‚
â”‚ â­â­â­â­â˜†  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  6 (25%)            â”‚
â”‚ â­â­â­â˜†â˜†  â–ˆâ–ˆâ–ˆ  2 (8%)                     â”‚
â”‚ â­â­â˜†â˜†â˜†  â–ˆ  1 (4%)                       â”‚
â”‚ â­â˜†â˜†â˜†â˜†  0 (0%)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MÃ©tricas clave:
- Promedio general: 4.3/5.0
- Total de reseÃ±as: 24
- Respondidas: 21 (87%)
- Sin responder: 3
- Tiempo promedio respuesta: 4.2 horas
- Ãšltima reseÃ±a: Hace 2 dÃ­as

Respuestas por:
- DueÃ±o: 15 (71%)
- Gerente: 4 (19%)
- Empleados: 2 (10%)
</div></code></pre>
<p><strong>Componentes Frontend:</strong></p>
<p><strong>Business Studio (Web):</strong></p>
<pre class="hljs"><code><div>pages/private/business-studio/opiniones/
â”œâ”€â”€ PaginaOpiniones.tsx
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useOpiniones.ts           (Sistema 3 capas)
â”‚   â””â”€â”€ useMetricasOpiniones.ts   (EstadÃ­sticas)
â””â”€â”€ components/
    â”œâ”€â”€ HeaderOpiniones.tsx       (TÃ­tulo + promedio)
    â”œâ”€â”€ EstadisticasOpiniones.tsx (Dashboard mÃ©tricas)
    â”œâ”€â”€ FiltrosOpiniones.tsx      (Filtros y bÃºsqueda)
    â”œâ”€â”€ ListaOpiniones.tsx        (Grid de reseÃ±as)
    â”œâ”€â”€ CardOpinion.tsx           (Card individual)
    â”œâ”€â”€ ModalResponder.tsx        (Modal para responder)
    â”œâ”€â”€ ModalEditarRespuesta.tsx  (Editar respuesta)
    â”œâ”€â”€ TemplatesRespuesta.tsx    (Sugerencias)
    â”œâ”€â”€ EstrellaCalificacion.tsx  (â˜…â˜…â˜…â˜…â˜…)
    â”œâ”€â”€ DistribucionCalificaciones.tsx (GrÃ¡fico barras)
    â”œâ”€â”€ BadgeEstado.tsx           (Respondida/Sin responder)
    â””â”€â”€ BotonReportar.tsx         (Reportar reseÃ±a)
</div></code></pre>
<p><strong>ScanYA (PWA):</strong></p>
<pre class="hljs"><code><div>apps/scan-ya/pages/opiniones/
â”œâ”€â”€ PaginaOpinionesScan.tsx       (Vista mÃ³vil simplificada)
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useOpinionesScan.ts       (Solo sucursal asignada)
â””â”€â”€ components/
    â”œâ”€â”€ ListaResenasMovil.tsx     (Lista optimizada)
    â”œâ”€â”€ CardResenaMovil.tsx       (Card compacta)
    â”œâ”€â”€ ModalResponderRapido.tsx  (Modal mÃ³vil)
    â””â”€â”€ TemplatesRapidos.tsx      (Templates comunes)
</div></code></pre>
<p><strong>Backend Endpoints:</strong></p>
<pre class="hljs"><code><div>GET    /api/resenas              # Listar reseÃ±as del negocio (con filtros)
GET    /api/resenas/:id          # Ver detalle de una reseÃ±a
POST   /api/resenas/:id/responder # Responder a una reseÃ±a
PUT    /api/resenas/:id/respuesta # Editar respuesta existente
DELETE /api/resenas/:id/respuesta # Eliminar respuesta
GET    /api/resenas/metricas     # EstadÃ­sticas de reseÃ±as
PATCH  /api/resenas/:id/leida    # Marcar como leÃ­da
POST   /api/resenas/:id/reportar # Reportar reseÃ±a inapropiada

# EspecÃ­ficos para ScanYA
GET    /api/resenas/sucursal/:id/pendientes  # Solo sin responder de una sucursal
POST   /api/resenas/empleado/:id/responder   # Responder como empleado
</div></code></pre>
<p><strong>Service Functions:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// resenas.service.ts</span>
obtenerResenasNegocio(negocioId, sucursalId?, filtros?)
obtenerResenaSucursal(sucursalId, soloSinResponder?)
obtenerResenaPorId(resenaId)
responderResena(resenaId, respuesta, usuarioId, tipoUsuario)
responderComoEmpleado(resenaId, respuesta, empleadoId)
editarRespuesta(resenaId, nuevaRespuesta, usuarioId)
eliminarRespuesta(resenaId, usuarioId)
obtenerMetricasResenas(negocioId, sucursalId?)
marcarComoLeida(resenaId)
reportarResena(resenaId, motivo)
verificarComprasUsuario(usuarioId, negocioId, sucursalId)
verificarPermisoEmpleado(empleadoId, permiso)
</div></code></pre>
<p><strong>Tabla de Respuestas:</strong></p>
<pre class="hljs"><code><div><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> negocio_resenas <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> respondida_por_tipo <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>);
<span class="hljs-comment">-- Valores: 'dueÃ±o', 'gerente', 'empleado'</span>

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> negocio_resenas <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> respondida_por_nombre <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">100</span>);
<span class="hljs-comment">-- Nombre del empleado que respondiÃ³</span>

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> negocio_resenas <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> respondida_desde <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>);
<span class="hljs-comment">-- Valores: 'business_studio', 'scan_ya', 'app_movil'</span>
</div></code></pre>
<p><strong>Templates de Respuesta Sugeridos:</strong></p>
<p><strong>Positiva (â­â­â­â­â­):</strong></p>
<ul>
<li>&quot;Â¡Gracias [nombre]! Nos alegra que hayas disfrutado tu experiencia. Â¡Te esperamos pronto!&quot;</li>
<li>&quot;Apreciamos mucho tu comentario. Es un placer atenderte.&quot;</li>
</ul>
<p><strong>Neutral (â­â­â­â˜†â˜†):</strong></p>
<ul>
<li>&quot;Gracias por tu feedback [nombre]. Trabajaremos para mejorar en...&quot;</li>
<li>&quot;Tomamos nota de tus comentarios para seguir mejorando.&quot;</li>
</ul>
<p><strong>Negativa (â­â­â˜†â˜†â˜†):</strong></p>
<ul>
<li>&quot;Lamentamos que tu experiencia no haya sido la esperada. Nos gustarÃ­a conversar contigo para resolver esto. Por favor contÃ¡ctanos al [telÃ©fono].&quot;</li>
<li>&quot;Sentimos mucho lo ocurrido. Hemos tomado medidas para que no vuelva a suceder.&quot;</li>
</ul>
<p><strong>UX Considerations:</strong></p>
<ol>
<li>
<p><strong>Respuesta RÃ¡pida:</strong></p>
<ul>
<li>BotÃ³n &quot;Responder&quot; visible desde la lista</li>
<li>Modal simple con textarea grande</li>
<li>Guardado con Ctrl+Enter (web) o botÃ³n &quot;Enviar&quot; (mÃ³vil)</li>
</ul>
</li>
<li>
<p><strong>Notificaciones:</strong></p>
<ul>
<li>Badge en menÃº BS/ScanYA con reseÃ±as sin responder</li>
<li>Push notification cuando llega reseÃ±a nueva</li>
<li>Email al propietario (configurable)</li>
<li>NotificaciÃ³n a empleados en su turno</li>
</ul>
</li>
<li>
<p><strong>Orden de Prioridad:</strong></p>
<ul>
<li>Mostrar sin responder primero</li>
<li>Luego mÃ¡s recientes</li>
<li>Resaltar reseÃ±as negativas (â­â­â˜†â˜†â˜†)</li>
</ul>
</li>
<li>
<p><strong>GuÃ­a de Tono:</strong></p>
<ul>
<li>Tooltip con mejores prÃ¡cticas</li>
<li>Agradecer siempre</li>
<li>Ser profesional pero amigable</li>
<li>No ser defensivo con crÃ­ticas</li>
<li>Ofrecer soluciones</li>
</ul>
</li>
<li>
<p><strong>Responsive:</strong></p>
<ul>
<li>MÃ³vil (ScanYA): Cards full-width, UI simplificada</li>
<li>Laptop (BS): 2 columnas</li>
<li>Desktop (BS): 3 columnas + sidebar stats</li>
</ul>
</li>
<li>
<p><strong>Permisos Granulares:</strong></p>
<ul>
<li>DueÃ±o: Puede TODO (responder, editar cualquier respuesta, reportar, configurar permisos)</li>
<li>Gerente: Responder, editar sus respuestas, reportar</li>
<li>Empleado: Responder (si tiene permiso), solo editar sus respuestas</li>
</ul>
</li>
</ol>
<p><strong>Dependencias TÃ©cnicas:</strong></p>
<p><strong>Requiere OBLIGATORIAMENTE:</strong></p>
<ul>
<li>âœ… Tabla <code>transacciones</code> (Fase 5.5 ScanYA)</li>
<li>âœ… ValidaciÃ³n de compras del cliente</li>
<li>âœ… Sistema de notificaciones push</li>
<li>âœ… ScanYA PWA funcional con mÃ³dulo de Opiniones</li>
<li>âœ… Sistema de permisos por empleado</li>
</ul>
<p><strong>Flujo Completo:</strong></p>
<pre class="hljs"><code><div>Cliente compra en negocio (ScanYA)
         â†“
Sistema registra transacciÃ³n
         â†“
Cliente puede dejar reseÃ±a (24h despuÃ©s)
         â†“
ReseÃ±a aparece en BS del negocio + ScanYA
         â†“
NotificaciÃ³n a dueÃ±o/gerente/empleados autorizados
         â†“
Propietario responde desde BS (web)
  O
Empleado responde desde ScanYA (mÃ³vil)
         â†“
Sistema registra quiÃ©n respondiÃ³ y desde dÃ³nde
         â†“
Cliente recibe notificaciÃ³n de respuesta
         â†“
ReseÃ±a + respuesta visible en perfil pÃºblico
</div></code></pre>
<p><strong>Restricciones:</strong></p>
<ul>
<li>âŒ Sin compras = No puede reseÃ±ar</li>
<li>âŒ Solo 1 reseÃ±a cada 30 dÃ­as por cliente</li>
<li>âœ… Negocio puede responder ilimitado</li>
<li>âœ… DueÃ±o/Gerente puede responder desde BS o ScanYA</li>
<li>âœ… Empleado solo puede responder desde ScanYA (si tiene permiso)</li>
<li>âœ… Cada usuario solo puede editar sus propias respuestas</li>
<li>âœ… Cliente puede editar su reseÃ±a (7 dÃ­as)</li>
<li>âŒ Negocio NO puede eliminar reseÃ±as (solo reportar)</li>
<li>âœ… Solo dueÃ±o/gerente pueden reportar reseÃ±as</li>
</ul>
<p><strong>ConfiguraciÃ³n de Permisos:</strong></p>
<p>Desde Business Studio â†’ Empleados â†’ Editar empleado:</p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Permisos: Juan PÃ©rez               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ï¸ Registrar ventas                â”‚
â”‚ â˜‘ï¸ Canjear cupones                 â”‚
â”‚ â˜‘ï¸ Ver clientes                    â”‚
â”‚ â˜‘ï¸ Responder opiniones              â”‚
â”‚ â˜ Editar respuestas de otros      â”‚
â”‚ â˜ Reportar reseÃ±as                â”‚
â”‚ â˜ Ver estadÃ­sticas completas      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h3 id="5-alertas-business-studioalertas-%E2%8F%B3-pendiente">5. Alertas (<code>/business-studio/alertas</code>) â³ PENDIENTE</h3>
<p><strong>Centro de Notificaciones:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”” ALERTAS Y NOTIFICACIONES                                â”‚
â”‚  [Todas] [No leÃ­das (4)] [Importantes]                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš ï¸ 3 cupones vencen maÃ±ana                                 â”‚
â”‚     EnvÃ­a recordatorio a los clientes                       â”‚
â”‚     hace 1 hora  â€¢  [Ver cupones] [Marcar como leÃ­da]     â”‚
â”‚                                                             â”‚
â”‚  ğŸ‘¤ Nueva aplicaciÃ³n a &quot;Mesero/a&quot;                           â”‚
â”‚     Juan PÃ©rez aplicÃ³ a tu vacante                         â”‚
â”‚     hace 2 horas  â€¢  [Ver aplicaciÃ³n]                      â”‚
â”‚                                                             â”‚
â”‚  ğŸ‚ Cliente VIP cumple aÃ±os en 2 dÃ­as                       â”‚
â”‚     MarÃ­a GonzÃ¡lez - Cliente Oro                           â”‚
â”‚     hace 3 horas  â€¢  [Enviar cupÃ³n especial]              â”‚
â”‚                                                             â”‚
â”‚  ğŸ’¬ Nuevo mensaje de cliente                                â”‚
â”‚     Tienes 2 mensajes sin leer en ChatYA                   â”‚
â”‚     hace 5 horas  â€¢  [Ver mensajes]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Tipos de Alertas:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox119"><label for="checkbox119">Cupones por vencer</label></li>
<li><input type="checkbox" id="checkbox120"><label for="checkbox120">Nuevas aplicaciones a empleos</label></li>
<li><input type="checkbox" id="checkbox121"><label for="checkbox121">CumpleaÃ±os de clientes</label></li>
<li><input type="checkbox" id="checkbox122"><label for="checkbox122">Nueva reseÃ±a</label></li>
<li><input type="checkbox" id="checkbox123"><label for="checkbox123">Cliente inactivo (&gt;30 dÃ­as)</label></li>
<li><input type="checkbox" id="checkbox124"><label for="checkbox124">Rifas prÃ³ximas a cerrar</label></li>
<li><input type="checkbox" id="checkbox125"><label for="checkbox125">Nuevos mensajes (ChatYA)</label></li>
</ul>
<hr>
<h3 id="6-cat%C3%A1logo-business-studiocatalogo-%E2%9C%85-completado">6. CatÃ¡logo (<code>/business-studio/catalogo</code>) âœ… COMPLETADO</h3>
<p><strong>GestiÃ³n de Productos y Servicios:</strong></p>
<p><strong>Vista Principal:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” Buscar por nombre...                    [+ Nuevo ArtÃ­culo]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ“‹ Todas] [Bebidas] [Cena] [Tacos]                              â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“¦ Producto                              Bebidas           â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  Orden de 3 Tacos                     $150     â”‚   â”‚
â”‚  â”‚ â”‚ [IMG]  â”‚  ğŸ‘ï¸ 4  ğŸ›’ 0                                     â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚   â”‚
â”‚  â”‚ [â­] [ğŸ‘ï¸] [âœï¸ Editar] [ğŸ—‘ï¸] [ğŸ“‹]                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ‚ï¸ Servicio                              Cena              â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  Corte de Pelo                       $200      â”‚   â”‚
â”‚  â”‚ â”‚ [ICON] â”‚  ğŸ‘ï¸ 1  ğŸ›’ 0                                     â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚   â”‚
â”‚  â”‚ [â˜†] [ğŸ‘ï¸] [âœï¸ Editar] [ğŸ—‘ï¸] [ğŸ“‹]                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Modal de EdiciÃ³n:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Editar ArtÃ­culo                                       [âœ•]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Nombre *                               â”‚
â”‚  â”‚   [IMAGEN]   â”‚   [Orden de 3 Tacos____________]         â”‚
â”‚  â”‚      [âœ•]     â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   DescripciÃ³n (opcional)                 â”‚
â”‚                     [Asada, Adobada, Cabeza...]            â”‚
â”‚                                                             â”‚
â”‚                     CategorÃ­a           Precio *            â”‚
â”‚                     [ğŸ·ï¸ Bebidas â–¼]    [$  150___]          â”‚
â”‚                                                             â”‚
â”‚                     â˜ Mostrar como &quot;Desde $150&quot;            â”‚
â”‚                                                             â”‚
â”‚  [ğŸ‘ï¸ Visible]  [â­ Destacado]                              â”‚
â”‚                                                             â”‚
â”‚  [Cancelar]                            [Guardar]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Funcionalidades Implementadas:</strong></p>
<ul>
<li>âœ… Crear artÃ­culo unificado (Producto/Servicio)</li>
<li>âœ… Editar artÃ­culo</li>
<li>âœ… Eliminar artÃ­culo</li>
<li>âœ… Duplicar artÃ­culo (copiar)</li>
<li>âœ… Subir imagen Ãºnica (optimista a Cloudinary)</li>
<li>âœ… Eliminar imagen con botÃ³n X rojo</li>
<li>âœ… Categorizar por dropdown</li>
<li>âœ… Definir precio</li>
<li>âœ… Toggle visible/oculto (ğŸ‘ï¸ verde)</li>
<li>âœ… Toggle destacado (â­ amarillo)</li>
<li>âœ… Checkbox &quot;Mostrar como 'Desde $X'&quot; para precios variables</li>
<li>âœ… BÃºsqueda por nombre</li>
<li>âœ… Filtros por categorÃ­a (tabs superiores)</li>
<li>âœ… MÃ©tricas por artÃ­culo (ğŸ‘ï¸ vistas, ğŸ›’ carrito/ventas)</li>
<li>âœ… Grid responsivo de tarjetas</li>
<li>âœ… Badge tipo (Producto/Servicio) con Ã­conos distintivos</li>
<li>âœ… UI optimista en todos los cambios</li>
</ul>
<p><strong>Pendiente:</strong></p>
<ul>
<li>â³ Importar/Exportar CSV</li>
<li>â³ GalerÃ­a de imÃ¡genes (actualmente sÃ³lo 1 imagen)</li>
</ul>
<p><strong>Campos por ArtÃ­culo (Unificados):</strong></p>
<ul>
<li>Nombre (requerido)</li>
<li>DescripciÃ³n (opcional)</li>
<li>Precio (requerido)</li>
<li>Imagen Ãºnica (opcional)</li>
<li>CategorÃ­a (requerido, dropdown)</li>
<li>Tipo: Producto o Servicio (badge visual)</li>
<li>Visible (toggle, default: true)</li>
<li>Destacado (toggle, default: false)</li>
<li>Mostrar como &quot;Desde $X&quot; (checkbox, default: false)</li>
</ul>
<p><strong>Notas TÃ©cnicas:</strong></p>
<ul>
<li>La distinciÃ³n Producto/Servicio es visual Ãºnicamente (badge y emoji)</li>
<li>No hay separaciÃ³n de formularios entre productos y servicios</li>
<li>Las mÃ©tricas (vistas/carrito) se actualizan en tiempo real</li>
<li>La bÃºsqueda filtra por nombre en tiempo real</li>
<li>Los filtros de categorÃ­a son tabs que filtran instantÃ¡neamente</li>
<li>Todas las operaciones son optimistas con rollback automÃ¡tico en caso de fallo</li>
</ul>
<hr>
<h3 id="7-ofertas-business-studioofertas-%E2%9C%85-completado">7. Ofertas (<code>/business-studio/ofertas</code>) âœ… COMPLETADO</h3>
<p><strong>GestiÃ³n de Ofertas Permanentes:</strong></p>
<p><strong>Vista Principal:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸ·ï¸ Total: 8] [ğŸ“ˆ Activas: 4] [â›” Inactivas: 2]                      â”‚
â”‚  [ğŸ“… PrÃ³ximas: 0] [â° Vencidas: 2]                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” Buscar por tÃ­tulo...                         [+ Nueva Oferta]     â”‚
â”‚                                                                         â”‚
â”‚  [% Porcentaje] [$ Monto fijo] [ğŸ›ï¸ 2Ã—1] [ğŸ›ï¸ 3Ã—2] [ğŸšš EnvÃ­o gratis]  â”‚
â”‚  [âœ¨ Otro]                                                             â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ â„ï¸ Inactiva                    ğŸ›ï¸ 2Ã—1                        â”‚     â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  Tacos                                            â”‚     â”‚
â”‚  â”‚ â”‚ [ICON] â”‚  ğŸ“… 12 Ene - 18 Ene                               â”‚     â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ğŸ‘ï¸ 0  â™¥ï¸ 0  ğŸ“Š 0                                 â”‚     â”‚
â”‚  â”‚ [ğŸ‘ï¸] [âœï¸ Editar] [ğŸ—‘ï¸] [ğŸ“‹]                                  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ·ï¸ HAPPY HOUR                   âœ… Activa       ğŸ›ï¸ 3Ã—2       â”‚     â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  REVISAR 17 ENERO                                 â”‚     â”‚
â”‚  â”‚ â”‚ [IMG]  â”‚  ğŸ“… 14 Ene - 16 Ene                               â”‚     â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ğŸ‘ï¸ 0  â™¥ï¸ 0  ğŸ“Š 0                                 â”‚     â”‚
â”‚  â”‚ [ğŸ‘ï¸] [âœï¸ Editar] [ğŸ—‘ï¸] [ğŸ“‹]                                  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ âœ… Activa                      25% DESCUENTO                  â”‚     â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  REVISAR SI CAMBIO A VENCIDA                      â”‚     â”‚
â”‚  â”‚ â”‚ [IMG]  â”‚  ğŸ“… 14 Ene - 7 Feb                                â”‚     â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ğŸ‘ï¸ 0  â™¥ï¸ 0  ğŸ“Š 0                                 â”‚     â”‚
â”‚  â”‚ [ğŸ‘ï¸] [âœï¸ Editar] [ğŸ—‘ï¸] [ğŸ“‹]                                  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ âœ… Activa                      $ $100                          â”‚     â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  DESAYUNOS                                        â”‚     â”‚
â”‚  â”‚ â”‚ [ICON] â”‚  ğŸ“… 10 Ene - 6 Mar                                â”‚     â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ğŸ‘ï¸ 0  â™¥ï¸ 0  ğŸ“Š 0                                 â”‚     â”‚
â”‚  â”‚ [ğŸ‘ï¸] [âœï¸ Editar] [ğŸ—‘ï¸] [ğŸ“‹]                                  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Modal Nueva Oferta:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Nueva Oferta                          ğŸ‘ï¸ Activa [ğŸŸ¢]  [âœ•] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   TÃ­tulo *                               â”‚
â”‚  â”‚              â”‚   [Ej: 50% de descuento en pizzas____]   â”‚
â”‚  â”‚  IMAGEN DE   â”‚                                           â”‚
â”‚  â”‚  LA OFERTA   â”‚   DescripciÃ³n (opcional)                 â”‚
â”‚  â”‚  Click subir â”‚   [TÃ©rminos y condiciones...________]    â”‚
â”‚  â”‚      [+]     â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   Fecha inicio *        Fecha fin *      â”‚
â”‚                     [14/01/2026 ğŸ“…]     [15/01/2026 ğŸ“…]    â”‚
â”‚  Tipo de oferta *                                           â”‚
â”‚  [ğŸ›ï¸ 2Ã—1] [ğŸ›ï¸ 3Ã—2] [ğŸšš EnvÃ­o]                            â”‚
â”‚  [Desc. %] [Monto $] [Otro]                                â”‚
â”‚                                                             â”‚
â”‚  Valor *                                                    â”‚
â”‚  [% 10________________]                                     â”‚
â”‚                                                             â”‚
â”‚  Compra mÃ­nima (opcional)                                   â”‚
â”‚  [$ 0_________________]                                     â”‚
â”‚                                                             â”‚
â”‚  [Cancelar]                            [Crear]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Modal Editar Oferta (con tipo &quot;Otro&quot;):</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Editar Oferta                         ğŸ‘ï¸ Activa [ğŸŸ¢]  [âœ•] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   TÃ­tulo *                               â”‚
â”‚  â”‚   [IMAGEN]   â”‚   [REVISAR SI MANTIENE EN ACTIVA_____]   â”‚
â”‚  â”‚      [âœ•]     â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   DescripciÃ³n (opcional)                 â”‚
â”‚                     [REVISAR SI MANTIENE EN ACTIVA_____]   â”‚
â”‚  Tipo de oferta *                                           â”‚
â”‚  [ğŸ›ï¸ 2Ã—1] [ğŸ›ï¸ 3Ã—2] [ğŸšš EnvÃ­o]                            â”‚
â”‚  [Desc. %] [Monto $] [âœ¨ Otro]                             â”‚
â”‚                                                             â”‚
â”‚  Concepto *                                                 â”‚
â”‚  [Happy Hour_______]                                        â”‚
â”‚                                                             â”‚
â”‚  Fecha inicio *        Fecha fin *                          â”‚
â”‚  [14/01/2026 ğŸ“…]     [15/01/2026 ğŸ“…]                       â”‚
â”‚                                                             â”‚
â”‚  Compra mÃ­nima (opcional)                                   â”‚
â”‚  [$ 0.00______________]                                     â”‚
â”‚                                                             â”‚
â”‚  [Cancelar]                            [Guardar]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Funcionalidades Implementadas:</strong></p>
<ul>
<li>âœ… Dashboard con 5 contadores de estado:
<ul>
<li>Total de ofertas (azul)</li>
<li>Activas (verde)</li>
<li>Inactivas (rojo)</li>
<li>PrÃ³ximas (amarillo)</li>
<li>Vencidas (gris)</li>
</ul>
</li>
<li>âœ… Crear oferta</li>
<li>âœ… Editar oferta</li>
<li>âœ… Eliminar oferta</li>
<li>âœ… Duplicar oferta (copiar)</li>
<li>âœ… Toggle visible/oculto por oferta (ğŸ‘ï¸)</li>
<li>âœ… Toggle activa/inactiva global (esquina superior derecha)</li>
<li>âœ… BÃºsqueda por tÃ­tulo</li>
<li>âœ… Filtros por tipo de oferta (6 tabs):
<ul>
<li>% Porcentaje</li>
<li>$ Monto fijo</li>
<li>ğŸ›ï¸ 2Ã—1</li>
<li>ğŸ›ï¸ 3Ã—2</li>
<li>ğŸšš EnvÃ­o gratis</li>
<li>âœ¨ Otro</li>
</ul>
</li>
<li>âœ… Subir imagen (optimista a Cloudinary)</li>
<li>âœ… Eliminar imagen con botÃ³n X rojo</li>
<li>âœ… MÃ©tricas por oferta (ğŸ‘ï¸ vistas, â™¥ï¸ guardadas, ğŸ“Š conversiones)</li>
<li>âœ… Grid responsivo de tarjetas</li>
<li>âœ… Badges de estado (Activa/Inactiva/Vencida)</li>
<li>âœ… Badges de tipo de oferta en esquina superior derecha</li>
<li>âœ… UI optimista en todos los cambios</li>
</ul>
<p><strong>Tipos de Oferta Soportados:</strong></p>
<ol>
<li><strong>2Ã—1</strong> - Paga 1, lleva 2</li>
<li><strong>3Ã—2</strong> - Paga 2, lleva 3</li>
<li><strong>EnvÃ­o gratis</strong> - Sin costo de envÃ­o</li>
<li><strong>Desc. %</strong> - Descuento porcentual (requiere valor)</li>
<li><strong>Monto $</strong> - Descuento en pesos (requiere valor)</li>
<li><strong>Otro</strong> - Oferta personalizada (requiere concepto)</li>
</ol>
<p><strong>Campos por Oferta:</strong></p>
<ul>
<li>TÃ­tulo (requerido)</li>
<li>DescripciÃ³n (opcional - tÃ©rminos y condiciones)</li>
<li>Imagen (opcional)</li>
<li>Tipo de oferta (requerido - selecciÃ³n Ãºnica)</li>
<li>Valor (requerido solo para Desc. % y Monto $)</li>
<li>Concepto (requerido solo para tipo &quot;Otro&quot;)</li>
<li>Fecha inicio (requerido)</li>
<li>Fecha fin (requerido)</li>
<li>Compra mÃ­nima (opcional, default: $0)</li>
<li>Activa (toggle, default: true)</li>
</ul>
<p><strong>Estados de Oferta:</strong></p>
<ul>
<li><strong>Activa</strong> (verde): Dentro del rango de fechas y toggle activo</li>
<li><strong>Inactiva</strong> (rojo): Toggle desactivado manualmente</li>
<li><strong>PrÃ³xima</strong> (amarillo): Fecha inicio futura</li>
<li><strong>Vencida</strong> (gris): Fecha fin pasada</li>
</ul>
<p><strong>Pendiente:</strong></p>
<ul>
<li>â³ Ver lista de usuarios que guardaron la oferta</li>
<li>â³ Exportar estadÃ­sticas de ofertas</li>
<li>â³ DÃ­as/horarios especÃ­ficos aplicables (actualmente solo rango de fechas)</li>
<li>â³ Aplicar oferta a productos/categorÃ­as especÃ­ficas</li>
<li>â³ LÃ­mite de canjes por usuario</li>
<li>â³ Stock limitado de la oferta</li>
</ul>
<p><strong>Notas TÃ©cnicas:</strong></p>
<ul>
<li>Las ofertas se filtran automÃ¡ticamente por sucursal (interceptor Axios)</li>
<li>El cambio de estado es optimista con rollback en caso de fallo</li>
<li>Las imÃ¡genes son opcionales (se muestra icono por defecto segÃºn tipo)</li>
<li>El sistema calcula automÃ¡ticamente el estado segÃºn fechas y toggle</li>
<li>La bÃºsqueda filtra en tiempo real por tÃ­tulo</li>
<li>Los filtros de tipo son excluyentes (una oferta = un tipo)</li>
<li>Las mÃ©tricas se actualizan cuando usuarios interactÃºan con ofertas pÃºblicas</li>
</ul>
<hr>
<h3 id="8-cupones-business-studiocupones-%E2%8F%B3-pendiente-requiere-56-cupones">8. Cupones (<code>/business-studio/cupones</code>) â³ PENDIENTE (Requiere 5.6 Cupones)</h3>
<p><strong>GestiÃ³n de Cupones:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŸï¸ CUPONES                                                 â”‚
â”‚  [+ Crear CupÃ³n] [Cupones activos] [Cupones expirados]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 30% Descuento - Navidad                             â”‚  â”‚
â”‚  â”‚ VÃ¡lido: 20 Dic - 25 Dic 2024                       â”‚  â”‚
â”‚  â”‚ Enviados: 45  â€¢  Canjeados: 12  â€¢  Tasa: 26.7%    â”‚  â”‚
â”‚  â”‚ [Editar] [Eliminar] [Enviar a mÃ¡s clientes]       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Crear CupÃ³n:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox126"><label for="checkbox126">TÃ­tulo del cupÃ³n</label></li>
<li><input type="checkbox" id="checkbox127"><label for="checkbox127">DescripciÃ³n/condiciones</label></li>
<li><input type="checkbox" id="checkbox128"><label for="checkbox128">Tipo de descuento (% o $)</label></li>
<li><input type="checkbox" id="checkbox129"><label for="checkbox129">Valor del descuento</label></li>
<li><input type="checkbox" id="checkbox130"><label for="checkbox130">Fecha de vencimiento</label></li>
<li><input type="checkbox" id="checkbox131"><label for="checkbox131">LÃ­mite de usos por cliente</label></li>
<li><input type="checkbox" id="checkbox132"><label for="checkbox132">Imagen del cupÃ³n (opcional)</label></li>
<li><input type="checkbox" id="checkbox133"><label for="checkbox133">Enviar a:</label>
<ul>
<li>Todos los clientes</li>
<li>Por nivel (Bronce/Plata/Oro)</li>
<li>Clientes especÃ­ficos</li>
<li>Clientes inactivos</li>
</ul>
</li>
</ul>
<p><strong>Funcionalidades:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox134"><label for="checkbox134">Crear cupÃ³n</label></li>
<li><input type="checkbox" id="checkbox135"><label for="checkbox135">Editar cupÃ³n activo</label></li>
<li><input type="checkbox" id="checkbox136"><label for="checkbox136">Eliminar cupÃ³n</label></li>
<li><input type="checkbox" id="checkbox137"><label for="checkbox137">Ver estadÃ­sticas de canje</label></li>
<li><input type="checkbox" id="checkbox138"><label for="checkbox138">Lista de quien canjeÃ³</label></li>
<li><input type="checkbox" id="checkbox139"><label for="checkbox139">Reenviar cupÃ³n</label></li>
<li><input type="checkbox" id="checkbox140"><label for="checkbox140">Duplicar cupÃ³n</label></li>
</ul>
<hr>
<h3 id="9-puntos-business-studiopuntos-%E2%8F%B3-pendiente-requiere-55-cardya">9. Puntos (<code>/business-studio/puntos</code>) â³ PENDIENTE (Requiere 5.5 CardYA)</h3>
<p><strong>ConfiguraciÃ³n del Sistema de Lealtad:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ CONFIGURACIÃ“N DE PUNTOS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Â¿Participas en el sistema de puntos?                      â”‚
â”‚  âšª SÃ­  âš« No                                               â”‚
â”‚                                                             â”‚
â”‚  ğŸ’µ VALOR DE TUS PUNTOS:                                   â”‚
â”‚  1 punto = $[____] pesos                                   â”‚
â”‚  Ejemplo: Si configuras $10, tus clientes acumulan:       â”‚
â”‚  â€¢ Bronce: 1 punto por cada $10 de compra                 â”‚
â”‚  â€¢ Plata: 1.25 puntos por cada $10 (+25%)                 â”‚
â”‚  â€¢ Oro: 1.5 puntos por cada $10 (+50%)                    â”‚
â”‚                                                             â”‚
â”‚  ğŸ“Š EstadÃ­sticas de Puntos:                                â”‚
â”‚  â€¢ Total puntos otorgados este mes: 4,580                 â”‚
â”‚  â€¢ Promedio por transacciÃ³n: 45 pts                       â”‚
â”‚  â€¢ Valor equivalente: $45,800 en compras                  â”‚
â”‚  â€¢ Top 10 clientes por puntos acumulados                  â”‚
â”‚                                                             â”‚
â”‚  [Guardar configuraciÃ³n]                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>ConfiguraciÃ³n Detallada:</strong></p>
<p><strong>A) Valor del Punto:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Configura cuÃ¡nto vale 1 punto en tu negocio               â”‚
â”‚                                                             â”‚
â”‚  1 punto = $[____] pesos                                   â”‚
â”‚                                                             â”‚
â”‚  Ejemplos comunes:                                         â”‚
â”‚  â€¢ $5 â†’ Cliente acumula 2 puntos por cada $10             â”‚
â”‚  â€¢ $10 â†’ Cliente acumula 1 punto por cada $10 (recomendado)â”‚
â”‚  â€¢ $20 â†’ Cliente acumula 1 punto por cada $20             â”‚
â”‚  â€¢ $100 â†’ Cliente acumula 1 punto por cada $100           â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ Una vez configurado, se aplica a todas las compras     â”‚
â”‚                                                             â”‚
â”‚  [Guardar]                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>B) Simulador de AcumulaciÃ³n:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SIMULADOR - Con tu configuraciÃ³n actual (1 punto = $10)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Si un cliente compra $500:                                â”‚
â”‚                                                             â”‚
â”‚  ğŸ¥‰ Bronce (x1.0):   50 puntos                             â”‚
â”‚  ğŸ¥ˆ Plata (x1.25):   62 puntos (+25%)                      â”‚
â”‚  ğŸ¥‡ Oro (x1.5):      75 puntos (+50%)                      â”‚
â”‚                                                             â”‚
â”‚  Cambiar monto de prueba: $[____]  [Calcular]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Funcionalidades:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox141"><label for="checkbox141">Configurar valor del punto (1 punto = $X pesos)</label></li>
<li><input type="checkbox" id="checkbox142"><label for="checkbox142">Activar/desactivar sistema de puntos</label></li>
<li><input type="checkbox" id="checkbox143"><label for="checkbox143">Ver simulador de acumulaciÃ³n</label></li>
<li><input type="checkbox" id="checkbox144"><label for="checkbox144">Ver estadÃ­sticas de puntos otorgados</label></li>
<li><input type="checkbox" id="checkbox145"><label for="checkbox145">Ver valor equivalente en pesos</label></li>
<li><input type="checkbox" id="checkbox146"><label for="checkbox146">Top clientes por puntos</label></li>
<li><input type="checkbox" id="checkbox147"><label for="checkbox147">Historial de puntos otorgados</label></li>
<li><input type="checkbox" id="checkbox148"><label for="checkbox148">Exportar reporte de puntos</label></li>
</ul>
<p><strong>CÃ¡lculo AutomÃ¡tico:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// Backend - CÃ¡lculo de puntos al registrar venta</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calcularPuntos</span>(<span class="hljs-params">
  montoCompra: <span class="hljs-built_in">number</span>,
  valorPunto: <span class="hljs-built_in">number</span>,  <span class="hljs-comment">// Lo configura el negocio</span>
  nivelCliente: 'bronce' | 'plata' | 'oro'
</span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-comment">// Base: 1 punto por cada $X configurados</span>
  <span class="hljs-keyword">const</span> puntosBase = montoCompra / valorPunto;
  
  <span class="hljs-comment">// Multiplicador segÃºn nivel</span>
  <span class="hljs-keyword">const</span> multiplicador = {
    bronce: <span class="hljs-number">1.0</span>,
    plata: <span class="hljs-number">1.25</span>,
    oro: <span class="hljs-number">1.5</span>
  }[nivelCliente];
  
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(puntosBase * multiplicador);
}

<span class="hljs-comment">// Ejemplo:</span>
<span class="hljs-comment">// Compra: $500</span>
<span class="hljs-comment">// Valor punto: $10 (configurado por negocio)</span>
<span class="hljs-comment">// Cliente: Oro</span>
<span class="hljs-comment">// Resultado: (500 / 10) * 1.5 = 75 puntos</span>
</div></code></pre>
<p><strong>Restricciones:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox149"><label for="checkbox149">Valor mÃ­nimo: $1 peso por punto</label></li>
<li><input type="checkbox" id="checkbox150"><label for="checkbox150">Valor mÃ¡ximo: $1,000 pesos por punto</label></li>
<li><input type="checkbox" id="checkbox151"><label for="checkbox151">Una vez configurado, aplica a todas las transacciones</label></li>
<li><input type="checkbox" id="checkbox152"><label for="checkbox152">Se puede cambiar en cualquier momento</label></li>
<li><input type="checkbox" id="checkbox153"><label for="checkbox153">El cambio NO afecta puntos ya otorgados</label></li>
</ul>
<hr>
<h3 id="10-rifas-business-studiorifas-%E2%8F%B3-pendiente-requiere-510-din%C3%A1micas">10. Rifas (<code>/business-studio/rifas</code>) â³ PENDIENTE (Requiere 5.10 DinÃ¡micas)</h3>
<p><strong>GestiÃ³n de DinÃ¡micas:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ° MIS RIFAS                                               â”‚
â”‚  [+ Nueva Rifa] [Activas] [Finalizadas]                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ Smart TV 55&quot;                 RIFA CON PUNTOS     â”‚  â”‚
â”‚  â”‚ 50 pts/boleto  â€¢  Boletos: 234/500                 â”‚  â”‚
â”‚  â”‚ Cierra: 25 Dic - 6:00 PM                           â”‚  â”‚
â”‚  â”‚ [Ver detalles] [Editar] [Sortear]                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Crear Rifa:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox154"><label for="checkbox154">Tipo (con puntos, con dinero, offline)</label></li>
<li><input type="checkbox" id="checkbox155"><label for="checkbox155">Premio (descripciÃ³n e imagen)</label></li>
<li><input type="checkbox" id="checkbox156"><label for="checkbox156">Costo por boleto</label></li>
<li><input type="checkbox" id="checkbox157"><label for="checkbox157">Total de boletos</label></li>
<li><input type="checkbox" id="checkbox158"><label for="checkbox158">Fecha de cierre</label></li>
<li><input type="checkbox" id="checkbox159"><label for="checkbox159">(Offline) Registro manual de participantes</label></li>
</ul>
<p><strong>Funcionalidades:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox160"><label for="checkbox160">Ver lista de participantes</label></li>
<li><input type="checkbox" id="checkbox161"><label for="checkbox161">Ver boletos vendidos</label></li>
<li><input type="checkbox" id="checkbox162"><label for="checkbox162">Realizar sorteo</label></li>
<li><input type="checkbox" id="checkbox163"><label for="checkbox163">Ver ganador</label></li>
<li><input type="checkbox" id="checkbox164"><label for="checkbox164">Marcar premio como entregado</label></li>
<li><input type="checkbox" id="checkbox165"><label for="checkbox165">Compartir link pÃºblico (offline)</label></li>
<li><input type="checkbox" id="checkbox166"><label for="checkbox166">Historial de rifas</label></li>
</ul>
<hr>
<h3 id="11-empleados-business-studioempleados-%E2%8F%B3-pendiente-requiere-61-scanya">11. Empleados (<code>/business-studio/empleados</code>) â³ PENDIENTE (Requiere 6.1 ScanYA)</h3>
<p><strong>GestiÃ³n de Personal con Acceso a ScanYA:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¨â€ğŸ’¼ EMPLEADOS                                                â”‚
â”‚  [+ Agregar Empleado] [Activos (12)] [Inactivos (3)]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ‘¤ Carlos Ruiz                  Cajero              â”‚  â”‚
â”‚  â”‚ ğŸ·ï¸ Nick: @carlos  â€¢  ğŸ“± 55-1234-5678               â”‚  â”‚
â”‚  â”‚ ğŸª Sucursal: Principal  â€¢  âœ… Cuenta Activa         â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚ ğŸ” ACCESO A SCANYA:                                 â”‚  â”‚
â”‚  â”‚ â€¢ Registrar ventas âœ…                               â”‚  â”‚
â”‚  â”‚ â€¢ Validar cupones âœ…                                â”‚  â”‚
â”‚  â”‚ â€¢ Validar cÃ³digos de canje âŒ                       â”‚  â”‚
â”‚  â”‚ â€¢ Hacer reembolsos âŒ                               â”‚  â”‚
â”‚  â”‚ â€¢ Ver historial de ventas âœ…                        â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚ ğŸ“Š Ãšltima sesiÃ³n: Hoy a las 2:45 PM                â”‚  â”‚
â”‚  â”‚ ğŸ”¢ PIN de acceso: â€¢â€¢â€¢â€¢                              â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚ [Editar] [Cambiar PIN] [Permisos] [Desactivar]    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h4 id="%F0%9F%94%90-sistema-de-acceso-para-empleados">ğŸ” Sistema de Acceso para Empleados</h4>
<p><strong>âš ï¸ IMPORTANTE:</strong> Los empleados SOLO tienen acceso a la app ScanYA, NO al panel completo de Business Studio.</p>
<p><strong>CaracterÃ­sticas:</strong></p>
<ul>
<li>Acceso exclusivo a ScanYA (app mÃ³vil/web)</li>
<li>Login con <strong>nick + PIN</strong> (4-6 dÃ­gitos)</li>
<li>Permisos configurables dentro de ScanYA</li>
<li>Registro de actividad completo</li>
<li>RestricciÃ³n por sucursal (opcional)</li>
</ul>
<h4 id="agregar-empleado---formulario">Agregar Empleado - Formulario</h4>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CREAR CUENTA DE EMPLEADO (ACCESO A SCANYA)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  DATOS PERSONALES:                                          â”‚
â”‚  Nombre completo: [__________________________]              â”‚
â”‚  TelÃ©fono: [__________________________]                     â”‚
â”‚  Puesto/Rol: [__________________________]                   â”‚
â”‚                                                             â”‚
â”‚  ASIGNACIÃ“N:                                                â”‚
â”‚  Sucursal: [â–¼ Principal    ]                               â”‚
â”‚  â˜ Puede trabajar en todas las sucursales                  â”‚
â”‚                                                             â”‚
â”‚  CREDENCIALES DE ACCESO:                                    â”‚
â”‚  Nick de usuario: [______________]                         â”‚
â”‚  â””â”€ Ejemplo: carlos, juan123, ana_m                        â”‚
â”‚  â””â”€ Solo letras, nÃºmeros y guiÃ³n bajo                      â”‚
â”‚  â””â”€ MÃ­nimo 3 caracteres, mÃ¡ximo 20                         â”‚
â”‚                                                             â”‚
â”‚  PIN de acceso (4-6 dÃ­gitos): [______]                     â”‚
â”‚  Confirmar PIN: [______]                                    â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ El empleado usarÃ¡ su NICK y PIN para acceder           â”‚
â”‚     Ãºnicamente a la app ScanYA                             â”‚
â”‚                                                             â”‚
â”‚  [Cancelar]  [Crear cuenta y asignar permisos â†’]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h4 id="permisos-dentro-de-scanya">Permisos Dentro de ScanYA</h4>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PERMISOS EN SCANYA - Carlos Ruiz                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“± OPERACIONES DE VENTA:                                  â”‚
â”‚  â˜‘ï¸ Escanear QR de clientes                                 â”‚
â”‚  â˜‘ï¸ Registrar ventas                                        â”‚
â”‚  â˜‘ï¸ Aplicar multiplicador de puntos (automÃ¡tico)            â”‚
â”‚  â˜‘ï¸ Ver informaciÃ³n del cliente                             â”‚
â”‚                                                             â”‚
â”‚  ğŸŸï¸ CUPONES Y CANJES:                                       â”‚
â”‚  â˜‘ï¸ Validar cupones                                         â”‚
â”‚  â˜ Validar cÃ³digos de canje de puntos                      â”‚
â”‚                                                             â”‚
â”‚  ğŸ’° AJUSTES Y CORRECCIONES:                                 â”‚
â”‚  â˜ Hacer reembolsos                                        â”‚
â”‚  â˜ Cancelar transacciones                                  â”‚
â”‚  â˜ Modificar montos                                        â”‚
â”‚                                                             â”‚
â”‚  ğŸ“Š CONSULTAS:                                              â”‚
â”‚  â˜‘ï¸ Ver su historial de ventas del dÃ­a                      â”‚
â”‚  â˜ Ver historial completo de ventas                        â”‚
â”‚  â˜ Ver estadÃ­sticas del negocio                            â”‚
â”‚                                                             â”‚
â”‚  [Cancelar]  [Guardar permisos]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h4 id="flujo-de-acceso-del-empleado">Flujo de Acceso del Empleado</h4>
<pre class="hljs"><code><div>1. Empleado descarga/abre app ScanYA
   â””â”€â”€ Pantalla de login exclusiva para empleados

2. Ingresa credenciales:
   â””â”€â”€ Nick: carlos
   â””â”€â”€ PIN: 1234

3. Sistema valida:
   â”œâ”€â”€ Nick existe âœ…
   â”œâ”€â”€ PIN correcto âœ…
   â”œâ”€â”€ Cuenta activa âœ…
   â”œâ”€â”€ Es empleado (NO dueÃ±o) âœ…
   â”œâ”€â”€ Permisos asignados âœ…
   â””â”€â”€ Sucursal asignada âœ…

4. Acceso concedido a ScanYA:
   â””â”€â”€ Interfaz limitada segÃºn permisos
   â””â”€â”€ NO tiene acceso a Business Studio
   â””â”€â”€ Solo puede usar funciones permitidas

5. Interfaz de ScanYA para empleado:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  ğŸ“± SCANYA                              â”‚
   â”‚  @carlos - Carlos Ruiz                  â”‚
   â”‚  Sucursal: Principal                    â”‚
   â”‚  [Cerrar sesiÃ³n]                        â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                         â”‚
   â”‚     [Escanear QR del cliente]          â”‚
   â”‚                                         â”‚
   â”‚  Ãšltima venta: $325.00                 â”‚
   â”‚  Juan PÃ©rez - Nivel ORO                â”‚
   â”‚  +48 puntos otorgados                  â”‚
   â”‚                                         â”‚
   â”‚  ğŸ“Š Mi resumen de hoy:                 â”‚
   â”‚  â€¢ Ventas: 12                          â”‚
   â”‚  â€¢ Total: $2,450                       â”‚
   â”‚  â€¢ Puntos otorgados: 245               â”‚
   â”‚                                         â”‚
   â”‚  [Ver mi historial]                    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h4 id="diferencias-due%C3%B1o-vs-empleado-en-scanya">Diferencias: DueÃ±o vs Empleado en ScanYA</h4>
<p><strong>DueÃ±o del Negocio:</strong></p>
<ul>
<li>âœ… Acceso completo a Business Studio</li>
<li>âœ… Acceso completo a ScanYA</li>
<li>âœ… Todos los permisos</li>
<li>âœ… Ver todas las transacciones</li>
<li>âœ… Modificar configuraciones</li>
</ul>
<p><strong>Empleado:</strong></p>
<ul>
<li>âŒ NO tiene acceso a Business Studio</li>
<li>âœ… Solo acceso a ScanYA</li>
<li>âš ï¸ Permisos limitados configurables</li>
<li>âš ï¸ Solo ve sus propias transacciones (opcional)</li>
<li>âŒ NO puede modificar configuraciones</li>
</ul>
<h4 id="registro-de-actividad">Registro de Actividad</h4>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ACTIVIDAD - Carlos Ruiz (Empleado)                        â”‚
â”‚  [Hoy] [Semana] [Mes]                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ• Hoy - 22 Dic 2024                                      â”‚
â”‚                                                             â”‚
â”‚  2:45 PM â€¢ RegistrÃ³ venta de $325.00 (Cliente: Juan PÃ©rez)â”‚
â”‚  2:30 PM â€¢ ValidÃ³ cupÃ³n &quot;30% descuento&quot;                   â”‚
â”‚  1:15 PM â€¢ RegistrÃ³ venta de $150.00 (Cliente: Ana LÃ³pez) â”‚
â”‚  10:00 AM â€¢ IniciÃ³ sesiÃ³n en ScanYA                        â”‚
â”‚                                                             â”‚
â”‚  ğŸ“Š RESUMEN DEL DÃA:                                       â”‚
â”‚  â€¢ Ventas registradas: 12                                  â”‚
â”‚  â€¢ Total en ventas: $2,450                                 â”‚
â”‚  â€¢ Clientes atendidos: 12                                  â”‚
â”‚  â€¢ Puntos otorgados: 245                                   â”‚
â”‚  â€¢ Cupones validados: 3                                    â”‚
â”‚  â€¢ Tiempo de sesiÃ³n: 4h 45m                                â”‚
â”‚                                                             â”‚
â”‚  [Exportar actividad] (solo dueÃ±o)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h4 id="funcionalidades-del-m%C3%B3dulo">Funcionalidades del MÃ³dulo</h4>
<p><strong>Para el Comerciante (dueÃ±o):</strong></p>
<ul>
<li><input type="checkbox" id="checkbox167"><label for="checkbox167">Crear cuenta de empleado (solo acceso a ScanYA)</label></li>
<li><input type="checkbox" id="checkbox168"><label for="checkbox168">Asignar nick Ãºnico y PIN inicial</label></li>
<li><input type="checkbox" id="checkbox169"><label for="checkbox169">Configurar permisos dentro de ScanYA</label></li>
<li><input type="checkbox" id="checkbox170"><label for="checkbox170">Asignar sucursal especÃ­fica o todas</label></li>
<li><input type="checkbox" id="checkbox171"><label for="checkbox171">Cambiar PIN del empleado</label></li>
<li><input type="checkbox" id="checkbox172"><label for="checkbox172">Cambiar nick del empleado</label></li>
<li><input type="checkbox" id="checkbox173"><label for="checkbox173">Ver actividad del empleado (log completo)</label></li>
<li><input type="checkbox" id="checkbox174"><label for="checkbox174">Activar/desactivar cuenta temporalmente</label></li>
<li><input type="checkbox" id="checkbox175"><label for="checkbox175">Eliminar cuenta de empleado</label></li>
<li><input type="checkbox" id="checkbox176"><label for="checkbox176">Ver resumen de ventas por empleado</label></li>
<li><input type="checkbox" id="checkbox177"><label for="checkbox177">Exportar reporte de actividad</label></li>
</ul>
<p><strong>Para el Empleado (en ScanYA):</strong></p>
<ul>
<li><input type="checkbox" id="checkbox178"><label for="checkbox178">Iniciar sesiÃ³n con nick + PIN</label></li>
<li><input type="checkbox" id="checkbox179"><label for="checkbox179">Escanear QR de clientes</label></li>
<li><input type="checkbox" id="checkbox180"><label for="checkbox180">Registrar ventas (segÃºn permisos)</label></li>
<li><input type="checkbox" id="checkbox181"><label for="checkbox181">Validar cupones (segÃºn permisos)</label></li>
<li><input type="checkbox" id="checkbox182"><label for="checkbox182">Ver su propio historial del dÃ­a</label></li>
<li><input type="checkbox" id="checkbox183"><label for="checkbox183">Cambiar su PIN (opcional, si tiene permiso)</label></li>
<li><input type="checkbox" id="checkbox184"><label for="checkbox184">Cerrar sesiÃ³n</label></li>
</ul>
<h4 id="permisos-predefinidos-templates">Permisos Predefinidos (Templates)</h4>
<pre class="hljs"><code><div>ğŸª TEMPLATE: Cajero BÃ¡sico
â”œâ”€â”€ Escanear QR âœ…
â”œâ”€â”€ Registrar ventas âœ…
â”œâ”€â”€ Validar cupones âœ…
â”œâ”€â”€ Ver historial propio âœ…
â””â”€â”€ Todo lo demÃ¡s âŒ

ğŸ‘¨â€ğŸ’¼ TEMPLATE: Cajero Avanzado
â”œâ”€â”€ Escanear QR âœ…
â”œâ”€â”€ Registrar ventas âœ…
â”œâ”€â”€ Validar cupones âœ…
â”œâ”€â”€ Validar canjes âœ…
â”œâ”€â”€ Ver historial propio âœ…
â”œâ”€â”€ Reembolsos âœ…
â””â”€â”€ Ver estadÃ­sticas âŒ

ğŸ”’ TEMPLATE: Supervisor
â”œâ”€â”€ Todas las operaciones âœ…
â”œâ”€â”€ Reembolsos âœ…
â”œâ”€â”€ Cancelaciones âœ…
â”œâ”€â”€ Ver historial completo âœ…
â””â”€â”€ Ver estadÃ­sticas âœ…
</div></code></pre>
<h4 id="modelo-de-datos">Modelo de Datos</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> Empleado {
  id: <span class="hljs-built_in">string</span>;
  negocioId: <span class="hljs-built_in">string</span>;
  nombre: <span class="hljs-built_in">string</span>;
  nick: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// Ãšnico por negocio</span>
  telefono?: <span class="hljs-built_in">string</span>;
  puesto: <span class="hljs-built_in">string</span>;
  pin: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// Hasheado con bcrypt</span>
  
  <span class="hljs-comment">// AsignaciÃ³n</span>
  sucursalId?: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// null = todas las sucursales</span>
  todasLasSucursales: <span class="hljs-built_in">boolean</span>;
  
  <span class="hljs-comment">// Acceso</span>
  tipoAcceso: <span class="hljs-string">'scanya_only'</span>;  <span class="hljs-comment">// Solo ScanYA, NO Business Studio</span>
  
  <span class="hljs-comment">// Permisos dentro de ScanYA</span>
  permisosScanYA: {
    operaciones: {
      escanearQR: <span class="hljs-built_in">boolean</span>;
      registrarVentas: <span class="hljs-built_in">boolean</span>;
      verInfoCliente: <span class="hljs-built_in">boolean</span>;
    };
    cupones: {
      validarCupones: <span class="hljs-built_in">boolean</span>;
      validarCanjes: <span class="hljs-built_in">boolean</span>;
    };
    ajustes: {
      reembolsos: <span class="hljs-built_in">boolean</span>;
      cancelaciones: <span class="hljs-built_in">boolean</span>;
      modificarMontos: <span class="hljs-built_in">boolean</span>;
    };
    consultas: {
      verHistorialPropio: <span class="hljs-built_in">boolean</span>;
      verHistorialCompleto: <span class="hljs-built_in">boolean</span>;
      verEstadisticas: <span class="hljs-built_in">boolean</span>;
    };
  };
  
  <span class="hljs-comment">// Estado</span>
  activo: <span class="hljs-built_in">boolean</span>;
  createdAt: <span class="hljs-built_in">Date</span>;
  ultimaSesion?: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-keyword">interface</span> ActividadEmpleado {
  id: <span class="hljs-built_in">string</span>;
  empleadoId: <span class="hljs-built_in">string</span>;
  tipo: <span class="hljs-string">'login'</span> | <span class="hljs-string">'logout'</span> | <span class="hljs-string">'venta'</span> | <span class="hljs-string">'cupon'</span> | <span class="hljs-string">'reembolso'</span>;
  descripcion: <span class="hljs-built_in">string</span>;
  metadata?: {
    ventaId?: <span class="hljs-built_in">string</span>;
    monto?: <span class="hljs-built_in">number</span>;
    clienteId?: <span class="hljs-built_in">string</span>;
  };
  timestamp: <span class="hljs-built_in">Date</span>;
}
</div></code></pre>
<h4 id="validaciones-de-nick">Validaciones de Nick</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// Reglas para el nick</span>
<span class="hljs-keyword">const</span> nickRegex = <span class="hljs-regexp">/^[a-zA-Z0-9_]{3,20}$/</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validarNick</span>(<span class="hljs-params">nick: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">boolean</span> </span>{
  <span class="hljs-comment">// Solo letras, nÃºmeros y guiÃ³n bajo</span>
  <span class="hljs-comment">// MÃ­nimo 3 caracteres, mÃ¡ximo 20</span>
  <span class="hljs-keyword">return</span> nickRegex.test(nick);
}

<span class="hljs-comment">// Backend - Verificar unicidad por negocio</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nickDisponible</span>(<span class="hljs-params">
  nick: <span class="hljs-built_in">string</span>, 
  negocioId: <span class="hljs-built_in">string</span>
</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">boolean</span>&gt; </span>{
  <span class="hljs-keyword">const</span> existe = <span class="hljs-keyword">await</span> db.empleados.findOne({
    nick: nick.toLowerCase(),
    negocioId
  });
  
  <span class="hljs-keyword">return</span> !existe;
}

<span class="hljs-comment">// Login de empleado</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loginEmpleado</span>(<span class="hljs-params">
  nick: <span class="hljs-built_in">string</span>, 
  pin: <span class="hljs-built_in">string</span>,
  negocioId: <span class="hljs-built_in">string</span>
</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">Empleado</span> | <span class="hljs-title">null</span>&gt; </span>{
  <span class="hljs-keyword">const</span> empleado = <span class="hljs-keyword">await</span> db.empleados.findOne({
    nick: nick.toLowerCase(),
    negocioId,
    activo: <span class="hljs-literal">true</span>
  });
  
  <span class="hljs-keyword">if</span> (!empleado) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  
  <span class="hljs-keyword">const</span> pinValido = <span class="hljs-keyword">await</span> bcrypt.compare(pin, empleado.pin);
  
  <span class="hljs-keyword">if</span> (!pinValido) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  
  <span class="hljs-comment">// Actualizar Ãºltima sesiÃ³n</span>
  <span class="hljs-keyword">await</span> db.empleados.updateOne(
    { id: empleado.id },
    { ultimaSesion: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>() }
  );
  
  <span class="hljs-keyword">return</span> empleado;
}
</div></code></pre>
<h4 id="validaciones-de-seguridad">Validaciones de Seguridad</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// Backend - Validar que es empleado y tiene permiso</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validarAccesoScanYA</span>(<span class="hljs-params">
  empleadoId: <span class="hljs-built_in">string</span>, 
  accion: <span class="hljs-built_in">string</span>
</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">boolean</span>&gt; </span>{
  <span class="hljs-keyword">const</span> empleado = <span class="hljs-keyword">await</span> getEmpleado(empleadoId);
  
  <span class="hljs-comment">// Verificar cuenta activa</span>
  <span class="hljs-keyword">if</span> (!empleado.activo) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  
  <span class="hljs-comment">// Verificar que es empleado (no dueÃ±o)</span>
  <span class="hljs-keyword">if</span> (empleado.tipoAcceso !== <span class="hljs-string">'scanya_only'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  
  <span class="hljs-comment">// Verificar permiso especÃ­fico en ScanYA</span>
  <span class="hljs-keyword">const</span> tienePermiso = empleado.permisosScanYA[categoria]?.[accion];
  
  <span class="hljs-comment">// Registrar intento</span>
  <span class="hljs-keyword">await</span> logAcceso(empleadoId, <span class="hljs-string">'scanya'</span>, accion, tienePermiso);
  
  <span class="hljs-keyword">return</span> tienePermiso;
}

<span class="hljs-comment">// Bloquear acceso a Business Studio</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validarAccesoBusinessStudio</span>(<span class="hljs-params">
  usuarioId: <span class="hljs-built_in">string</span>
</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">boolean</span>&gt; </span>{
  <span class="hljs-keyword">const</span> usuario = <span class="hljs-keyword">await</span> getUsuario(usuarioId);
  
  <span class="hljs-comment">// Si es empleado, DENEGAR acceso</span>
  <span class="hljs-keyword">if</span> (usuario.tipoAcceso === <span class="hljs-string">'scanya_only'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// Si es dueÃ±o, PERMITIR</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</div></code></pre>
<h4 id="pantalla-de-login-de-scanya">Pantalla de Login de ScanYA</h4>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚                    ğŸ“± SCANYA                                â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  ğŸ‘¤ ACCESO PARA EMPLEADOS                            â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  Nick de usuario:                                     â”‚  â”‚
â”‚  â”‚  [_____________________________]                     â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  PIN:                                                 â”‚  â”‚
â”‚  â”‚  [â— â— â— â—]                                           â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  [Iniciar sesiÃ³n]                                    â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  âš ï¸ Solo personal autorizado                         â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  Â¿Eres dueÃ±o del negocio?                                  â”‚
â”‚  [Ir a Business Studio]                                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h3 id="12-vacantes-business-studiovacantes-%E2%8F%B3-pendiente-requiere-511-empleos">12. Vacantes (<code>/business-studio/vacantes</code>) â³ PENDIENTE (Requiere 5.11 Empleos)</h3>
<p><strong>GestiÃ³n de Ofertas de Empleo:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¼ OFERTAS DE EMPLEO                                       â”‚
â”‚  [+ Publicar Vacante] [Activas] [Cerradas]                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Mesero/a - Tiempo Completo                          â”‚  â”‚
â”‚  â”‚ Publicada: hace 5 dÃ­as  â€¢  12 aplicaciones         â”‚  â”‚
â”‚  â”‚ [Ver aplicaciones] [Editar] [Cerrar vacante]      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Publicar Vacante:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox185"><label for="checkbox185">TÃ­tulo del puesto</label></li>
<li><input type="checkbox" id="checkbox186"><label for="checkbox186">DescripciÃ³n</label></li>
<li><input type="checkbox" id="checkbox187"><label for="checkbox187">Tipo de jornada</label></li>
<li><input type="checkbox" id="checkbox188"><label for="checkbox188">Rango salarial</label></li>
<li><input type="checkbox" id="checkbox189"><label for="checkbox189">Horario</label></li>
<li><input type="checkbox" id="checkbox190"><label for="checkbox190">Requisitos</label></li>
<li><input type="checkbox" id="checkbox191"><label for="checkbox191">Beneficios</label></li>
<li><input type="checkbox" id="checkbox192"><label for="checkbox192">Sucursal (si aplica)</label></li>
</ul>
<p><strong>GestiÃ³n de Aplicaciones:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox193"><label for="checkbox193">Ver lista de aplicantes</label></li>
<li><input type="checkbox" id="checkbox194"><label for="checkbox194">Ver CV/perfil del aplicante</label></li>
<li><input type="checkbox" id="checkbox195"><label for="checkbox195">Marcar estado (vista, proceso, rechazada, aceptada)</label></li>
<li><input type="checkbox" id="checkbox196"><label for="checkbox196">Contactar por ChatYA</label></li>
<li><input type="checkbox" id="checkbox197"><label for="checkbox197">Filtrar aplicaciones por estado</label></li>
<li><input type="checkbox" id="checkbox198"><label for="checkbox198">Cerrar vacante</label></li>
</ul>
<hr>
<h3 id="13-reportes-business-studioreportes-%E2%8F%B3-pendiente-requiere-61-scanya">13. Reportes (<code>/business-studio/reportes</code>) â³ PENDIENTE (Requiere 6.1 ScanYA)</h3>
<p><strong>GeneraciÃ³n de Reportes:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š REPORTES Y EXPORTACIONES                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Selecciona el tipo de reporte:                            â”‚
â”‚                                                             â”‚
â”‚  ğŸ“ˆ Ventas                                                  â”‚
â”‚  â””â”€ Rango: [Del] [____] [Al] [____]                       â”‚
â”‚     [Exportar PDF] [Exportar CSV]                          â”‚
â”‚                                                             â”‚
â”‚  ğŸ‘¥ Clientes                                                â”‚
â”‚  â””â”€ [Exportar lista completa CSV]                          â”‚
â”‚                                                             â”‚
â”‚  ğŸ« Cupones                                                 â”‚
â”‚  â””â”€ [Exportar estadÃ­sticas PDF]                            â”‚
â”‚                                                             â”‚
â”‚  ğŸ¯ Puntos                                                  â”‚
â”‚  â””â”€ [Exportar reporte de puntos CSV]                       â”‚
â”‚                                                             â”‚
â”‚  ğŸ’¼ Empleos                                                 â”‚
â”‚  â””â”€ [Exportar aplicaciones CSV]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Reportes Disponibles:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox199"><label for="checkbox199">Ventas por perÃ­odo</label></li>
<li><input type="checkbox" id="checkbox200"><label for="checkbox200">Ventas por producto/servicio</label></li>
<li><input type="checkbox" id="checkbox201"><label for="checkbox201">Ventas por sucursal</label></li>
<li><input type="checkbox" id="checkbox202"><label for="checkbox202">Base de clientes completa</label></li>
<li><input type="checkbox" id="checkbox203"><label for="checkbox203">Clientes por nivel</label></li>
<li><input type="checkbox" id="checkbox204"><label for="checkbox204">Cupones: creados vs canjeados</label></li>
<li><input type="checkbox" id="checkbox205"><label for="checkbox205">Puntos otorgados</label></li>
<li><input type="checkbox" id="checkbox206"><label for="checkbox206">Aplicaciones a empleos</label></li>
<li><input type="checkbox" id="checkbox207"><label for="checkbox207">EstadÃ­sticas de rifas</label></li>
<li><input type="checkbox" id="checkbox208"><label for="checkbox208">ReseÃ±as recibidas</label></li>
</ul>
<p><strong>Formatos de ExportaciÃ³n:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox209"><label for="checkbox209">PDF (reportes visuales)</label></li>
<li><input type="checkbox" id="checkbox210"><label for="checkbox210">CSV (datos tabulares)</label></li>
<li><input type="checkbox" id="checkbox211"><label for="checkbox211">Excel (anÃ¡lisis avanzado)</label></li>
</ul>
<hr>
<h3 id="14-sucursales-business-studiosucursales-%E2%8F%B3-pendiente">14. Sucursales (<code>/business-studio/sucursales</code>) â³ PENDIENTE</h3>
<p><strong>GestiÃ³n de MÃºltiples Ubicaciones:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox212"><label for="checkbox212">Ver todas las sucursales</label></li>
<li><input type="checkbox" id="checkbox213"><label for="checkbox213">Agregar nueva sucursal</label></li>
<li><input type="checkbox" id="checkbox214"><label for="checkbox214">Editar sucursal existente</label></li>
<li><input type="checkbox" id="checkbox215"><label for="checkbox215">Eliminar sucursal</label></li>
<li><input type="checkbox" id="checkbox216"><label for="checkbox216">Configurar sucursal principal</label></li>
<li><input type="checkbox" id="checkbox217"><label for="checkbox217">Por cada sucursal:</label>
<ul>
<li>Nombre</li>
<li>DirecciÃ³n</li>
<li>Coordenadas (mapa Leaflet)</li>
<li>TelÃ©fono especÃ­fico</li>
<li>Horarios especÃ­ficos</li>
<li>Estado (activa/inactiva)</li>
<li>Empleados asignados</li>
</ul>
</li>
</ul>
<hr>
<h3 id="15-mi-perfil-business-studioperfil-%E2%9C%85-completado">15. Mi Perfil (<code>/business-studio/perfil</code>) âœ… COMPLETADO</h3>
<p><strong>6 Tabs implementados:</strong></p>
<p><strong>A) Datos del Negocio (TabInformacion):</strong> âœ…</p>
<ul>
<li><input type="checkbox" id="checkbox218" checked="true"><label for="checkbox218">Nombre del Negocio *</label></li>
<li><input type="checkbox" id="checkbox219" checked="true"><label for="checkbox219">DescripciÃ³n (opcional)</label></li>
<li><input type="checkbox" id="checkbox220" checked="true"><label for="checkbox220">CategorÃ­a y SubcategorÃ­as (mÃ¡x 3) *</label></li>
<li><input type="checkbox" id="checkbox221" checked="true"><label for="checkbox221">Panel lateral CardYA:</label>
<ul>
<li>Toggle activar/desactivar sistema de lealtad</li>
<li>Beneficios (Clientes Recurrentes, Mayor Ticket, Sin Costo)</li>
<li>Â¿CÃ³mo Funciona? (4 pasos)</li>
<li>BotÃ³n &quot;Ir a Puntos â†’&quot;</li>
</ul>
</li>
</ul>
<p><strong>B) Contacto (TabContacto):</strong> âœ…</p>
<ul>
<li><input type="checkbox" id="checkbox222" checked="true"><label for="checkbox222">TelÃ©fono con lada (+52)</label></li>
<li><input type="checkbox" id="checkbox223" checked="true"><label for="checkbox223">WhatsApp con lada (+52)</label></li>
<li><input type="checkbox" id="checkbox224" checked="true"><label for="checkbox224">Correo ElectrÃ³nico</label></li>
<li><input type="checkbox" id="checkbox225" checked="true"><label for="checkbox225">Sitio Web (opcional)</label></li>
<li><input type="checkbox" id="checkbox226" checked="true"><label for="checkbox226">Redes Sociales (Facebook, Instagram, TikTok, Twitter/X)</label></li>
</ul>
<p><strong>C) UbicaciÃ³n (TabUbicacion):</strong> âœ…</p>
<ul>
<li><input type="checkbox" id="checkbox227" checked="true"><label for="checkbox227">Calle y Colonia *</label></li>
<li><input type="checkbox" id="checkbox228" checked="true"><label for="checkbox228">Ciudad *</label></li>
<li><input type="checkbox" id="checkbox229" checked="true"><label for="checkbox229">BotÃ³n &quot;Usar mi ubicaciÃ³n&quot; (GPS)</label></li>
<li><input type="checkbox" id="checkbox230" checked="true"><label for="checkbox230">Mapa Leaflet interactivo con marcador arrastrable</label></li>
<li><input type="checkbox" id="checkbox231" checked="true"><label for="checkbox231">Tip explicativo de uso</label></li>
</ul>
<p><strong>D) Horarios (TabHorarios):</strong> âœ…</p>
<ul>
<li><input type="checkbox" id="checkbox232" checked="true"><label for="checkbox232">Selector de dÃ­as (Lun-Dom) con indicadores</label></li>
<li><input type="checkbox" id="checkbox233" checked="true"><label for="checkbox233">BotÃ³n &quot;Duplicar Horario&quot;</label></li>
<li><input type="checkbox" id="checkbox234" checked="true"><label for="checkbox234">BotÃ³n &quot;Abierto 24/7&quot;</label></li>
<li><input type="checkbox" id="checkbox235" checked="true"><label for="checkbox235">Toggle Estado del dÃ­a (Abierto/Cerrado)</label></li>
<li><input type="checkbox" id="checkbox236" checked="true"><label for="checkbox236">Hora de Apertura y Cierre (HH:MM AM/PM)</label></li>
<li><input type="checkbox" id="checkbox237" checked="true"><label for="checkbox237">Checkbox &quot;Â¿Tienes horario de comida/break?&quot;</label></li>
<li><input type="checkbox" id="checkbox238" checked="true"><label for="checkbox238">Hora de Salida y Regreso (break)</label></li>
</ul>
<p><strong>E) ImÃ¡genes (TabImagenes):</strong> âœ…</p>
<ul>
<li><input type="checkbox" id="checkbox239" checked="true"><label for="checkbox239">Logo del Negocio (PNG/JPG mÃ¡x 2MB)</label></li>
<li><input type="checkbox" id="checkbox240" checked="true"><label for="checkbox240">Foto de Perfil - ChatYA/Avatar (PNG/JPG mÃ¡x 2MB)</label></li>
<li><input type="checkbox" id="checkbox241" checked="true"><label for="checkbox241">Imagen de Portada (1600Ã—900px)</label></li>
<li><input type="checkbox" id="checkbox242" checked="true"><label for="checkbox242">GalerÃ­a de Fotos (mÃ¡x 10, 1200Ã—1200px recomendado)</label></li>
<li><input type="checkbox" id="checkbox243" checked="true"><label for="checkbox243">Contador de imÃ¡genes (ej: 8/10)</label></li>
<li><input type="checkbox" id="checkbox244" checked="true"><label for="checkbox244">Upload optimista a Cloudinary</label></li>
<li><input type="checkbox" id="checkbox245" checked="true"><label for="checkbox245">OptimizaciÃ³n automÃ¡tica a .webp</label></li>
</ul>
<p><strong>F) OperaciÃ³n (TabOperacion):</strong> âœ…</p>
<ul>
<li><input type="checkbox" id="checkbox246" checked="true"><label for="checkbox246">MÃ©todos de Pago * (mÃ­nimo 1 requerido):</label>
<ul>
<li>Efectivo, Tarjeta, Transferencia</li>
</ul>
</li>
<li><input type="checkbox" id="checkbox247" checked="true"><label for="checkbox247">Opciones de Entrega:</label>
<ul>
<li>EnvÃ­o a Domicilio (envÃ­as productos)</li>
<li>Servicio a Domicilio (vas al cliente)</li>
</ul>
</li>
<li><input type="checkbox" id="checkbox248" checked="true"><label for="checkbox248">Nota explicativa para usuarios</label></li>
</ul>
<hr>
<h2 id="%F0%9F%8E%A8-componentes-de-business-studio">ğŸ¨ Componentes de Business Studio</h2>
<pre class="hljs"><code><div>pages/private/business-studio/
â”œâ”€â”€ dashboard/
â”‚   â”œâ”€â”€ PaginaDashboard.tsx           âœ…
â”‚   â””â”€â”€ componentes/                  âœ… (10 componentes)
â”œâ”€â”€ perfil/
â”‚   â”œâ”€â”€ PaginaPerfil.tsx              âœ…
â”‚   â”œâ”€â”€ hooks/usePerfil.ts            âœ…
â”‚   â””â”€â”€ components/                   âœ… (8 componentes)
â”œâ”€â”€ catalogo/
â”‚   â”œâ”€â”€ PaginaCatalogo.tsx            â³
â”‚   â”œâ”€â”€ FormProducto.tsx              â³
â”‚   â””â”€â”€ FormServicio.tsx              â³
â”œâ”€â”€ ofertas/
â”‚   â”œâ”€â”€ PaginaOfertas.tsx             â³
â”‚   â””â”€â”€ FormOferta.tsx                â³
â”œâ”€â”€ clientes/
â”‚   â”œâ”€â”€ PaginaClientes.tsx            â³
â”‚   â”œâ”€â”€ PerfilCliente.tsx             â³
â”‚   â””â”€â”€ HistorialCliente.tsx          â³
â”œâ”€â”€ transacciones/
â”‚   â”œâ”€â”€ PaginaTransacciones.tsx       â³
â”‚   â””â”€â”€ DetalleTransaccion.tsx        â³
â”œâ”€â”€ cupones/
â”‚   â”œâ”€â”€ PaginaCupones.tsx             â³
â”‚   â””â”€â”€ FormCupon.tsx                 â³
â”œâ”€â”€ puntos/
â”‚   â”œâ”€â”€ PaginaPuntos.tsx              â³
â”‚   â””â”€â”€ ConfiguracionPuntos.tsx       â³
â”œâ”€â”€ empleados/
â”‚   â”œâ”€â”€ PaginaEmpleados.tsx           â³
â”‚   â”œâ”€â”€ FormEmpleado.tsx              â³
â”‚   â””â”€â”€ PermisosEmpleado.tsx          â³
â”œâ”€â”€ vacantes/
â”‚   â”œâ”€â”€ PaginaVacantes.tsx            â³
â”‚   â”œâ”€â”€ FormVacante.tsx               â³
â”‚   â””â”€â”€ ListaAplicaciones.tsx         â³
â”œâ”€â”€ reportes/
â”‚   â””â”€â”€ PaginaReportes.tsx            â³
â”œâ”€â”€ rifas/
â”‚   â”œâ”€â”€ PaginaRifas.tsx               â³
â”‚   â””â”€â”€ FormRifa.tsx                  â³
â”œâ”€â”€ alertas/
â”‚   â””â”€â”€ PaginaAlertas.tsx             â³
â””â”€â”€ sucursales/
    â”œâ”€â”€ PaginaSucursales.tsx          â³
    â””â”€â”€ FormSucursal.tsx              â³
</div></code></pre>
<hr>
<hr>
<h2 id="%F0%9F%94%84-sistema-de-lealtad-cardya--scanya">ğŸ”„ Sistema de Lealtad: CardYA + ScanYA</h2>
<blockquote>
<p><strong>CardYA</strong> (usuario) y <strong>ScanYA</strong> (comerciante) son dos caras de la misma moneda. Juntos forman el sistema de lealtad de AnunciaYA.</p>
</blockquote>
<h3 id="flujo-general-del-sistema">Flujo General del Sistema</h3>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FLUJO DE TRANSACCIÃ“N                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ğŸ‘¤ CLIENTE                          ğŸª COMERCIANTE/EMPLEADO            â”‚
â”‚  (CardYA)                            (ScanYA)                           â”‚
â”‚                                                                         â”‚
â”‚  1. Abre CardYA                      2. Abre ScanYA                     â”‚
â”‚     â†“                                   â†“                               â”‚
â”‚  [Muestra QR]  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  [Escanea QR]                       â”‚
â”‚                                         â†“                               â”‚
â”‚                                      3. Ingresa monto                   â”‚
â”‚                                         â†“                               â”‚
â”‚                                      4. Sistema calcula:                â”‚
â”‚                                         â€¢ Puntos base                   â”‚
â”‚                                         â€¢ Multiplicador nivel           â”‚
â”‚                                         â€¢ Puntos finales                â”‚
â”‚                                         â†“                               â”‚
â”‚  5. Recibe notificaciÃ³n  â—„â”€â”€â”€â”€â”€â”€â”€â”€  [Confirma venta]                   â”‚
â”‚     +48 puntos                          â†“                               â”‚
â”‚     â†“                                6. Registra en BD:                 â”‚
â”‚  6. Puntos actualizados                 â€¢ TransacciÃ³n                   â”‚
â”‚     en CardYA                           â€¢ Puntos otorgados              â”‚
â”‚                                         â€¢ Cliente atendido              â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h3 id="55-scanya---punto-de-venta-digital-%E2%8F%B3-pendiente">5.5 ScanYA - Punto de Venta Digital â³ PENDIENTE</h3>
<blockquote>
<p>AplicaciÃ³n para comerciantes y empleados que registra ventas, otorga puntos y valida cupones.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Elemento</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>FunciÃ³n</strong></td>
<td>Punto de venta para registrar compras y otorgar puntos</td>
</tr>
<tr>
<td><strong>QuiÃ©n usa</strong></td>
<td>DueÃ±os (modo Comercial) + Empleados (con permisos)</td>
</tr>
<tr>
<td><strong>Ruta App</strong></td>
<td><code>/scanya</code></td>
</tr>
<tr>
<td><strong>Ruta Widget</strong></td>
<td><code>/scanya-widget</code> (PWA standalone)</td>
</tr>
<tr>
<td><strong>Requiere</strong></td>
<td>Modo Comercial o cuenta de empleado</td>
</tr>
</tbody>
</table>
<h4 id="%F0%9F%94%90-tipos-de-acceso">ğŸ” Tipos de Acceso</h4>
<table>
<thead>
<tr>
<th>Tipo</th>
<th>Login</th>
<th>Acceso BS</th>
<th>Permisos</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>DueÃ±o</strong></td>
<td>Email + ContraseÃ±a</td>
<td>âœ… Completo</td>
<td>Todos</td>
</tr>
<tr>
<td><strong>Gerente Sucursal</strong></td>
<td>Email + ContraseÃ±a</td>
<td>âœ… Su sucursal</td>
<td>Configurables</td>
</tr>
<tr>
<td><strong>Empleado</strong></td>
<td>Nick + PIN</td>
<td>âŒ Solo ScanYA</td>
<td>Configurables</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="%F0%9F%93%B1-interfaz-principal">ğŸ“± Interfaz Principal</h4>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“± SCANYA                                                  â”‚
â”‚  ğŸª PizzerÃ­a Roma - Sucursal Centro                        â”‚
â”‚  ğŸ‘¤ @carlos (Cajero)                        [Cerrar sesiÃ³n] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚              â”‚                       â”‚                      â”‚
â”‚              â”‚    ğŸ“· ESCANEAR QR     â”‚                      â”‚
â”‚              â”‚                       â”‚                      â”‚
â”‚              â”‚   Toca para abrir     â”‚                      â”‚
â”‚              â”‚      la cÃ¡mara        â”‚                      â”‚
â”‚              â”‚                       â”‚                      â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                             â”‚
â”‚              [âŒ¨ï¸ Ingresar cÃ³digo manual]                    â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š MI RESUMEN DE HOY                                       â”‚
â”‚                                                             â”‚
â”‚  ğŸ’° Ventas: 12          ğŸ“ˆ Total: $4,580                   â”‚
â”‚  ğŸ¯ Puntos otorgados: 458                                   â”‚
â”‚  ğŸŸï¸ Cupones validados: 3                                    â”‚
â”‚                                                             â”‚
â”‚  [Ver historial completo]                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš¡ ACCIONES RÃPIDAS                                        â”‚
â”‚                                                             â”‚
â”‚  [ğŸŸï¸ Validar CupÃ³n]  [ğŸ”„ Validar Canje]  [ğŸ“‹ Historial]   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h4 id="%F0%9F%94%84-flujo-de-venta-completo">ğŸ”„ Flujo de Venta Completo</h4>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PASO 1: ESCANEAR QR DEL CLIENTE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚              [CÃ¡mara activa]                                â”‚
â”‚                                                             â”‚
â”‚         Apunta al QR del cliente                            â”‚
â”‚                                                             â”‚
â”‚  â±ï¸ QR vÃ¡lido por: 1:45                                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PASO 2: CLIENTE IDENTIFICADO                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ‘¤ Juan PÃ©rez                                              â”‚
â”‚  ğŸ¥‡ Nivel ORO - Multiplicador 1.5x                         â”‚
â”‚                                                             â”‚
â”‚  ğŸ“Š En tu negocio:                                          â”‚
â”‚  â€¢ Puntos disponibles: 1,250                               â”‚
â”‚  â€¢ Visitas totales: 23                                      â”‚
â”‚  â€¢ Ãšltima visita: hace 5 dÃ­as                              â”‚
â”‚                                                             â”‚
â”‚  ğŸŸï¸ Cupones disponibles: 2                                  â”‚
â”‚  â€¢ 20% descuento (vence maÃ±ana)                            â”‚
â”‚  â€¢ 2x1 martes                                              â”‚
â”‚                                                             â”‚
â”‚  [Continuar sin cupÃ³n]  [Aplicar cupÃ³n]                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PASO 3: REGISTRAR VENTA                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ’µ Monto de la compra:                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  $  [    500.00    ]                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ğŸ“ DescripciÃ³n (opcional):                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  2 pizzas grandes + refrescos                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ğŸ’³ MÃ©todo de pago:                                         â”‚
â”‚  [Efectivo âœ“] [Tarjeta] [Transferencia]                    â”‚
â”‚                                                             â”‚
â”‚  ğŸ“· Foto de evidencia: (opcional)                          â”‚
â”‚  [ğŸ“¸ Tomar foto]                                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PASO 4: CONFIRMAR PUNTOS                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“Š RESUMEN DE LA TRANSACCIÃ“N                              â”‚
â”‚                                                             â”‚
â”‚  Cliente: Juan PÃ©rez ğŸ¥‡                                     â”‚
â”‚  Monto: $500.00                                            â”‚
â”‚                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                             â”‚
â”‚  ğŸ§® CÃLCULO DE PUNTOS:                                      â”‚
â”‚                                                             â”‚
â”‚  Valor del punto en tu negocio: $10                        â”‚
â”‚  Puntos base: 500 / 10 = 50 puntos                         â”‚
â”‚  Multiplicador ORO: x1.5                                   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚        ğŸ¯ PUNTOS A OTORGAR: 75                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  [â† Modificar]              [âœ“ Confirmar venta]            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PASO 5: VENTA COMPLETADA âœ…                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                     âœ…                                      â”‚
â”‚              Â¡Venta registrada!                             â”‚
â”‚                                                             â”‚
â”‚  Cliente: Juan PÃ©rez                                        â”‚
â”‚  Monto: $500.00                                            â”‚
â”‚  Puntos otorgados: +75 ğŸ¯                                   â”‚
â”‚                                                             â”‚
â”‚  ğŸ’¬ Se enviÃ³ notificaciÃ³n al cliente                       â”‚
â”‚                                                             â”‚
â”‚  [ğŸ”„ Nueva venta]        [ğŸ“‹ Ver detalles]                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h4 id="%F0%9F%8E%9F%EF%B8%8F-validaci%C3%B3n-de-cupones">ğŸŸï¸ ValidaciÃ³n de Cupones</h4>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŸï¸ VALIDAR CUPÃ“N                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Escanea el QR del cupÃ³n o ingresa el cÃ³digo:              â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  [NAVIDAD-2024-ABC123]                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  [ğŸ“· Escanear QR]                    [Validar cÃ³digo]      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… CUPÃ“N VÃLIDO                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸŸï¸ 30% Descuento Navidad                                   â”‚
â”‚                                                             â”‚
â”‚  ğŸ‘¤ Cliente: MarÃ­a GonzÃ¡lez                                 â”‚
â”‚  ğŸ“… VÃ¡lido hasta: 25 Dic 2024                              â”‚
â”‚  âš ï¸ Condiciones: Compra mÃ­nima $200                        â”‚
â”‚                                                             â”‚
â”‚  [Cancelar]                    [âœ“ Aplicar cupÃ³n]           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h4 id="%F0%9F%94%84-validaci%C3%B3n-de-canje-de-puntos">ğŸ”„ ValidaciÃ³n de Canje de Puntos</h4>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”„ VALIDAR CANJE                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  El cliente generÃ³ un cÃ³digo de canje desde su CardYA.     â”‚
â”‚  Ingresa el cÃ³digo para validar:                           â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  [CANJE-7X9K2M]                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  [Validar]                                                  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… CANJE VÃLIDO                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ‘¤ Cliente: Juan PÃ©rez ğŸ¥‡                                  â”‚
â”‚                                                             â”‚
â”‚  ğŸ Recompensa: CafÃ© gratis                                â”‚
â”‚  ğŸ¯ Puntos canjeados: 100                                  â”‚
â”‚                                                             â”‚
â”‚  â±ï¸ CÃ³digo vÃ¡lido por: 14:32 minutos                       â”‚
â”‚                                                             â”‚
â”‚  [Cancelar]              [âœ“ Confirmar entrega]             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h4 id="%F0%9F%91%A8%E2%80%8D%F0%9F%92%BC-acceso-de-empleados">ğŸ‘¨â€ğŸ’¼ Acceso de Empleados</h4>
<p><strong>Login de Empleado:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚                    ğŸ“± SCANYA                                â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  ğŸ‘¤ ACCESO PARA EMPLEADOS                            â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  Nick de usuario:                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  carlos                                         â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  PIN (4-6 dÃ­gitos):                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  â— â— â— â—                                        â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  [Iniciar sesiÃ³n]                                    â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  âš ï¸ Solo personal autorizado                         â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  Â¿Eres dueÃ±o del negocio?                                  â”‚
â”‚  [Ir a Business Studio]                                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Permisos Configurables (desde BS â†’ Empleados):</strong></p>
<table>
<thead>
<tr>
<th>Permiso</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>escanearQR</code></td>
<td>Escanear QR de clientes</td>
</tr>
<tr>
<td><code>registrarVentas</code></td>
<td>Registrar ventas y otorgar puntos</td>
</tr>
<tr>
<td><code>verInfoCliente</code></td>
<td>Ver informaciÃ³n del cliente</td>
</tr>
<tr>
<td><code>validarCupones</code></td>
<td>Validar cupones</td>
</tr>
<tr>
<td><code>validarCanjes</code></td>
<td>Validar cÃ³digos de canje</td>
</tr>
<tr>
<td><code>hacerReembolsos</code></td>
<td>Procesar devoluciones</td>
</tr>
<tr>
<td><code>cancelarTransacciones</code></td>
<td>Anular ventas</td>
</tr>
<tr>
<td><code>verHistorialPropio</code></td>
<td>Ver solo sus transacciones</td>
</tr>
<tr>
<td><code>verHistorialCompleto</code></td>
<td>Ver todas las transacciones</td>
</tr>
<tr>
<td><code>verEstadisticas</code></td>
<td>Ver mÃ©tricas del negocio</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="%F0%9F%92%BE-modelo-de-datos">ğŸ’¾ Modelo de Datos</h4>
<p><strong>Tabla: transacciones</strong></p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> transacciones (
  <span class="hljs-keyword">id</span> <span class="hljs-keyword">UUID</span> PRIMARY <span class="hljs-keyword">KEY</span> <span class="hljs-keyword">DEFAULT</span> gen_random_uuid(),
  negocio_id <span class="hljs-keyword">UUID</span> <span class="hljs-keyword">REFERENCES</span> negocios(<span class="hljs-keyword">id</span>),
  sucursal_id <span class="hljs-keyword">UUID</span> <span class="hljs-keyword">REFERENCES</span> negocio_sucursales(<span class="hljs-keyword">id</span>),
  cliente_id <span class="hljs-keyword">UUID</span> <span class="hljs-keyword">REFERENCES</span> usuarios(<span class="hljs-keyword">id</span>),
  empleado_id <span class="hljs-keyword">UUID</span> <span class="hljs-keyword">REFERENCES</span> empleados(<span class="hljs-keyword">id</span>),  <span class="hljs-comment">-- null si fue el dueÃ±o</span>
  
  <span class="hljs-comment">-- Datos de la venta</span>
  monto <span class="hljs-built_in">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
  descripcion <span class="hljs-built_in">TEXT</span>,
  metodo_pago <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>),  <span class="hljs-comment">-- 'efectivo' | 'tarjeta' | 'transferencia'</span>
  foto_evidencia_url <span class="hljs-built_in">TEXT</span>,
  
  <span class="hljs-comment">-- Puntos</span>
  puntos_base <span class="hljs-built_in">INTEGER</span>,
  multiplicador <span class="hljs-built_in">DECIMAL</span>(<span class="hljs-number">3</span>,<span class="hljs-number">2</span>),
  puntos_otorgados <span class="hljs-built_in">INTEGER</span>,
  nivel_cliente <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">10</span>),
  
  <span class="hljs-comment">-- CupÃ³n aplicado</span>
  cupon_id <span class="hljs-keyword">UUID</span> <span class="hljs-keyword">REFERENCES</span> cupones(<span class="hljs-keyword">id</span>),
  descuento_aplicado <span class="hljs-built_in">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>),
  
  <span class="hljs-comment">-- Estado</span>
  estado <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'completada'</span>,  <span class="hljs-comment">-- 'completada' | 'reembolsada' | 'anulada'</span>
  
  created_at <span class="hljs-built_in">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NOW</span>(),
  updated_at <span class="hljs-built_in">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NOW</span>()
);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> idx_transacciones_negocio <span class="hljs-keyword">ON</span> transacciones(negocio_id);
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> idx_transacciones_sucursal <span class="hljs-keyword">ON</span> transacciones(sucursal_id);
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> idx_transacciones_cliente <span class="hljs-keyword">ON</span> transacciones(cliente_id);
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> idx_transacciones_fecha <span class="hljs-keyword">ON</span> transacciones(created_at);
</div></code></pre>
<p><strong>Tabla: empleados</strong> (ya documentada en mÃ³dulo 9 de BS)</p>
<hr>
<h4 id="%F0%9F%93%B1-componentes-frontend">ğŸ“± Componentes Frontend</h4>
<pre class="hljs"><code><div>pages/private/scanya/
â”œâ”€â”€ PaginaScanYA.tsx              # Vista principal
â”œâ”€â”€ PaginaLoginEmpleado.tsx       # Login nick + PIN
â””â”€â”€ components/
    â”œâ”€â”€ EscanerQR.tsx             # CÃ¡mara + lector QR
    â”œâ”€â”€ InfoCliente.tsx           # Card con datos del cliente
    â”œâ”€â”€ FormularioVenta.tsx       # Monto + descripciÃ³n + mÃ©todo pago
    â”œâ”€â”€ ResumenPuntos.tsx         # CÃ¡lculo de puntos a otorgar
    â”œâ”€â”€ ConfirmacionVenta.tsx     # Pantalla de Ã©xito
    â”œâ”€â”€ ValidarCupon.tsx          # ValidaciÃ³n de cupones
    â”œâ”€â”€ ValidarCanje.tsx          # ValidaciÃ³n de canjes
    â”œâ”€â”€ ResumenDia.tsx            # MÃ©tricas del dÃ­a
    â”œâ”€â”€ HistorialVentas.tsx       # Lista de transacciones
    â””â”€â”€ AccionesRapidas.tsx       # Botones de acciones

hooks/
â”œâ”€â”€ useScanYA.ts                  # Estado general
â”œâ”€â”€ useEscanerQR.ts               # Control de cÃ¡mara
â”œâ”€â”€ useTransaccion.ts             # Registro de ventas
â””â”€â”€ useEmpleadoAuth.ts            # Auth de empleados

stores/
â””â”€â”€ useScanYAStore.ts             # Estado global ScanYA
</div></code></pre>
<hr>
<h4 id="%F0%9F%94%8C-endpoints-backend">ğŸ”Œ Endpoints Backend</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// ===== TRANSACCIONES =====</span>

<span class="hljs-comment">// POST /api/scanya/venta</span>
<span class="hljs-comment">// Body: { clienteId, monto, descripcion, metodoPago, cuponId?, fotoEvidencia? }</span>
<span class="hljs-comment">// Retorna: transacciÃ³n creada + puntos otorgados</span>

<span class="hljs-comment">// GET /api/scanya/historial</span>
<span class="hljs-comment">// Query: ?fecha=2024-01-06&amp;empleadoId=xxx&amp;page=1&amp;limit=20</span>
<span class="hljs-comment">// Retorna: lista de transacciones</span>

<span class="hljs-comment">// POST /api/scanya/reembolso/:transaccionId</span>
<span class="hljs-comment">// Body: { motivo }</span>
<span class="hljs-comment">// Retorna: transacciÃ³n actualizada</span>

<span class="hljs-comment">// ===== CUPONES =====</span>

<span class="hljs-comment">// POST /api/scanya/validar-cupon</span>
<span class="hljs-comment">// Body: { codigo }</span>
<span class="hljs-comment">// Retorna: info del cupÃ³n + cliente</span>

<span class="hljs-comment">// POST /api/scanya/aplicar-cupon</span>
<span class="hljs-comment">// Body: { cuponId, transaccionId }</span>
<span class="hljs-comment">// Retorna: cupÃ³n marcado como usado</span>

<span class="hljs-comment">// ===== CANJES =====</span>

<span class="hljs-comment">// POST /api/scanya/validar-canje</span>
<span class="hljs-comment">// Body: { codigo }</span>
<span class="hljs-comment">// Retorna: info del canje + recompensa</span>

<span class="hljs-comment">// POST /api/scanya/confirmar-canje</span>
<span class="hljs-comment">// Body: { canjeId }</span>
<span class="hljs-comment">// Retorna: canje confirmado</span>

<span class="hljs-comment">// ===== CLIENTES =====</span>

<span class="hljs-comment">// POST /api/scanya/identificar-cliente</span>
<span class="hljs-comment">// Body: { qrPayload }</span>
<span class="hljs-comment">// Retorna: info del cliente + puntos + cupones</span>

<span class="hljs-comment">// ===== EMPLEADOS =====</span>

<span class="hljs-comment">// POST /api/scanya/login-empleado</span>
<span class="hljs-comment">// Body: { nick, pin }</span>
<span class="hljs-comment">// Retorna: token de sesiÃ³n + permisos</span>

<span class="hljs-comment">// GET /api/scanya/mi-resumen</span>
<span class="hljs-comment">// Retorna: mÃ©tricas del dÃ­a del empleado actual</span>
</div></code></pre>
<hr>
<h4 id="%E2%9C%85-checklist-scanya">âœ… Checklist ScanYA</h4>
<p><strong>Frontend:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox249"><label for="checkbox249">Pantalla principal con escÃ¡ner QR</label></li>
<li><input type="checkbox" id="checkbox250"><label for="checkbox250">Login empleado (nick + PIN)</label></li>
<li><input type="checkbox" id="checkbox251"><label for="checkbox251">Formulario de registro de venta</label></li>
<li><input type="checkbox" id="checkbox252"><label for="checkbox252">CÃ¡lculo visual de puntos</label></li>
<li><input type="checkbox" id="checkbox253"><label for="checkbox253">ValidaciÃ³n de cupones</label></li>
<li><input type="checkbox" id="checkbox254"><label for="checkbox254">ValidaciÃ³n de canjes</label></li>
<li><input type="checkbox" id="checkbox255"><label for="checkbox255">Resumen del dÃ­a</label></li>
<li><input type="checkbox" id="checkbox256"><label for="checkbox256">Historial de transacciones</label></li>
<li><input type="checkbox" id="checkbox257"><label for="checkbox257">ConfirmaciÃ³n de venta exitosa</label></li>
<li><input type="checkbox" id="checkbox258"><label for="checkbox258">Manejo de errores (QR expirado, cliente no encontrado)</label></li>
</ul>
<p><strong>Backend:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox259"><label for="checkbox259">Tabla </label><code>transacciones</code></li>
<li><input type="checkbox" id="checkbox260"><label for="checkbox260">Endpoint POST </label><code>/api/scanya/venta</code></li>
<li><input type="checkbox" id="checkbox261"><label for="checkbox261">Endpoint POST </label><code>/api/scanya/identificar-cliente</code></li>
<li><input type="checkbox" id="checkbox262"><label for="checkbox262">Endpoint POST </label><code>/api/scanya/validar-cupon</code></li>
<li><input type="checkbox" id="checkbox263"><label for="checkbox263">Endpoint POST </label><code>/api/scanya/validar-canje</code></li>
<li><input type="checkbox" id="checkbox264"><label for="checkbox264">Endpoint POST </label><code>/api/scanya/login-empleado</code></li>
<li><input type="checkbox" id="checkbox265"><label for="checkbox265">Middleware de permisos por empleado</label></li>
<li><input type="checkbox" id="checkbox266"><label for="checkbox266">Trigger: actualizar puntos del cliente</label></li>
<li><input type="checkbox" id="checkbox267"><label for="checkbox267">Trigger: actualizar nivel si corresponde</label></li>
<li><input type="checkbox" id="checkbox268"><label for="checkbox268">NotificaciÃ³n push al cliente</label></li>
</ul>
<hr>
<h3 id="56-cardya---tarjeta-de-lealtad-digital-%E2%8F%B3-pendiente">5.6 CardYA - Tarjeta de Lealtad Digital â³ PENDIENTE</h3>
<blockquote>
<p>Sistema de puntos con niveles (Bronce â†’ Plata â†’ Oro) donde el usuario acumula puntos en cada negocio participante.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Elemento</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>FunciÃ³n</strong></td>
<td>Tarjeta de lealtad digital con niveles</td>
</tr>
<tr>
<td><strong>QuiÃ©n usa</strong></td>
<td>Usuarios en modo Personal</td>
</tr>
<tr>
<td><strong>Ruta App</strong></td>
<td><code>/cardya</code></td>
</tr>
<tr>
<td><strong>Ruta Widget</strong></td>
<td><code>/cardya-widget</code> (PWA standalone)</td>
</tr>
<tr>
<td><strong>Niveles</strong></td>
<td>ğŸ¥‰ Bronce â†’ ğŸ¥ˆ Plata â†’ ğŸ¥‡ Oro</td>
</tr>
</tbody>
</table>
<h4 id="%E2%9A%A0%EF%B8%8F-importante---puntos-por-negocio">âš ï¸ IMPORTANTE - Puntos por Negocio</h4>
<ul>
<li>Cada negocio configura el valor de sus puntos (1 punto = $X pesos)</li>
<li>Los puntos son <strong>especÃ­ficos por negocio</strong> (NO se transfieren entre negocios)</li>
<li>El nivel CardYA es <strong>GLOBAL</strong> (suma puntos de todos los negocios)</li>
<li>Los multiplicadores (1x, 1.25x, 1.5x) aplican en cada negocio</li>
</ul>
<p><strong>Ejemplo PrÃ¡ctico:</strong></p>
<pre class="hljs"><code><div>Usuario con nivel PLATA compra en dos negocios:

ğŸ“ PizzerÃ­a Roma (valor punto: $10)
   Compra: $500
   CÃ¡lculo: 500 / 10 = 50 puntos base
   Con multiplicador Plata (1.25x): 62 puntos
   â†’ +62 puntos en PizzerÃ­a Roma

ğŸ“ CafÃ© Central (valor punto: $5)
   Compra: $500
   CÃ¡lculo: 500 / 5 = 100 puntos base
   Con multiplicador Plata (1.25x): 125 puntos
   â†’ +125 puntos en CafÃ© Central

Puntos lifetime del usuario: +187 (suma para calcular nivel global)
</div></code></pre>
<hr>
<h4 id="%F0%9F%8F%86-sistema-de-niveles">ğŸ† Sistema de Niveles</h4>
<h5 id="%F0%9F%A5%89-bronce-nivel-inicial">ğŸ¥‰ BRONCE (Nivel Inicial)</h5>
<pre class="hljs"><code><div>Requisito:     0 - 4,999 puntos lifetime
Multiplicador: 1.0x
Color:         CafÃ©/Bronce (#CD7F32)
Badge:         ğŸ¥‰ BRONCE
</div></code></pre>
<p><strong>Beneficios:</strong></p>
<ul>
<li>âœ… AcumulaciÃ³n estÃ¡ndar de puntos (1x)</li>
<li>âœ… Acceso a rifas pÃºblicas</li>
<li>âœ… Cupones bÃ¡sicos</li>
<li>âœ… CardYA digital con QR</li>
</ul>
<hr>
<h5 id="%F0%9F%A5%88-plata-nivel-medio">ğŸ¥ˆ PLATA (Nivel Medio)</h5>
<pre class="hljs"><code><div>Requisito:     5,000 - 14,999 puntos lifetime
Multiplicador: 1.25x
Color:         Plata (#C0C0C0)
Badge:         ğŸ¥ˆ PLATA
</div></code></pre>
<p><strong>Beneficios:</strong></p>
<ul>
<li>âœ… <strong>+25% puntos extra</strong> en todas las compras</li>
<li>âœ… Cupones exclusivos mensuales</li>
<li>âœ… Prioridad en rifas (2 boletos por 1)</li>
<li>âœ… Badge de Plata en perfil</li>
<li>âœ… Acceso anticipado a promociones (1 dÃ­a antes)</li>
</ul>
<hr>
<h5 id="%F0%9F%A5%87-oro-nivel-premium">ğŸ¥‡ ORO (Nivel Premium)</h5>
<pre class="hljs"><code><div>Requisito:     15,000+ puntos lifetime
Multiplicador: 1.5x
Color:         Dorado (#FFD700)
Badge:         ğŸ¥‡ ORO
</div></code></pre>
<p><strong>Beneficios:</strong></p>
<ul>
<li>âœ… <strong>+50% puntos extra</strong> en todas las compras</li>
<li>âœ… Cupones premium exclusivos</li>
<li>âœ… Rifas VIP exclusivas (premios mayores)</li>
<li>âœ… Prioridad mÃ¡xima (3 boletos por 1)</li>
<li>âœ… Badge de Oro en perfil</li>
<li>âœ… Acceso anticipado a promociones (3 dÃ­as antes)</li>
</ul>
<blockquote>
<p><strong>âš ï¸ NOTA:</strong> Los beneficios son propuestas iniciales. La decisiÃ³n final se tomarÃ¡ durante la implementaciÃ³n.</p>
</blockquote>
<hr>
<h4 id="%F0%9F%8E%A8-dise%C3%B1o-visual-cardya">ğŸ¨ DiseÃ±o Visual CardYA</h4>
<h5 id="tarjeta-por-nivel">Tarjeta por Nivel</h5>
<table>
<thead>
<tr>
<th>Nivel</th>
<th>Gradiente Tailwind</th>
<th>CaracterÃ­sticas</th>
</tr>
</thead>
<tbody>
<tr>
<td>ğŸ¥‰ Bronce</td>
<td><code>from-amber-700 via-amber-800 to-amber-900</code></td>
<td>Tonos cÃ¡lidos, sÃ³lido</td>
</tr>
<tr>
<td>ğŸ¥ˆ Plata</td>
<td><code>from-gray-300 via-gray-400 to-gray-500</code></td>
<td>PatrÃ³n puntos radiales</td>
</tr>
<tr>
<td>ğŸ¥‡ Oro</td>
<td><code>from-yellow-400 via-yellow-500 to-yellow-600</code></td>
<td>PatrÃ³n diagonal premium</td>
</tr>
</tbody>
</table>
<h5 id="estructura-visual">Estructura Visual</h5>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’³ CardYA                                    ğŸ¥ˆ PLATA      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                     â”‚             â”‚                         â”‚
â”‚                     â”‚   [QR CODE] â”‚                         â”‚
â”‚                     â”‚             â”‚                         â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚              EscanÃ©ame para acumular puntos                 â”‚
â”‚                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                             â”‚
â”‚  ğŸ‘¤ Juan PÃ©rez                                              â”‚
â”‚                                                             â”‚
â”‚  ğŸ† Multiplicador activo: 1.25x                             â”‚
â”‚                                                             â”‚
â”‚  âš¡ Siguiente nivel: ğŸ¥‡ ORO                                  â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 12,500 / 15,000 pts            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h5 id="vista-%22mis-puntos-por-negocio%22">Vista &quot;Mis Puntos por Negocio&quot;</h5>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š MIS PUNTOS POR NEGOCIO                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ• PizzerÃ­a Roma                                           â”‚
â”‚     1,250 puntos disponibles                               â”‚
â”‚     [Canjear] [Ver historial]                              â”‚
â”‚                                                             â”‚
â”‚  â˜• CafÃ© Central                                             â”‚
â”‚     890 puntos disponibles                                  â”‚
â”‚     [Canjear] [Ver historial]                              â”‚
â”‚                                                             â”‚
â”‚  ğŸ‹ï¸ Gym Fitness                                             â”‚
â”‚     450 puntos disponibles                                  â”‚
â”‚     [Canjear] [Ver historial]                              â”‚
â”‚                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ“ˆ Total lifetime: 12,500 puntos (Nivel PLATA)            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h4 id="%F0%9F%94%90-qr-din%C3%A1mico-con-expiraci%C3%B3n">ğŸ” QR DinÃ¡mico con ExpiraciÃ³n</h4>
<p><strong>Seguridad del QR:</strong></p>
<ul>
<li>QR contiene: <code>userId + timestamp + hash</code></li>
<li>Expira cada <strong>2 minutos</strong></li>
<li>Se regenera automÃ¡ticamente</li>
<li>Hash validado en backend</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment">// GeneraciÃ³n de QR seguro</span>
<span class="hljs-keyword">interface</span> QRPayload {
  usuarioId: <span class="hljs-built_in">string</span>;
  timestamp: <span class="hljs-built_in">number</span>;
  hash: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// SHA256(usuarioId + timestamp + SECRET)</span>
}

<span class="hljs-comment">// ValidaciÃ³n en ScanYA</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validarQR</span>(<span class="hljs-params">payload: QRPayload</span>): <span class="hljs-title">boolean</span> </span>{
  <span class="hljs-keyword">const</span> ahora = <span class="hljs-built_in">Date</span>.now();
  <span class="hljs-keyword">const</span> dosMinutos = <span class="hljs-number">2</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>;
  
  <span class="hljs-comment">// Verificar expiraciÃ³n</span>
  <span class="hljs-keyword">if</span> (ahora - payload.timestamp &gt; dosMinutos) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'QR expirado'</span>);
  }
  
  <span class="hljs-comment">// Verificar hash</span>
  <span class="hljs-keyword">const</span> hashEsperado = generarHash(payload.usuarioId, payload.timestamp);
  <span class="hljs-keyword">if</span> (payload.hash !== hashEsperado) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'QR invÃ¡lido'</span>);
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</div></code></pre>
<hr>
<h4 id="%F0%9F%92%BE-modelo-de-datos">ğŸ’¾ Modelo de Datos</h4>
<p><strong>Tabla: usuarios (campos CardYA)</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">-- Agregar a tabla usuarios existente</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> usuarios <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> puntos_lifetime <span class="hljs-built_in">INTEGER</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> usuarios <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> nivel_cardya <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'bronce'</span>;

<span class="hljs-comment">-- puntos_lifetime: Total histÃ³rico (NUNCA baja, solo sube)</span>
<span class="hljs-comment">-- nivel_cardya: 'bronce' | 'plata' | 'oro' (calculado automÃ¡ticamente)</span>
</div></code></pre>
<p><strong>Tabla: puntos_por_negocio</strong></p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> puntos_por_negocio (
  <span class="hljs-keyword">id</span> <span class="hljs-keyword">UUID</span> PRIMARY <span class="hljs-keyword">KEY</span> <span class="hljs-keyword">DEFAULT</span> gen_random_uuid(),
  usuario_id <span class="hljs-keyword">UUID</span> <span class="hljs-keyword">REFERENCES</span> usuarios(<span class="hljs-keyword">id</span>),
  negocio_id <span class="hljs-keyword">UUID</span> <span class="hljs-keyword">REFERENCES</span> negocios(<span class="hljs-keyword">id</span>),
  sucursal_id <span class="hljs-keyword">UUID</span> <span class="hljs-keyword">REFERENCES</span> negocio_sucursales(<span class="hljs-keyword">id</span>),
  puntos_disponibles <span class="hljs-built_in">INTEGER</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,  <span class="hljs-comment">-- Puede bajar al canjear</span>
  puntos_acumulados <span class="hljs-built_in">INTEGER</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,   <span class="hljs-comment">-- Total en este negocio</span>
  created_at <span class="hljs-built_in">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NOW</span>(),
  updated_at <span class="hljs-built_in">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NOW</span>(),
  <span class="hljs-keyword">UNIQUE</span>(usuario_id, negocio_id)
);
</div></code></pre>
<p><strong>Tabla: historial_puntos</strong></p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> historial_puntos (
  <span class="hljs-keyword">id</span> <span class="hljs-keyword">UUID</span> PRIMARY <span class="hljs-keyword">KEY</span> <span class="hljs-keyword">DEFAULT</span> gen_random_uuid(),
  usuario_id <span class="hljs-keyword">UUID</span> <span class="hljs-keyword">REFERENCES</span> usuarios(<span class="hljs-keyword">id</span>),
  negocio_id <span class="hljs-keyword">UUID</span> <span class="hljs-keyword">REFERENCES</span> negocios(<span class="hljs-keyword">id</span>),
  sucursal_id <span class="hljs-keyword">UUID</span> <span class="hljs-keyword">REFERENCES</span> negocio_sucursales(<span class="hljs-keyword">id</span>),
  tipo <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,  <span class="hljs-comment">-- 'ganado' | 'canjeado' | 'expirado'</span>
  puntos <span class="hljs-built_in">INTEGER</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
  monto_compra <span class="hljs-built_in">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>),
  multiplicador <span class="hljs-built_in">DECIMAL</span>(<span class="hljs-number">3</span>,<span class="hljs-number">2</span>),
  nivel_al_momento <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">10</span>),
  transaccion_id <span class="hljs-keyword">UUID</span>,
  descripcion <span class="hljs-built_in">TEXT</span>,
  created_at <span class="hljs-built_in">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NOW</span>()
);
</div></code></pre>
<hr>
<h4 id="%F0%9F%A7%AE-l%C3%B3gica-de-c%C3%A1lculo">ğŸ§® LÃ³gica de CÃ¡lculo</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// Calcular nivel basado en puntos lifetime</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calcularNivel</span>(<span class="hljs-params">puntosLifetime: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">NivelCardYA</span> </span>{
  <span class="hljs-keyword">if</span> (puntosLifetime &gt;= <span class="hljs-number">15000</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'oro'</span>;
  <span class="hljs-keyword">if</span> (puntosLifetime &gt;= <span class="hljs-number">5000</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'plata'</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-string">'bronce'</span>;
}

<span class="hljs-comment">// Obtener multiplicador por nivel</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getMultiplicador</span>(<span class="hljs-params">nivel: NivelCardYA</span>): <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">const</span> multiplicadores = { bronce: <span class="hljs-number">1.0</span>, plata: <span class="hljs-number">1.25</span>, oro: <span class="hljs-number">1.5</span> };
  <span class="hljs-keyword">return</span> multiplicadores[nivel];
}

<span class="hljs-comment">// Calcular progreso hacia siguiente nivel</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProgresoNivel</span>(<span class="hljs-params">puntosLifetime: <span class="hljs-built_in">number</span></span>): <span class="hljs-title">ProgresoNivel</span> </span>{
  <span class="hljs-keyword">if</span> (puntosLifetime &gt;= <span class="hljs-number">15000</span>) {
    <span class="hljs-keyword">return</span> { nivel: <span class="hljs-string">'oro'</span>, progreso: <span class="hljs-number">100</span>, siguiente: <span class="hljs-literal">null</span>, faltantes: <span class="hljs-number">0</span> };
  }
  <span class="hljs-keyword">if</span> (puntosLifetime &gt;= <span class="hljs-number">5000</span>) {
    <span class="hljs-keyword">const</span> progreso = ((puntosLifetime - <span class="hljs-number">5000</span>) / <span class="hljs-number">10000</span>) * <span class="hljs-number">100</span>;
    <span class="hljs-keyword">return</span> { 
      nivel: <span class="hljs-string">'plata'</span>, 
      progreso, 
      siguiente: <span class="hljs-string">'oro'</span>, 
      faltantes: <span class="hljs-number">15000</span> - puntosLifetime 
    };
  }
  <span class="hljs-keyword">return</span> { 
    nivel: <span class="hljs-string">'bronce'</span>, 
    progreso: (puntosLifetime / <span class="hljs-number">5000</span>) * <span class="hljs-number">100</span>, 
    siguiente: <span class="hljs-string">'plata'</span>, 
    faltantes: <span class="hljs-number">5000</span> - puntosLifetime 
  };
}
</div></code></pre>
<hr>
<h4 id="%F0%9F%93%B1-componentes-frontend">ğŸ“± Componentes Frontend</h4>
<pre class="hljs"><code><div>pages/private/cardya/
â”œâ”€â”€ PaginaCardYA.tsx              # Vista principal
â””â”€â”€ components/
    â”œâ”€â”€ TarjetaCardYA.tsx         # Card con diseÃ±o dinÃ¡mico por nivel
    â”œâ”€â”€ QRDinamico.tsx            # QR que expira en 2 min
    â”œâ”€â”€ ProgresoNivel.tsx         # Barra hacia siguiente nivel
    â”œâ”€â”€ BadgeNivel.tsx            # Badge ğŸ¥‰ğŸ¥ˆğŸ¥‡
    â”œâ”€â”€ ResumenPuntos.tsx         # Total y multiplicador
    â”œâ”€â”€ PuntosPorNegocio.tsx      # Lista de negocios con puntos
    â”œâ”€â”€ HistorialPuntos.tsx       # Timeline de movimientos
    â”œâ”€â”€ ModalCanjear.tsx          # Modal para canjear puntos
    â””â”€â”€ ListaRecompensas.tsx      # Recompensas disponibles por negocio

hooks/
â”œâ”€â”€ useCardYA.ts                  # Estado de tarjeta y puntos
â”œâ”€â”€ useQRDinamico.ts              # GeneraciÃ³n y refresh de QR
â””â”€â”€ useNivel.ts                   # CÃ¡lculo de nivel y progreso

stores/
â””â”€â”€ useCardYAStore.ts             # Estado global CardYA
</div></code></pre>
<hr>
<h4 id="%F0%9F%94%8C-endpoints-backend">ğŸ”Œ Endpoints Backend</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// GET /api/cardya/mi-tarjeta</span>
<span class="hljs-comment">// Retorna: info del usuario, nivel, puntos por negocio</span>

<span class="hljs-comment">// GET /api/cardya/qr</span>
<span class="hljs-comment">// Retorna: QR payload con hash y timestamp</span>

<span class="hljs-comment">// GET /api/cardya/puntos/:negocioId</span>
<span class="hljs-comment">// Retorna: puntos disponibles en un negocio especÃ­fico</span>

<span class="hljs-comment">// GET /api/cardya/historial</span>
<span class="hljs-comment">// Query: ?negocioId=xxx&amp;page=1&amp;limit=20</span>
<span class="hljs-comment">// Retorna: historial de movimientos</span>

<span class="hljs-comment">// POST /api/cardya/canjear</span>
<span class="hljs-comment">// Body: { negocioId, recompensaId, puntos }</span>
<span class="hljs-comment">// Retorna: cÃ³digo de canje</span>

<span class="hljs-comment">// GET /api/cardya/recompensas/:negocioId</span>
<span class="hljs-comment">// Retorna: recompensas disponibles para canjear</span>
</div></code></pre>
<hr>
<h4 id="%E2%9C%85-checklist-cardya">âœ… Checklist CardYA</h4>
<p><strong>Frontend:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox269"><label for="checkbox269">3 diseÃ±os de TarjetaCardYA (Bronce, Plata, Oro)</label></li>
<li><input type="checkbox" id="checkbox270"><label for="checkbox270">QR dinÃ¡mico con countdown de 2 min</label></li>
<li><input type="checkbox" id="checkbox271"><label for="checkbox271">Barra de progreso hacia siguiente nivel</label></li>
<li><input type="checkbox" id="checkbox272"><label for="checkbox272">Badge de nivel visible</label></li>
<li><input type="checkbox" id="checkbox273"><label for="checkbox273">Multiplicador mostrado prominentemente</label></li>
<li><input type="checkbox" id="checkbox274"><label for="checkbox274">Lista de puntos por negocio</label></li>
<li><input type="checkbox" id="checkbox275"><label for="checkbox275">Historial de movimientos</label></li>
<li><input type="checkbox" id="checkbox276"><label for="checkbox276">Modal de canje de puntos</label></li>
<li><input type="checkbox" id="checkbox277"><label for="checkbox277">NotificaciÃ³n de subida de nivel</label></li>
</ul>
<p><strong>Backend:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox278"><label for="checkbox278">MigraciÃ³n: agregar </label><code>puntos_lifetime</code>, <code>nivel_cardya</code> a usuarios</li>
<li><input type="checkbox" id="checkbox279"><label for="checkbox279">Tabla </label><code>puntos_por_negocio</code></li>
<li><input type="checkbox" id="checkbox280"><label for="checkbox280">Tabla </label><code>historial_puntos</code></li>
<li><input type="checkbox" id="checkbox281"><label for="checkbox281">Service: </label><code>calcularNivel()</code>, <code>getMultiplicador()</code></li>
<li><input type="checkbox" id="checkbox282"><label for="checkbox282">Endpoint: GET </label><code>/api/cardya/mi-tarjeta</code></li>
<li><input type="checkbox" id="checkbox283"><label for="checkbox283">Endpoint: GET </label><code>/api/cardya/qr</code></li>
<li><input type="checkbox" id="checkbox284"><label for="checkbox284">Endpoint: GET </label><code>/api/cardya/historial</code></li>
<li><input type="checkbox" id="checkbox285"><label for="checkbox285">Endpoint: POST </label><code>/api/cardya/canjear</code></li>
<li><input type="checkbox" id="checkbox286"><label for="checkbox286">Trigger: actualizar nivel automÃ¡ticamente al sumar puntos</label></li>
<li><input type="checkbox" id="checkbox287"><label for="checkbox287">NotificaciÃ³n push de subida de nivel</label></li>
</ul>
<hr>
<h3 id="561-pwa-y-widgets-descargables-%F0%9F%93%B1">5.6.1 PWA y Widgets Descargables ğŸ“±</h3>
<blockquote>
<p>La app principal y componentes clave pueden instalarse como apps independientes en el home screen.</p>
</blockquote>
<h4 id="aplicaciones-disponibles">Aplicaciones Disponibles</h4>
<table>
<thead>
<tr>
<th>App/Widget</th>
<th>DescripciÃ³n</th>
<th>Usuarios</th>
<th>Ruta</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>AnunciaYA</strong></td>
<td>App principal completa</td>
<td>Todos</td>
<td><code>/</code></td>
</tr>
<tr>
<td><strong>CardYA Widget</strong></td>
<td>Solo tarjeta y puntos</td>
<td>Modo Personal</td>
<td><code>/cardya-widget</code></td>
</tr>
<tr>
<td><strong>ScanYA Widget</strong></td>
<td>Solo punto de venta</td>
<td>Comercial + Empleados</td>
<td><code>/scanya-widget</code></td>
</tr>
</tbody>
</table>
<hr>
<h4 id="%F0%9F%93%B1-cardya-widget-usuarios">ğŸ“± CardYA Widget (Usuarios)</h4>
<p><strong>CaracterÃ­sticas:</strong></p>
<ul>
<li>App standalone ultra-ligera (~50KB)</li>
<li>Acceso directo desde home screen</li>
<li>Solo muestra:
<ul>
<li>Tarjeta CardYA con QR dinÃ¡mico</li>
<li>Puntos disponibles por negocio</li>
<li>Cupones activos</li>
<li>CÃ³digos de canje generados</li>
</ul>
</li>
<li>SincronizaciÃ³n en tiempo real</li>
<li>Funciona offline (muestra Ãºltimo estado guardado)</li>
</ul>
<p><strong>Interfaz:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’³ CARDYA                          Juan PÃ©rez ğŸ¥‡           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                   â”‚   [QR CODE] â”‚                           â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚              EscanÃ©ame para acumular puntos                 â”‚
â”‚              â±ï¸ VÃ¡lido por: 1:45                            â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š MIS PUNTOS:                                             â”‚
â”‚                                                             â”‚
â”‚  ğŸ• PizzerÃ­a Roma        1,250 pts    [Canjear]            â”‚
â”‚  â˜• CafÃ© Central           890 pts    [Canjear]            â”‚
â”‚  ğŸ‹ï¸ Gym Fitness           450 pts    [Canjear]            â”‚
â”‚                                                             â”‚
â”‚  [Ver todos]                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŸï¸ MIS CUPONES (3)                                         â”‚
â”‚                                                             â”‚
â”‚  30% dto - PizzerÃ­a Roma    [Ver QR]                       â”‚
â”‚  2x1 CafÃ©                   [Ver QR]                       â”‚
â”‚                                                             â”‚
â”‚  [Ver todos]                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  [ğŸ  Ir a app completa]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>InstalaciÃ³n:</strong></p>
<pre class="hljs"><code><div>Desde AnunciaYA:
â”œâ”€â”€ Mi Perfil â†’ ConfiguraciÃ³n â†’ Widgets
â”œâ”€â”€ &quot;Instalar CardYA en pantalla de inicio&quot;
â”œâ”€â”€ Sistema muestra diÃ¡logo PWA nativo
â””â”€â”€ Usuario confirma instalaciÃ³n

Resultado en home screen:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ’³      â”‚
â”‚   CardYA    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h4 id="%F0%9F%93%B1-scanya-widget-comerciantesempleados">ğŸ“± ScanYA Widget (Comerciantes/Empleados)</h4>
<p><strong>CaracterÃ­sticas:</strong></p>
<ul>
<li>App standalone para punto de venta</li>
<li>Acceso directo desde home screen</li>
<li>Interfaz simplificada sin navegaciÃ³n compleja</li>
<li>Login persistente (no pide credenciales cada vez)</li>
<li>Solo funciones esenciales:
<ul>
<li>Escanear QR</li>
<li>Registrar venta</li>
<li>Validar cupones</li>
<li>Ver resumen del dÃ­a</li>
</ul>
</li>
<li>Ideal para dispositivos compartidos en caja</li>
</ul>
<p><strong>Interfaz:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“± SCANYA                          @carlos - Cajero       â”‚
â”‚  ğŸª PizzerÃ­a Roma                   [Cerrar sesiÃ³n]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚              â”‚                       â”‚                      â”‚
â”‚              â”‚    [ESCANEAR QR]      â”‚                      â”‚
â”‚              â”‚                       â”‚                      â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š MI DÃA:                                                â”‚
â”‚  ğŸ’° 12 ventas â€¢ $4,580 total                               â”‚
â”‚  ğŸ¯ 458 puntos otorgados                                   â”‚
â”‚                                                             â”‚
â”‚  [Ver historial]                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸŸï¸ Validar CupÃ³n]        [ğŸ”„ Validar Canje]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  [ğŸ  Ir a Business Studio]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>InstalaciÃ³n para Empleados:</strong></p>
<pre class="hljs"><code><div>El dueÃ±o desde Business Studio:
â”œâ”€â”€ Empleados â†’ Seleccionar empleado
â”œâ”€â”€ &quot;Generar QR de instalaciÃ³n&quot;
â”œâ”€â”€ Empleado escanea el QR con su celular
â”œâ”€â”€ Se abre pÃ¡gina de instalaciÃ³n PWA
â”œâ”€â”€ Empleado instala + queda pre-autenticado
â””â”€â”€ Ãcono aparece en su home screen

Resultado:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ“±      â”‚
â”‚   ScanYA    â”‚
â”‚  @carlos    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h4 id="%F0%9F%94%A7-implementaci%C3%B3n-t%C3%A9cnica">ğŸ”§ ImplementaciÃ³n TÃ©cnica</h4>
<p><strong>Manifests PWA:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// CardYA - manifest.cardya.json</span>
{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"CardYA - Tu Tarjeta de Puntos"</span>,
  <span class="hljs-attr">"short_name"</span>: <span class="hljs-string">"CardYA"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Tu tarjeta de lealtad digital"</span>,
  <span class="hljs-attr">"start_url"</span>: <span class="hljs-string">"/cardya-widget"</span>,
  <span class="hljs-attr">"scope"</span>: <span class="hljs-string">"/cardya-widget"</span>,
  <span class="hljs-attr">"display"</span>: <span class="hljs-string">"standalone"</span>,
  <span class="hljs-attr">"orientation"</span>: <span class="hljs-string">"portrait"</span>,
  <span class="hljs-attr">"background_color"</span>: <span class="hljs-string">"#ffffff"</span>,
  <span class="hljs-attr">"theme_color"</span>: <span class="hljs-string">"#4F46E5"</span>,
  <span class="hljs-attr">"icons"</span>: [
    { <span class="hljs-attr">"src"</span>: <span class="hljs-string">"/icons/cardya-192.png"</span>, <span class="hljs-attr">"sizes"</span>: <span class="hljs-string">"192x192"</span>, <span class="hljs-attr">"type"</span>: <span class="hljs-string">"image/png"</span> },
    { <span class="hljs-attr">"src"</span>: <span class="hljs-string">"/icons/cardya-512.png"</span>, <span class="hljs-attr">"sizes"</span>: <span class="hljs-string">"512x512"</span>, <span class="hljs-attr">"type"</span>: <span class="hljs-string">"image/png"</span> }
  ]
}

<span class="hljs-comment">// ScanYA - manifest.scanya.json</span>
{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"ScanYA - Punto de Venta"</span>,
  <span class="hljs-attr">"short_name"</span>: <span class="hljs-string">"ScanYA"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Registra ventas y otorga puntos"</span>,
  <span class="hljs-attr">"start_url"</span>: <span class="hljs-string">"/scanya-widget"</span>,
  <span class="hljs-attr">"scope"</span>: <span class="hljs-string">"/scanya-widget"</span>,
  <span class="hljs-attr">"display"</span>: <span class="hljs-string">"standalone"</span>,
  <span class="hljs-attr">"orientation"</span>: <span class="hljs-string">"portrait"</span>,
  <span class="hljs-attr">"background_color"</span>: <span class="hljs-string">"#1F2937"</span>,
  <span class="hljs-attr">"theme_color"</span>: <span class="hljs-string">"#10B981"</span>,
  <span class="hljs-attr">"icons"</span>: [
    { <span class="hljs-attr">"src"</span>: <span class="hljs-string">"/icons/scanya-192.png"</span>, <span class="hljs-attr">"sizes"</span>: <span class="hljs-string">"192x192"</span>, <span class="hljs-attr">"type"</span>: <span class="hljs-string">"image/png"</span> },
    { <span class="hljs-attr">"src"</span>: <span class="hljs-string">"/icons/scanya-512.png"</span>, <span class="hljs-attr">"sizes"</span>: <span class="hljs-string">"512x512"</span>, <span class="hljs-attr">"type"</span>: <span class="hljs-string">"image/png"</span> }
  ]
}
</div></code></pre>
<p><strong>Service Worker - Offline First:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// sw-cardya.ts</span>
<span class="hljs-keyword">const</span> CACHE_NAME = <span class="hljs-string">'cardya-v1'</span>;
<span class="hljs-keyword">const</span> ASSETS = [
  <span class="hljs-string">'/cardya-widget'</span>,
  <span class="hljs-string">'/cardya-widget/qr'</span>,
  <span class="hljs-string">'/icons/cardya-192.png'</span>,
  <span class="hljs-string">'/icons/cardya-512.png'</span>
];

self.addEventListener(<span class="hljs-string">'install'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  event.waitUntil(
    caches.open(CACHE_NAME).then(<span class="hljs-function">(<span class="hljs-params">cache</span>) =&gt;</span> cache.addAll(ASSETS))
  );
});

self.addEventListener(<span class="hljs-string">'fetch'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  event.respondWith(
    caches.match(event.request).then(<span class="hljs-function">(<span class="hljs-params">cached</span>) =&gt;</span> {
      <span class="hljs-comment">// Network first, fallback to cache</span>
      <span class="hljs-keyword">return</span> fetch(event.request)
        .then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
          <span class="hljs-comment">// Actualizar cache con respuesta fresca</span>
          <span class="hljs-keyword">const</span> clone = response.clone();
          caches.open(CACHE_NAME).then(<span class="hljs-function">(<span class="hljs-params">cache</span>) =&gt;</span> cache.put(event.request, clone));
          <span class="hljs-keyword">return</span> response;
        })
        .catch(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> cached); <span class="hljs-comment">// Si falla network, usar cache</span>
    })
  );
});
</div></code></pre>
<p><strong>Deep Linking:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// Abrir app completa desde widget</span>
<span class="hljs-keyword">const</span> abrirAppCompleta = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-comment">// Intentar deep link primero</span>
  <span class="hljs-built_in">window</span>.location.href = <span class="hljs-string">'anunciaya://home'</span>;
  
  <span class="hljs-comment">// Fallback a web despuÃ©s de 500ms</span>
  setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-built_in">window</span>.location.href = <span class="hljs-string">'https://anunciaya.com'</span>;
  }, <span class="hljs-number">500</span>);
};

<span class="hljs-comment">// Abrir widget desde app</span>
<span class="hljs-keyword">const</span> abrirCardYAWidget = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-built_in">window</span>.location.href = <span class="hljs-string">'/cardya-widget'</span>;
};
</div></code></pre>
<p><strong>Rutas en Router:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// router/index.tsx</span>
<span class="hljs-keyword">const</span> widgetRoutes = [
  {
    path: <span class="hljs-string">'/cardya-widget'</span>,
    element: &lt;CardYAWidget /&gt;,
    <span class="hljs-comment">// Sin layout principal, standalone</span>
  },
  {
    path: <span class="hljs-string">'/scanya-widget'</span>,
    element: &lt;ScanYAWidget /&gt;,
    <span class="hljs-comment">// Requiere auth (empleado o dueÃ±o)</span>
  }
];
</div></code></pre>
<hr>
<h4 id="%E2%9C%85-checklist-pwa-y-widgets">âœ… Checklist PWA y Widgets</h4>
<p><strong>ConfiguraciÃ³n:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox288"><label for="checkbox288">Manifest para app principal</label></li>
<li><input type="checkbox" id="checkbox289"><label for="checkbox289">Manifest para CardYA widget</label></li>
<li><input type="checkbox" id="checkbox290"><label for="checkbox290">Manifest para ScanYA widget</label></li>
<li><input type="checkbox" id="checkbox291"><label for="checkbox291">Service workers por widget</label></li>
<li><input type="checkbox" id="checkbox292"><label for="checkbox292">Ãconos en mÃºltiples tamaÃ±os</label></li>
</ul>
<p><strong>CardYA Widget:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox293"><label for="checkbox293">Vista QR dinÃ¡mico</label></li>
<li><input type="checkbox" id="checkbox294"><label for="checkbox294">Lista de puntos por negocio</label></li>
<li><input type="checkbox" id="checkbox295"><label for="checkbox295">Lista de cupones</label></li>
<li><input type="checkbox" id="checkbox296"><label for="checkbox296">BotÃ³n &quot;Ir a app completa&quot;</label></li>
<li><input type="checkbox" id="checkbox297"><label for="checkbox297">Modo offline con datos cacheados</label></li>
</ul>
<p><strong>ScanYA Widget:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox298"><label for="checkbox298">Login empleado persistente</label></li>
<li><input type="checkbox" id="checkbox299"><label for="checkbox299">EscÃ¡ner QR</label></li>
<li><input type="checkbox" id="checkbox300"><label for="checkbox300">Registro de venta simplificado</label></li>
<li><input type="checkbox" id="checkbox301"><label for="checkbox301">Resumen del dÃ­a</label></li>
<li><input type="checkbox" id="checkbox302"><label for="checkbox302">BotÃ³n &quot;Ir a Business Studio&quot;</label></li>
<li><input type="checkbox" id="checkbox303"><label for="checkbox303">QR de instalaciÃ³n para empleados</label></li>
</ul>
<p><strong>General:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox304"><label for="checkbox304">Deep linking entre apps</label></li>
<li><input type="checkbox" id="checkbox305"><label for="checkbox305">DetecciÃ³n de instalaciÃ³n PWA</label></li>
<li><input type="checkbox" id="checkbox306"><label for="checkbox306">Prompt de instalaciÃ³n personalizado</label></li>
<li><input type="checkbox" id="checkbox307"><label for="checkbox307">ActualizaciÃ³n automÃ¡tica de service worker</label></li>
</ul>
<hr>
<h3 id="510-chatya-completo---octavo-%E2%8F%B3-pendiente">5.10 ChatYA Completo - OCTAVO â³ PENDIENTE</h3>
<table>
<thead>
<tr>
<th>Elemento</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>PosiciÃ³n</strong></td>
<td>Overlay persistente, minimizable (solo PC)</td>
</tr>
<tr>
<td><strong>TecnologÃ­a</strong></td>
<td>Socket.io + MongoDB + WebRTC</td>
</tr>
<tr>
<td><strong>Historial</strong></td>
<td>Unificado por usuario (ambos modos)</td>
</tr>
<tr>
<td><strong>Persistencia</strong></td>
<td>Recuerda posiciÃ³n de cierre</td>
</tr>
</tbody>
</table>
<h4 id="comportamiento-por-modo">Comportamiento por Modo</h4>
<table>
<thead>
<tr>
<th>Modo Activo</th>
<th>Usuario se muestra como</th>
</tr>
</thead>
<tbody>
<tr>
<td>Personal</td>
<td>Nombre personal + avatar</td>
</tr>
<tr>
<td>Comercial</td>
<td>Nombre negocio + logo</td>
</tr>
</tbody>
</table>
<h4 id="funcionalidades-core">Funcionalidades Core</h4>
<p><strong>MensajerÃ­a:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox308"><label for="checkbox308">Mensajes en tiempo real (Socket.io)</label></li>
<li><input type="checkbox" id="checkbox309"><label for="checkbox309">Estados: enviado â†’ entregado â†’ leÃ­do</label></li>
<li><input type="checkbox" id="checkbox310"><label for="checkbox310">Responder mensajes (reply)</label></li>
<li><input type="checkbox" id="checkbox311"><label for="checkbox311">Reenviar mensajes</label></li>
<li><input type="checkbox" id="checkbox312"><label for="checkbox312">Mensajes fijados</label></li>
<li><input type="checkbox" id="checkbox313"><label for="checkbox313">Buscar en conversaciÃ³n</label></li>
</ul>
<p><strong>Multimedia:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox314"><label for="checkbox314">Enviar imÃ¡genes (upload optimista a Cloudinary)</label></li>
<li><input type="checkbox" id="checkbox315"><label for="checkbox315">PrevisualizaciÃ³n de imÃ¡genes en input antes de enviar</label></li>
<li><input type="checkbox" id="checkbox316"><label for="checkbox316">EnvÃ­o optimista sin retrasos (imagen se muestra inmediatamente)</label></li>
<li><input type="checkbox" id="checkbox317"><label for="checkbox317">Enviar audios</label></li>
<li><input type="checkbox" id="checkbox318"><label for="checkbox318">Video llamadas (WebRTC)</label></li>
<li><input type="checkbox" id="checkbox319"><label for="checkbox319">Llamadas de voz (WebRTC)</label></li>
</ul>
<p><strong>OrganizaciÃ³n:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox320"><label for="checkbox320">Lista de conversaciones</label></li>
<li><input type="checkbox" id="checkbox321"><label for="checkbox321">Chats fijados</label></li>
<li><input type="checkbox" id="checkbox322"><label for="checkbox322">Agregar a contactos</label></li>
<li><input type="checkbox" id="checkbox323"><label for="checkbox323">Notas personales (como WhatsApp)</label></li>
<li><input type="checkbox" id="checkbox324"><label for="checkbox324">Filtrado de mensajes segÃºn secciÃ³n de contacto</label></li>
<li><input type="checkbox" id="checkbox325"><label for="checkbox325">Buscar usuarios y negocios</label></li>
</ul>
<p><strong>Notificaciones:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox326"><label for="checkbox326">Badge de mensajes no leÃ­dos</label></li>
<li><input type="checkbox" id="checkbox327"><label for="checkbox327">Sonidos de llegada de mensajes</label></li>
<li><input type="checkbox" id="checkbox328"><label for="checkbox328">Vibraciones (vista mÃ³vil)</label></li>
<li><input type="checkbox" id="checkbox329"><label for="checkbox329">Notificaciones push</label></li>
</ul>
<p><strong>Contexto por SecciÃ³n:</strong></p>
<pre class="hljs"><code><div>Usuario contacta desde:
â”œâ”€â”€ /negocios â†’ &quot;Hola, vi tu negocio en el directorio&quot;
â”œâ”€â”€ /marketplace â†’ &quot;Hola, me interesa tu publicaciÃ³n: [tÃ­tulo]&quot;
â”œâ”€â”€ /ofertas â†’ &quot;Hola, vi tu oferta: [nombre oferta]&quot;
â”œâ”€â”€ /empleos â†’ &quot;Hola, me interesa la vacante: [puesto]&quot;
â””â”€â”€ /dinamicas â†’ &quot;Hola, quiero info sobre: [rifa/sorteo]&quot;
</div></code></pre>
<h4 id="perfil-de-usuario-en-chat">Perfil de Usuario en Chat</h4>
<p><strong>Vista Personal:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox330"><label for="checkbox330">Nombre</label></li>
<li><input type="checkbox" id="checkbox331"><label for="checkbox331">Foto de perfil</label></li>
<li><input type="checkbox" id="checkbox332"><label for="checkbox332">Rating promedio</label></li>
<li><input type="checkbox" id="checkbox333"><label for="checkbox333">InformaciÃ³n bÃ¡sica</label></li>
</ul>
<p><strong>Vista Comercial (Negocio):</strong></p>
<ul>
<li><input type="checkbox" id="checkbox334"><label for="checkbox334">Nombre del negocio</label></li>
<li><input type="checkbox" id="checkbox335"><label for="checkbox335">Logo</label></li>
<li><input type="checkbox" id="checkbox336"><label for="checkbox336">Rating promedio</label></li>
<li><input type="checkbox" id="checkbox337"><label for="checkbox337">CatÃ¡logo de productos</label></li>
<li><input type="checkbox" id="checkbox338"><label for="checkbox338">CatÃ¡logo de servicios</label></li>
<li><input type="checkbox" id="checkbox339"><label for="checkbox339">Horarios de atenciÃ³n</label></li>
<li><input type="checkbox" id="checkbox340"><label for="checkbox340">Direcciones (mÃºltiples sucursales)</label></li>
<li><input type="checkbox" id="checkbox341"><label for="checkbox341">Mapa &quot;CÃ³mo llegar&quot; (Leaflet)</label></li>
<li><input type="checkbox" id="checkbox342"><label for="checkbox342">InformaciÃ³n detallada del negocio</label></li>
</ul>
<h4 id="sistema-de-calificaciones-en-chat">Sistema de Calificaciones en Chat</h4>
<p><strong>Comerciante puede calificar a Usuario (OPCIONAL):</strong></p>
<pre class="hljs"><code><div>Desde el perfil del usuario en el chat:
â”œâ”€â”€ Comerciante deja calificaciÃ³n (1-5 estrellas)
â”œâ”€â”€ Comerciante deja reseÃ±a (texto opcional)
â”œâ”€â”€ Usuario puede ver calificaciÃ³n recibida
â””â”€â”€ Usuario puede ver reseÃ±a que le pusieron
</div></code></pre>
<p><strong>ValidaciÃ³n:</strong></p>
<ul>
<li>Solo comerciantes pueden calificar usuarios</li>
<li>Solo si tuvieron interacciÃ³n (pedido/chat)</li>
<li>Es completamente opcional</li>
<li>Usuario debe poder ver su historial de calificaciones</li>
</ul>
<h4 id="componentes">Componentes</h4>
<pre class="hljs"><code><div>components/chat/
â”œâ”€â”€ ChatOverlay.tsx              # Contenedor principal
â”œâ”€â”€ ListaConversaciones.tsx      # Sidebar con chats
â”œâ”€â”€ Conversacion.tsx             # Ventana de chat activa
â”œâ”€â”€ MensajeBurbuja.tsx           # Mensaje individual
â”œâ”€â”€ InputMensaje.tsx             # Input con preview
â”œâ”€â”€ EstadoConexion.tsx           # Indicador online/offline
â”œâ”€â”€ PreviewImagen.tsx            # Preview antes de enviar
â”œâ”€â”€ MensajeFijado.tsx            # Mensaje pinneado
â”œâ”€â”€ PerfilUsuario.tsx            # Perfil en chat
â”œâ”€â”€ PerfilNegocio.tsx            # Perfil negocio con catÃ¡logo
â”œâ”€â”€ CalificacionUsuario.tsx      # Calificar usuario (comerciante)
â”œâ”€â”€ NotasPersonales.tsx          # Notas estilo WhatsApp
â”œâ”€â”€ BuscadorChats.tsx            # Buscar mensajes/usuarios
â”œâ”€â”€ VideoLlamada.tsx             # Interfaz video llamada
â””â”€â”€ LlamadaVoz.tsx               # Interfaz llamada voz
</div></code></pre>
<h4 id="flujo-de-upload-optimista">Flujo de Upload Optimista</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// 1. Usuario selecciona imagen</span>
<span class="hljs-keyword">const</span> handleSelectImage = <span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {
  <span class="hljs-comment">// Preview inmediato</span>
  <span class="hljs-keyword">const</span> preview = URL.createObjectURL(file);
  setImagePreview(preview);
};

<span class="hljs-comment">// 2. Usuario envÃ­a</span>
<span class="hljs-keyword">const</span> handleSend = <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> tempId = generateTempId();
  
  <span class="hljs-comment">// Mostrar mensaje inmediatamente</span>
  addMessage({
    <span class="hljs-attr">id</span>: tempId,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'image'</span>,
    <span class="hljs-attr">url</span>: imagePreview, <span class="hljs-comment">// URL temporal local</span>
    <span class="hljs-attr">status</span>: <span class="hljs-string">'uploading'</span>
  });
  
  <span class="hljs-comment">// Upload a Cloudinary en background</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> cloudinaryUrl = <span class="hljs-keyword">await</span> uploadToCloudinary(file);
    
    <span class="hljs-comment">// Actualizar con URL real</span>
    updateMessage(tempId, {
      <span class="hljs-attr">url</span>: cloudinaryUrl,
      <span class="hljs-attr">status</span>: <span class="hljs-string">'sent'</span>
    });
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// Marcar como error, permitir reintentar</span>
    updateMessage(tempId, { <span class="hljs-attr">status</span>: <span class="hljs-string">'error'</span> });
  }
};
</div></code></pre>
<h4 id="estado-del-chat">Estado del Chat</h4>
<p><strong>Desktop:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox343"><label for="checkbox343">Overlay persistente (no se cierra al navegar)</label></li>
<li><input type="checkbox" id="checkbox344"><label for="checkbox344">Puede minimizarse</label></li>
<li><input type="checkbox" id="checkbox345"><label for="checkbox345">Recuerda posiciÃ³n de Ãºltima vez</label></li>
<li><input type="checkbox" id="checkbox346"><label for="checkbox346">Recuerda si estaba minimizado/maximizado</label></li>
</ul>
<p><strong>Mobile:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox347"><label for="checkbox347">Pantalla completa</label></li>
<li><input type="checkbox" id="checkbox348"><label for="checkbox348">Push notifications</label></li>
<li><input type="checkbox" id="checkbox349"><label for="checkbox349">Vibraciones</label></li>
</ul>
<hr>
<h3 id="511-cuponera-digital-mis-cupones---sexto">5.11 Cuponera Digital (<code>/mis-cupones</code>) - SEXTO</h3>
<table>
<thead>
<tr>
<th>Elemento</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>FunciÃ³n</strong></td>
<td>Zona centralizada de cupones guardados</td>
</tr>
<tr>
<td><strong>QuiÃ©n usa</strong></td>
<td>Usuarios en modo Personal</td>
</tr>
<tr>
<td><strong>Ruta</strong></td>
<td><code>/mis-cupones</code></td>
</tr>
</tbody>
</table>
<hr>
<h4 id="%F0%9F%93%8A-diferencia-ofertas-vs-cupones">ğŸ“Š Diferencia: Ofertas vs Cupones</h4>
<table>
<thead>
<tr>
<th>Aspecto</th>
<th>Ofertas (<code>/ofertas</code>)</th>
<th>Cupones (<code>/mis-cupones</code>)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Vencimiento</strong></td>
<td>Sin fecha / permanente</td>
<td>Fecha especÃ­fica</td>
</tr>
<tr>
<td><strong>Usos</strong></td>
<td>MÃºltiples, ilimitado</td>
<td>1 vez por cliente</td>
</tr>
<tr>
<td><strong>Ejemplo</strong></td>
<td>&quot;2x1 pizzas todos los martes&quot;</td>
<td>&quot;30% descuento - solo 20-25 Dic&quot;</td>
</tr>
<tr>
<td><strong>PropÃ³sito</strong></td>
<td>Promociones regulares</td>
<td>Eventos especiales</td>
</tr>
<tr>
<td><strong>Origen</strong></td>
<td>Negocio crea en Studio</td>
<td>Negocio envÃ­a a clientes</td>
</tr>
<tr>
<td><strong>Visibilidad</strong></td>
<td>PÃºblica para todos</td>
<td>Personal (guardados)</td>
</tr>
<tr>
<td><strong>Canje</strong></td>
<td>Mostrar en negocio</td>
<td>Escanear QR Ãºnico</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="%F0%9F%93%8D-ubicaci%C3%B3n-en-ui">ğŸ“ UbicaciÃ³n en UI</h4>
<p><strong>Columna Izquierda (Desktop):</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CardYA         VIP     â”‚
â”‚  1250 puntos            â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 1500        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŸï¸ Mis Cupones    (3)  â”‚ â† Badge con cantidad
â”‚  âš¡ Por Vencer     (2)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ‘¤ Mi Perfil       â€º   â”‚
â”‚  â¤ï¸ Favoritos       â€º   â”‚
â”‚  ğŸ“ Mis Publicaciones â€º â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h4 id="%F0%9F%8E%9F%EF%B8%8F-estructura-de-la-cuponera">ğŸŸï¸ Estructura de la Cuponera</h4>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŸï¸ Mis Cupones                            (3)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Vigentes]  [Usados]  [Expirados]              â”‚ â† Filtros
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ• 30% en Pizza Grande                 â”‚     â”‚
â”‚  â”‚ PizzerÃ­a Don Pepe                      â”‚     â”‚
â”‚  â”‚ â° Expira: 25 Dic 2024 (3 dÃ­as)        â”‚     â”‚
â”‚  â”‚ ğŸ“‹ MÃ­nimo compra $150                  â”‚     â”‚
â”‚  â”‚ ğŸ”¢ CÃ³digo: PIZZA30                     â”‚     â”‚
â”‚  â”‚              [Ver QR] [Usar]           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ $100 de descuento                   â”‚     â”‚
â”‚  â”‚ Tienda Deportiva XYZ                   â”‚     â”‚
â”‚  â”‚ â° Expira: MAÃ‘ANA âš ï¸                   â”‚     â”‚ â† Alerta urgencia
â”‚  â”‚ ğŸ“‹ Compra mÃ­nima $500                  â”‚     â”‚
â”‚  â”‚              [Ver QR] [Usar]           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h4 id="%F0%9F%94%94-notificaciones-de-cupones">ğŸ”” Notificaciones de Cupones</h4>
<table>
<thead>
<tr>
<th>Trigger</th>
<th>NotificaciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td>CupÃ³n nuevo recibido</td>
<td>&quot;ğŸŸï¸ Â¡Nuevo cupÃ³n! 30% en Pizza de Don Pepe&quot;</td>
</tr>
<tr>
<td>3 dÃ­as antes de expirar</td>
<td>&quot;â° Tu cupÃ³n de CafÃ© Central expira en 3 dÃ­as&quot;</td>
</tr>
<tr>
<td>1 dÃ­a antes de expirar</td>
<td>&quot;âš ï¸ Â¡Ãšltimo dÃ­a! Tu cupÃ³n de $100 expira maÃ±ana&quot;</td>
</tr>
<tr>
<td>CupÃ³n usado</td>
<td>&quot;âœ… CupÃ³n canjeado exitosamente&quot;</td>
</tr>
<tr>
<td>CupÃ³n expirado</td>
<td>&quot;âŒ Tu cupÃ³n de PizzerÃ­a ha expirado&quot;</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="%F0%9F%92%BE-tablas-involucradas">ğŸ’¾ Tablas Involucradas</h4>
<table>
<thead>
<tr>
<th>Tabla</th>
<th>PropÃ³sito</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cupones</code></td>
<td>CatÃ¡logo de cupones creados por negocios</td>
</tr>
<tr>
<td><code>cupon_usuarios</code></td>
<td>Cupones guardados/asignados por usuario</td>
</tr>
<tr>
<td><code>cupon_usos</code></td>
<td>Historial de canjes realizados</td>
</tr>
<tr>
<td><code>cupon_galeria</code></td>
<td>ImÃ¡genes del cupÃ³n (opcional)</td>
</tr>
</tbody>
</table>
<p><strong>Estructura cupon_usuarios:</strong></p>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> cupon_usuarios (
  <span class="hljs-keyword">id</span> <span class="hljs-keyword">UUID</span> PRIMARY <span class="hljs-keyword">KEY</span>,
  cupon_id <span class="hljs-keyword">UUID</span> <span class="hljs-keyword">REFERENCES</span> cupones(<span class="hljs-keyword">id</span>),
  usuario_id <span class="hljs-keyword">UUID</span> <span class="hljs-keyword">REFERENCES</span> usuarios(<span class="hljs-keyword">id</span>),
  estado <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'activo'</span>, <span class="hljs-comment">-- activo, usado, expirado</span>
  codigo_unico <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>),
  fecha_guardado <span class="hljs-built_in">TIMESTAMP</span>,
  fecha_usado <span class="hljs-built_in">TIMESTAMP</span>,
  <span class="hljs-keyword">UNIQUE</span>(cupon_id, usuario_id)
);
</div></code></pre>
<hr>
<h4 id="%F0%9F%93%B1-componentes-frontend-cuponera">ğŸ“± Componentes Frontend Cuponera</h4>
<pre class="hljs"><code><div>pages/private/cupones/
â”œâ”€â”€ PaginaMisCupones.tsx          # Lista principal
â”œâ”€â”€ PaginaCuponDetalle.tsx        # Modal/pÃ¡gina detalle
â””â”€â”€ components/
    â”œâ”€â”€ TarjetaCupon.tsx          # Card del cupÃ³n
    â”œâ”€â”€ FiltrosCupones.tsx        # Vigentes/Usados/Expirados
    â”œâ”€â”€ QRCupon.tsx               # QR para canjear
    â”œâ”€â”€ ContadorExpiracion.tsx    # Countdown
    â”œâ”€â”€ CondicionesCupon.tsx      # Lista de condiciones
    â””â”€â”€ HistorialCupones.tsx      # Cupones usados
</div></code></pre>
<hr>
<h4 id="%F0%9F%94%97-integraci%C3%B3n-con-niveles-cardya">ğŸ”— IntegraciÃ³n con Niveles CardYA</h4>
<table>
<thead>
<tr>
<th>Nivel</th>
<th>Beneficio en Cupones</th>
</tr>
</thead>
<tbody>
<tr>
<td>ğŸ¥‰ Bronce</td>
<td>Cupones bÃ¡sicos pÃºblicos</td>
</tr>
<tr>
<td>ğŸ¥ˆ Plata</td>
<td>Cupones exclusivos mensuales</td>
</tr>
<tr>
<td>ğŸ¥‡ Oro</td>
<td>Cupones premium + acceso anticipado</td>
</tr>
</tbody>
</table>
<pre class="hljs"><code><div><span class="hljs-keyword">async</span> obtenerCuponesDisponibles(usuarioId: <span class="hljs-built_in">string</span>) {
  <span class="hljs-keyword">const</span> usuario = <span class="hljs-keyword">await</span> Usuario.findById(usuarioId);
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> Cupon.find({
    $or: [
      { nivel_requerido: <span class="hljs-literal">null</span> },
      { nivel_requerido: usuario.nivel_cardya },
      { nivel_requerido: { $lt: getNivelNumero(usuario.nivel_cardya) }}
    ]
  });
}
</div></code></pre>
<hr>
<h4 id="%F0%9F%8E%AF-flujo-de-uso-cupones">ğŸ¯ Flujo de Uso Cupones</h4>
<pre class="hljs"><code><div>1. Usuario recibe cupÃ³n
   â””â”€â”€ Negocio envÃ­a cupÃ³n especÃ­fico
   â””â”€â”€ O usuario guarda desde secciÃ³n Ofertas

2. Usuario va a &quot;Mis Cupones&quot;
   â””â”€â”€ Ve lista de cupones vigentes
   â””â”€â”€ Countdown de expiraciÃ³n visible

3. Usuario en el negocio
   â””â”€â”€ Abre cupÃ³n â†’ Muestra QR
   â””â”€â”€ Empleado escanea con ScanYA
   â””â”€â”€ CupÃ³n marcado como &quot;Usado&quot;

4. Post-canje
   â””â”€â”€ CupÃ³n pasa a &quot;Usados&quot;
   â””â”€â”€ Se registra en historial
</div></code></pre>
<hr>
<h4 id="%E2%9C%85-checklist-cuponera">âœ… Checklist Cuponera</h4>
<p><strong>BÃ¡sicas:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox350"><label for="checkbox350">Lista de cupones guardados</label></li>
<li><input type="checkbox" id="checkbox351"><label for="checkbox351">Filtrar: Vigentes / Usados / Expirados</label></li>
<li><input type="checkbox" id="checkbox352"><label for="checkbox352">Ver condiciones de canje</label></li>
<li><input type="checkbox" id="checkbox353"><label for="checkbox353">Fecha de expiraciÃ³n con countdown</label></li>
<li><input type="checkbox" id="checkbox354"><label for="checkbox354">Generar cÃ³digo QR para canjear</label></li>
<li><input type="checkbox" id="checkbox355"><label for="checkbox355">Marcar cupÃ³n como &quot;Usado&quot;</label></li>
</ul>
<p><strong>Notificaciones:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox356"><label for="checkbox356">Push &quot;Tu cupÃ³n expira maÃ±ana&quot;</label></li>
<li><input type="checkbox" id="checkbox357"><label for="checkbox357">Badge en menÃº con cantidad vigentes</label></li>
<li><input type="checkbox" id="checkbox358"><label for="checkbox358">Alerta visual en prÃ³ximos a expirar</label></li>
</ul>
<p><strong>Historial:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox359"><label for="checkbox359">Ver cupones usados anteriormente</label></li>
<li><input type="checkbox" id="checkbox360"><label for="checkbox360">Fecha y lugar de canje</label></li>
<li><input type="checkbox" id="checkbox361"><label for="checkbox361">Ahorro total acumulado</label></li>
</ul>
<hr>
<h3 id="60-ofertas-publicas-ofertas-%E2%8F%B3-pendiente">6.0 Ofertas Publicas (<code>/ofertas</code>) â³ PENDIENTE</h3>
<table>
<thead>
<tr>
<th>Elemento</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>FunciÃ³n</strong></td>
<td>Promociones permanentes/recurrentes de negocios</td>
</tr>
<tr>
<td><strong>QuiÃ©n publica</strong></td>
<td>Usuarios en modo Comercial (via Business Studio)</td>
</tr>
<tr>
<td><strong>QuiÃ©n ve</strong></td>
<td>Todos (ambos modos)</td>
</tr>
<tr>
<td><strong>GeolocalizaciÃ³n</strong></td>
<td>âœ… Ofertas cercanas</td>
</tr>
</tbody>
</table>
<h4 id="tipos-de-ofertas">Tipos de Ofertas</h4>
<table>
<thead>
<tr>
<th>Tipo</th>
<th>DescripciÃ³n</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td>Descuento %</td>
<td>Porcentaje de descuento</td>
<td>&quot;20% en toda la tienda&quot;</td>
</tr>
<tr>
<td>Descuento $</td>
<td>Cantidad fija</td>
<td>&quot;$100 de descuento&quot;</td>
</tr>
<tr>
<td>2x1</td>
<td>Dos por uno</td>
<td>&quot;2x1 en hamburguesas&quot;</td>
</tr>
<tr>
<td>Combo</td>
<td>Paquete especial</td>
<td>&quot;Combo familiar $299&quot;</td>
</tr>
<tr>
<td>Happy Hour</td>
<td>Horario especÃ­fico</td>
<td>&quot;50% de 3-6pm&quot;</td>
</tr>
<tr>
<td>DÃ­a especial</td>
<td>DÃ­a de la semana</td>
<td>&quot;Martes de tacos $15&quot;</td>
</tr>
</tbody>
</table>
<h4 id="componentes">Componentes</h4>
<pre class="hljs"><code><div>pages/private/ofertas/
â”œâ”€â”€ PaginaOfertas.tsx             # Feed de ofertas
â”œâ”€â”€ PaginaOfertaDetalle.tsx       # Detalle completo
â””â”€â”€ components/
    â”œâ”€â”€ TarjetaOferta.tsx         # Card de la oferta
    â”œâ”€â”€ FiltrosOfertas.tsx        # CategorÃ­a, tipo, distancia
    â”œâ”€â”€ BadgeTipoOferta.tsx       # 2x1, %, $, etc.
    â”œâ”€â”€ HorarioOferta.tsx         # CuÃ¡ndo aplica
    â”œâ”€â”€ CondicionesOferta.tsx     # Restricciones
    â”œâ”€â”€ BotonGuardarCupon.tsx     # Convertir a cupÃ³n personal
    â””â”€â”€ MapaOfertas.tsx           # Ver en mapa
</div></code></pre>
<h4 id="funcionalidades">Funcionalidades</h4>
<ul>
<li><input type="checkbox" id="checkbox362"><label for="checkbox362">Feed de ofertas cercanas (geolocalizaciÃ³n)</label></li>
<li><input type="checkbox" id="checkbox363"><label for="checkbox363">Filtros: categorÃ­a, tipo de oferta, distancia</label></li>
<li><input type="checkbox" id="checkbox364"><label for="checkbox364">BÃºsqueda por texto</label></li>
<li><input type="checkbox" id="checkbox365"><label for="checkbox365">Ver detalle completo (condiciones, horarios)</label></li>
<li><input type="checkbox" id="checkbox366"><label for="checkbox366">Guardar como cupÃ³n personal</label></li>
<li><input type="checkbox" id="checkbox367"><label for="checkbox367">Ver ubicaciÃ³n en mapa</label></li>
<li><input type="checkbox" id="checkbox368"><label for="checkbox368">Compartir oferta</label></li>
<li><input type="checkbox" id="checkbox369"><label for="checkbox369">&quot;CÃ³mo llegar&quot; (navegaciÃ³n)</label></li>
<li><input type="checkbox" id="checkbox370"><label for="checkbox370">Contactar negocio â†’ ChatYA</label></li>
</ul>
<h4 id="estructura-de-una-oferta">Estructura de una Oferta</h4>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”¥ 2x1 EN PIZZAS GRANDES                                  â”‚
â”‚  ğŸ“ PizzerÃ­a Don Pepe â€¢ 0.8 km                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ·ï¸ Tipo: 2x1                                              â”‚
â”‚  ğŸ“… VÃ¡lido: Todos los martes                               â”‚
â”‚  ğŸ• Horario: 12:00 PM - 10:00 PM                           â”‚
â”‚  ğŸ“‹ Condiciones:                                           â”‚
â”‚     â€¢ Aplica en pizzas grandes                             â”‚
â”‚     â€¢ Consumo en local o para llevar                       â”‚
â”‚     â€¢ No acumulable con otras promociones                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ’¾ Guardar] [ğŸ“ CÃ³mo llegar] [ğŸ’¬ Contactar]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h3 id="61-marketplace-marketplace-%E2%8F%B3-pendiente">6.1 MarketPlace (<code>/marketplace</code>) â³ PENDIENTE</h3>
<table>
<thead>
<tr>
<th>Elemento</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>FunciÃ³n</strong></td>
<td>Compra-venta entre usuarios (estilo Facebook Marketplace)</td>
</tr>
<tr>
<td><strong>QuiÃ©n publica</strong></td>
<td>Solo usuarios en modo Personal</td>
</tr>
<tr>
<td><strong>QuiÃ©n ve</strong></td>
<td>Todos los usuarios (Personal y Comercial)</td>
</tr>
<tr>
<td><strong>QuiÃ©n compra</strong></td>
<td>Todos los usuarios (Personal y Comercial)</td>
</tr>
<tr>
<td><strong>GeolocalizaciÃ³n</strong></td>
<td>âœ… Filtrar por ciudad/distancia</td>
</tr>
</tbody>
</table>
<p><strong>RestricciÃ³n:</strong> Modo Comercial puede VER y COMPRAR, pero NO puede PUBLICAR artÃ­culos.</p>
<h4 id="tipos-de-publicaciones">Tipos de Publicaciones</h4>
<table>
<thead>
<tr>
<th>Tipo</th>
<th>DescripciÃ³n</th>
<th>Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td>Venta</td>
<td>ArtÃ­culo a precio fijo</td>
<td>&quot;Vendo iPhone 12 - $8,000&quot;</td>
</tr>
<tr>
<td>Gratis</td>
<td>DonaciÃ³n/regalo</td>
<td>&quot;Regalo sofÃ¡, recoger en casa&quot;</td>
</tr>
<tr>
<td>Intercambio</td>
<td>Trueque</td>
<td>&quot;Cambio PS4 por bicicleta&quot;</td>
</tr>
</tbody>
</table>
<h4 id="categor%C3%ADas-del-marketplace">CategorÃ­as del Marketplace</h4>
<pre class="hljs"><code><div>ElectrÃ³nica | VehÃ­culos | Hogar | Moda | Deportes | NiÃ±os | Mascotas | Otros
</div></code></pre>
<h4 id="%F0%9F%9A%97-secci%C3%B3n-exclusiva-veh%C3%ADculos">ğŸš— SecciÃ³n Exclusiva: VehÃ­culos</h4>
<p><strong>Ruta:</strong> <code>/marketplace/vehiculos</code></p>
<p>Esta categorÃ­a tiene campos especiales debido a la naturaleza de la compra-venta de vehÃ­culos:</p>
<p><strong>Campos Adicionales Obligatorios:</strong></p>
<table>
<thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tipo de vehÃ­culo</td>
<td>Select</td>
<td>Auto, Moto, Camioneta, CamiÃ³n, etc.</td>
</tr>
<tr>
<td>Marca</td>
<td>String</td>
<td>Honda, Toyota, Nissan, etc.</td>
</tr>
<tr>
<td>Modelo</td>
<td>String</td>
<td>Civic, Corolla, etc.</td>
</tr>
<tr>
<td>AÃ±o</td>
<td>Number</td>
<td>2010-2025</td>
</tr>
<tr>
<td>Kilometraje</td>
<td>Number</td>
<td>KilÃ³metros recorridos</td>
</tr>
<tr>
<td>TransmisiÃ³n</td>
<td>Select</td>
<td>Manual, AutomÃ¡tica</td>
</tr>
<tr>
<td>Combustible</td>
<td>Select</td>
<td>Gasolina, DiÃ©sel, ElÃ©ctrico, HÃ­brido</td>
</tr>
<tr>
<td>Color</td>
<td>String</td>
<td>Color del vehÃ­culo</td>
</tr>
<tr>
<td>Placas al corriente</td>
<td>Boolean</td>
<td>SÃ­/No</td>
</tr>
</tbody>
</table>
<p><strong>Campos Opcionales:</strong></p>
<table>
<thead>
<tr>
<th>Campo</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td>NÃºmero de puertas</td>
<td>2, 4, 5</td>
</tr>
<tr>
<td>VersiÃ³n</td>
<td>EX, LX, Sport, etc.</td>
</tr>
<tr>
<td>Cilindros</td>
<td>4, 6, 8</td>
</tr>
<tr>
<td>NÃºmero de serie</td>
<td>VIN</td>
</tr>
<tr>
<td>Factura original</td>
<td>SÃ­/No</td>
</tr>
<tr>
<td>Ãšnico dueÃ±o</td>
<td>SÃ­/No</td>
</tr>
<tr>
<td>Servicios en agencia</td>
<td>SÃ­/No</td>
</tr>
</tbody>
</table>
<p><strong>Filtros EspecÃ­ficos:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox371"><label for="checkbox371">Por marca</label></li>
<li><input type="checkbox" id="checkbox372"><label for="checkbox372">Por aÃ±o (rango)</label></li>
<li><input type="checkbox" id="checkbox373"><label for="checkbox373">Por kilometraje (rango)</label></li>
<li><input type="checkbox" id="checkbox374"><label for="checkbox374">Por precio (rango)</label></li>
<li><input type="checkbox" id="checkbox375"><label for="checkbox375">Por transmisiÃ³n</label></li>
<li><input type="checkbox" id="checkbox376"><label for="checkbox376">Por combustible</label></li>
<li><input type="checkbox" id="checkbox377"><label for="checkbox377">Por tipo de vehÃ­culo</label></li>
</ul>
<p><strong>Componente Especial:</strong></p>
<pre class="hljs"><code><div>pages/private/marketplace/vehiculos/
â”œâ”€â”€ PaginaVehiculos.tsx           # Feed de vehÃ­culos
â”œâ”€â”€ PaginaVehiculoDetalle.tsx     # Ficha tÃ©cnica completa
â”œâ”€â”€ PaginaCrearVehiculo.tsx       # Formulario especializado
â””â”€â”€ components/
    â”œâ”€â”€ TarjetaVehiculo.tsx       # Card con datos especÃ­ficos
    â”œâ”€â”€ FiltrosVehiculos.tsx      # Filtros especializados
    â”œâ”€â”€ FichaTecnica.tsx          # Especificaciones completas
    â””â”€â”€ ComparadorVehiculos.tsx   # Comparar hasta 3 vehÃ­culos
</div></code></pre>
<p><strong>Validaciones Especiales:</strong></p>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> ValidacionVehiculo {
  aÃ±o: <span class="hljs-built_in">number</span>;              <span class="hljs-comment">// Entre 1990 y aÃ±o actual + 1</span>
  kilometraje: <span class="hljs-built_in">number</span>;      <span class="hljs-comment">// Mayor a 0</span>
  precio: <span class="hljs-built_in">number</span>;           <span class="hljs-comment">// Mayor a 0</span>
  imagenes: <span class="hljs-built_in">string</span>[];       <span class="hljs-comment">// MÃ­nimo 3, mÃ¡ximo 10</span>
  marca: <span class="hljs-built_in">string</span>;            <span class="hljs-comment">// Obligatorio</span>
  modelo: <span class="hljs-built_in">string</span>;           <span class="hljs-comment">// Obligatorio</span>
  placasAlCorriente: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// Obligatorio</span>
}
</div></code></pre>
<p><strong>Vista de Tarjeta de VehÃ­culo:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Foto principal del vehÃ­culo]                      â”‚
â”‚  ğŸ“¸ +7 fotos                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸš— Honda Civic EX 2018                             â”‚
â”‚  ğŸ’° $185,000                                         â”‚
â”‚  ğŸ“Š 45,000 km | âš™ï¸ AutomÃ¡tica | â›½ Gasolina         â”‚
â”‚  âœ… Placas al corriente | ğŸ“‹ Factura original       â”‚
â”‚  ğŸ“ Ciudad de MÃ©xico - Publicado hace 2 dÃ­as        â”‚
â”‚  [ğŸ’¬ Contactar] [â¤ï¸ Guardar] [ğŸ“¤ Compartir]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h4 id="componentes">Componentes</h4>
<pre class="hljs"><code><div>pages/private/marketplace/
â”œâ”€â”€ PaginaMarketplace.tsx         # Feed principal
â”œâ”€â”€ PaginaPublicacionDetalle.tsx  # Detalle del artÃ­culo
â”œâ”€â”€ PaginaCrearPublicacion.tsx    # Formulario de publicaciÃ³n
â”œâ”€â”€ PaginaMisPublicaciones.tsx    # Mis artÃ­culos publicados
â””â”€â”€ components/
    â”œâ”€â”€ TarjetaArticulo.tsx       # Card del producto
    â”œâ”€â”€ FiltrosMarketplace.tsx    # CategorÃ­a, precio, distancia
    â”œâ”€â”€ GaleriaImagenes.tsx       # Carrusel de fotos
    â”œâ”€â”€ BotonContactar.tsx        # Abre ChatYA
    â”œâ”€â”€ EstadoPublicacion.tsx     # Disponible/Vendido/Reservado
    â””â”€â”€ FormularioPublicacion.tsx # Crear/Editar
</div></code></pre>
<h4 id="funcionalidades">Funcionalidades</h4>
<ul>
<li><input type="checkbox" id="checkbox378"><label for="checkbox378">Feed de publicaciones cercanas</label></li>
<li><input type="checkbox" id="checkbox379"><label for="checkbox379">Filtros: categorÃ­a, precio, distancia</label></li>
<li><input type="checkbox" id="checkbox380"><label for="checkbox380">BÃºsqueda por texto</label></li>
<li><input type="checkbox" id="checkbox381"><label for="checkbox381">Crear publicaciÃ³n (hasta 10 fotos)</label></li>
<li><input type="checkbox" id="checkbox382"><label for="checkbox382">Marcar como: Disponible / Reservado / Vendido</label></li>
<li><input type="checkbox" id="checkbox383"><label for="checkbox383">Contactar vendedor â†’ ChatYA</label></li>
<li><input type="checkbox" id="checkbox384"><label for="checkbox384">Guardar en favoritos</label></li>
<li><input type="checkbox" id="checkbox385"><label for="checkbox385">Reportar publicaciÃ³n</label></li>
<li><input type="checkbox" id="checkbox386"><label for="checkbox386">Compartir (generar link)</label></li>
</ul>
<h4 id="estados-de-publicaci%C3%B3n">Estados de PublicaciÃ³n</h4>
<pre class="hljs"><code><div>Disponible â†’ Reservado â†’ Vendido
                â†“
            Disponible (si se cancela)
</div></code></pre>
<h4 id="validaciones">Validaciones</h4>
<table>
<thead>
<tr>
<th>Campo</th>
<th>Regla</th>
</tr>
</thead>
<tbody>
<tr>
<td>TÃ­tulo</td>
<td>10-100 caracteres</td>
</tr>
<tr>
<td>DescripciÃ³n</td>
<td>20-2000 caracteres</td>
</tr>
<tr>
<td>Precio</td>
<td>&gt; 0 (excepto gratis)</td>
</tr>
<tr>
<td>ImÃ¡genes</td>
<td>1-10 fotos (mÃ­nimo 3 para vehÃ­culos)</td>
</tr>
<tr>
<td>CategorÃ­a</td>
<td>Obligatoria</td>
</tr>
</tbody>
</table>
<h4 id="modelo-de-datos">Modelo de Datos</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// Base para todas las publicaciones</span>
<span class="hljs-keyword">interface</span> PublicacionBase {
  id: <span class="hljs-built_in">string</span>;
  usuarioId: <span class="hljs-built_in">string</span>;
  titulo: <span class="hljs-built_in">string</span>;
  descripcion: <span class="hljs-built_in">string</span>;
  precio: <span class="hljs-built_in">number</span>;
  imagenes: <span class="hljs-built_in">string</span>[];
  categoria: <span class="hljs-built_in">string</span>;
  ubicacion: Point;
  estado: <span class="hljs-string">'nuevo'</span> | <span class="hljs-string">'usado'</span> | <span class="hljs-string">'como_nuevo'</span>;
  disponible: <span class="hljs-built_in">boolean</span>;
  createdAt: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-comment">// ExtensiÃ³n para vehÃ­culos</span>
<span class="hljs-keyword">interface</span> PublicacionVehiculo <span class="hljs-keyword">extends</span> PublicacionBase {
  categoria: <span class="hljs-string">'vehiculos'</span>;
  datosVehiculo: {
    <span class="hljs-comment">// Obligatorios</span>
    tipoVehiculo: <span class="hljs-string">'auto'</span> | <span class="hljs-string">'moto'</span> | <span class="hljs-string">'camioneta'</span> | <span class="hljs-string">'camion'</span> | <span class="hljs-string">'otro'</span>;
    marca: <span class="hljs-built_in">string</span>;
    modelo: <span class="hljs-built_in">string</span>;
    aÃ±o: <span class="hljs-built_in">number</span>;
    kilometraje: <span class="hljs-built_in">number</span>;
    transmision: <span class="hljs-string">'manual'</span> | <span class="hljs-string">'automatica'</span>;
    combustible: <span class="hljs-string">'gasolina'</span> | <span class="hljs-string">'diesel'</span> | <span class="hljs-string">'electrico'</span> | <span class="hljs-string">'hibrido'</span>;
    color: <span class="hljs-built_in">string</span>;
    placasAlCorriente: <span class="hljs-built_in">boolean</span>;
    
    <span class="hljs-comment">// Opcionales</span>
    numeroPuertas?: <span class="hljs-built_in">number</span>;
    version?: <span class="hljs-built_in">string</span>;
    cilindros?: <span class="hljs-built_in">number</span>;
    numeroSerie?: <span class="hljs-built_in">string</span>;
    facturaOriginal?: <span class="hljs-built_in">boolean</span>;
    unicoDueÃ±o?: <span class="hljs-built_in">boolean</span>;
    serviciosAgencia?: <span class="hljs-built_in">boolean</span>;
  };
}
</div></code></pre>
<h3 id="62-din%C3%A1micas---rifas-y-sorteos-dinamicas-%E2%8F%B3-pendiente">6.2 DinÃ¡micas - Rifas y Sorteos (<code>/dinamicas</code>) â³ PENDIENTE</h3>
<table>
<thead>
<tr>
<th>Elemento</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>FunciÃ³n</strong></td>
<td>Rifas y sorteos organizados por negocios y usuarios</td>
</tr>
<tr>
<td><strong>QuiÃ©n organiza</strong></td>
<td>Todos los usuarios (Personal y Comercial)</td>
</tr>
<tr>
<td><strong>QuiÃ©n ve</strong></td>
<td>Todos los usuarios (Personal y Comercial)</td>
</tr>
<tr>
<td><strong>QuiÃ©n participa</strong></td>
<td>Depende del tipo de rifa</td>
</tr>
<tr>
<td><strong>Moneda</strong></td>
<td>Puntos CardYA (por negocio) o Dinero (fuera de la app)</td>
</tr>
</tbody>
</table>
<p><strong>âš ï¸ SISTEMA CERRADO DE PUNTOS:</strong></p>
<ul>
<li>Los puntos son ESPECÃFICOS por negocio</li>
<li>Solo puedes participar en rifas usando puntos del MISMO negocio</li>
<li>No se pueden usar puntos de Negocio A para rifa de Negocio B</li>
<li>Cada negocio maneja su pool de puntos independiente</li>
</ul>
<h4 id="tipos-de-rifas-y-sorteos">Tipos de Rifas y Sorteos</h4>
<table>
<thead>
<tr>
<th>Tipo</th>
<th>Moneda</th>
<th>Participantes</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Con Puntos</strong></td>
<td>Puntos CardYA</td>
<td>Solo clientes del negocio</td>
<td>Rifas usando puntos del mismo negocio</td>
</tr>
<tr>
<td><strong>Con Dinero</strong></td>
<td>Pesos MXN</td>
<td>Todos (usuarios de la app)</td>
<td>App organiza, pago fuera de app</td>
</tr>
<tr>
<td><strong>GestiÃ³n Offline</strong></td>
<td>Cualquiera</td>
<td>Sin registro necesario</td>
<td>App solo gestiona sorteo, participantes externos</td>
</tr>
<tr>
<td><strong>Gratuita</strong></td>
<td>Gratis</td>
<td>Todos</td>
<td>Sorteo sin costo</td>
</tr>
</tbody>
</table>
<h4 id="%F0%9F%8E%AB-rifassorteos---gesti%C3%B3n-offline-sin-registro">ğŸ« Rifas/Sorteos - GestiÃ³n Offline (Sin Registro)</h4>
<p><strong>âš ï¸ Modo Manual:</strong> Organizador gestiona todo, app solo sortea</p>
<p><strong>ğŸŒ ACCESO PÃšBLICO:</strong> El sorteo en vivo puede ser visto sin login/registro</p>
<p><strong>CaracterÃ­sticas:</strong></p>
<ul>
<li>Participantes NO necesitan estar registrados en AnunciaYA</li>
<li>Organizador registra boletos manualmente</li>
<li>App solo sirve para hacer el sorteo aleatorio</li>
<li>Todo se maneja fuera de la app (venta, pago, entrega)</li>
<li><strong>Link de sorteo pÃºblico:</strong> Puede compartirse y verse sin login</li>
<li><strong>TransmisiÃ³n en vivo:</strong> Cualquiera con el link puede ver el sorteo</li>
</ul>
<p><strong>Casos de uso:</strong></p>
<pre class="hljs"><code><div>Ejemplo 1: Rifa en evento presencial
â”œâ”€â”€ Negocio vende boletos fÃ­sicos en $50 c/u
â”œâ”€â”€ Al final del evento hace el sorteo
â””â”€â”€ Usa la app solo para seleccionar ganador aleatorio

Ejemplo 2: Rifa en redes sociales
â”œâ”€â”€ Usuario vende boletos por Facebook/Instagram
â”œâ”€â”€ Anota nombres/nÃºmeros en la app
â””â”€â”€ Hace sorteo en vivo usando la app

Ejemplo 3: Rifa escolar
â”œâ”€â”€ Escuela vende boletos impresos
â”œâ”€â”€ Captura datos en la app
â””â”€â”€ Sorteo pÃºblico usando la app
</div></code></pre>
<p><strong>Flujo:</strong></p>
<pre class="hljs"><code><div>1. Organizador crea rifa tipo &quot;GestiÃ³n Offline&quot;
   â””â”€â”€ Define: premio, total de boletos, fecha sorteo

2. Organizador registra participantes MANUALMENTE
   â”œâ”€â”€ OpciÃ³n A: Registrar por nombre
   â”‚   â””â”€â”€ &quot;Juan PÃ©rez - Boleto #001&quot;
   â”œâ”€â”€ OpciÃ³n B: Solo nÃºmero de boleto
   â”‚   â””â”€â”€ &quot;Boleto #001, #002, #003...&quot;
   â””â”€â”€ OpciÃ³n C: Importar lista (CSV)
       â””â”€â”€ nombre,telefono,numero_boleto

3. Al momento del sorteo
   â””â”€â”€ Organizador activa sorteo
   â””â”€â”€ Sistema selecciona ganador aleatorio
   â””â”€â”€ Muestra nÃºmero de boleto ganador + nombre (si existe)

4. Organizador comunica ganador
   â””â”€â”€ Por los medios que usÃ³ para vender (presencial, redes, etc.)
   â””â”€â”€ Entrega de premio FUERA de la app
   â””â”€â”€ Marca como &quot;Entregado&quot; en la app (opcional)
</div></code></pre>
<p><strong>Interfaz de GestiÃ³n:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ° RIFA OFFLINE: Bicicleta MontaÃ±a                         â”‚
â”‚  ğŸ“ Deportes LÃ³pez                                          â”‚
â”‚  ğŸ« GESTIÃ“N MANUAL - Sin registro requerido                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š Boletos registrados: 89 / 100                          â”‚
â”‚  â° Sorteo programado: 28 Dic 2024 - 7:00 PM              â”‚
â”‚  ğŸ† Premio: Bicicleta Trek Mountain 29&quot;                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [â• Registrar boleto] [ğŸ“„ Importar CSV] [ğŸ² Sortear]      â”‚
â”‚                                                             â”‚
â”‚  Ãšltimos registrados:                                       â”‚
â”‚  #089 - MarÃ­a GonzÃ¡lez                                      â”‚
â”‚  #088 - Carlos Ruiz                                         â”‚
â”‚  #087 - Boleto sin nombre                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Modal: Registrar Boleto</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Registrar Boleto                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  NÃºmero de boleto: [____]               â”‚
â”‚  Nombre (opcional): [______________]    â”‚
â”‚  TelÃ©fono (opcional): [______________]  â”‚
â”‚  Email (opcional): [______________]     â”‚
â”‚                                         â”‚
â”‚  [Cancelar]  [Guardar y agregar otro]  â”‚
â”‚              [Guardar y cerrar]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Modal: Importar CSV</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Importar Lista de Participantes        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Formato CSV:                            â”‚
â”‚  numero_boleto,nombre,telefono,email    â”‚
â”‚                                         â”‚
â”‚  Ejemplo:                                â”‚
â”‚  001,Juan PÃ©rez,5512345678,juan@...     â”‚
â”‚  002,MarÃ­a LÃ³pez,5587654321,maria@...   â”‚
â”‚                                         â”‚
â”‚  [Seleccionar archivo CSV]              â”‚
â”‚  [ğŸ“¥ Descargar plantilla]               â”‚
â”‚                                         â”‚
â”‚  [Cancelar]  [Importar]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Pantalla de Sorteo en Vivo:</strong></p>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚                    ğŸ² SORTEANDO...                          â”‚
â”‚                                                             â”‚
â”‚              [AnimaciÃ³n de nÃºmeros girando]                 â”‚
â”‚                                                             â”‚
â”‚                    ğŸ¯ GANADOR:                              â”‚
â”‚                                                             â”‚
â”‚                  BOLETO #047                                â”‚
â”‚                  MarÃ­a GonzÃ¡lez                             â”‚
â”‚                  Tel: 55-1234-5678                          â”‚
â”‚                                                             â”‚
â”‚  [ğŸ”„ Sortear de nuevo] [âœ… Confirmar ganador] [ğŸ“¤ Compartir] â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<p><strong>Componentes Adicionales:</strong></p>
<pre class="hljs"><code><div>components/dinamicas/offline/
â”œâ”€â”€ RegistroBoletoManual.tsx      # Form para registrar 1 boleto
â”œâ”€â”€ ImportadorCSV.tsx             # Importar lista
â”œâ”€â”€ ListaParticipantes.tsx        # Ver todos los registrados
â”œâ”€â”€ SorteoEnVivo.tsx              # Pantalla de sorteo animada
â”œâ”€â”€ ResultadoSorteo.tsx           # Mostrar ganador
â””â”€â”€ HistorialSorteos.tsx          # Ver sorteos anteriores
</div></code></pre>
<h4 id="%F0%9F%92%B0-rifas-con-puntos-sistema-cerrado">ğŸ’° Rifas con Puntos (Sistema Cerrado)</h4>
<p><strong>RestricciÃ³n:</strong> Solo participan usuarios con puntos EN ESE NEGOCIO</p>
<pre class="hljs"><code><div>Usuario tiene:
â”œâ”€â”€ 500 pts en &quot;PizzerÃ­a Roma&quot;
â”œâ”€â”€ 200 pts en &quot;CafÃ© Central&quot;
â””â”€â”€ 100 pts en &quot;Gym Fitness&quot;

Rifas disponibles:
â”œâ”€â”€ Rifa &quot;PizzerÃ­a Roma&quot; (50 pts/boleto) âœ… PUEDE participar
â”œâ”€â”€ Rifa &quot;CafÃ© Central&quot; (30 pts/boleto) âœ… PUEDE participar
â””â”€â”€ Rifa &quot;Gym Fitness&quot; (80 pts/boleto) âœ… PUEDE participar (tiene 100)

âŒ NO puede usar puntos de PizzerÃ­a para CafÃ©
âŒ NO puede usar puntos de CafÃ© para Gym
</div></code></pre>
<p><strong>ValidaciÃ³n Backend:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// Verificar que usuario tenga puntos EN EL NEGOCIO de la rifa</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">puedeParticipar</span>(<span class="hljs-params">usuarioId: <span class="hljs-built_in">string</span>, rifaId: <span class="hljs-built_in">string</span></span>) </span>{
  <span class="hljs-keyword">const</span> rifa = <span class="hljs-keyword">await</span> getRifa(rifaId);
  <span class="hljs-keyword">const</span> negocioId = rifa.negocioId;
  
  <span class="hljs-keyword">const</span> puntosUsuario = <span class="hljs-keyword">await</span> getPuntosEnNegocio(usuarioId, negocioId);
  <span class="hljs-keyword">const</span> costoTotal = rifa.costoPorBoleto * cantidadBoletos;
  
  <span class="hljs-keyword">return</span> puntosUsuario &gt;= costoTotal;
}
</div></code></pre>
<h4 id="%F0%9F%92%B5-rifas-con-dinero-app-como-gestor">ğŸ’µ Rifas con Dinero (App como Gestor)</h4>
<p><strong>âš ï¸ IMPORTANTE:</strong> La app NO procesa pagos de estas rifas</p>
<p><strong>Funcionalidad:</strong></p>
<ul>
<li>App solo gestiona la organizaciÃ³n y sorteo</li>
<li>Pago de boletos: FUERA de la app (efectivo, transferencia, etc.)</li>
<li>Entrega de premios: FUERA de la app</li>
<li>App solo documenta ganador</li>
</ul>
<p><strong>Flujo:</strong></p>
<pre class="hljs"><code><div>1. Organizador crea rifa con dinero
   â””â”€â”€ Define: premio, precio boleto, total boletos

2. Usuario interesado
   â””â”€â”€ Contacta organizador por ChatYA
   â””â”€â”€ Pago se hace FUERA de la app

3. Organizador confirma pago
   â””â”€â”€ Marca boleto como &quot;Pagado&quot; en la app
   â””â”€â”€ Sistema asigna boleto al usuario

4. Al cerrar rifa
   â””â”€â”€ Sistema sortea ganador
   â””â”€â”€ Notifica a ganador y organizador

5. Entrega de premio
   â””â”€â”€ Se coordina FUERA de la app
   â””â”€â”€ Organizador marca como &quot;Entregado&quot;
</div></code></pre>
<p><strong>Componente Especial:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment">// RifaDinero.tsx</span>
&lt;RifaDinero&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Badge</span>&gt;</span>ğŸ’µ Pago fuera de la app<span class="hljs-tag">&lt;/<span class="hljs-name">Badge</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Warning</span>&gt;</span>
    Esta rifa requiere pago en efectivo o transferencia.
    Contacta al organizador para coordinar.
  <span class="hljs-tag">&lt;/<span class="hljs-name">Warning</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BotonContactar</span>&gt;</span>ğŸ’¬ Contactar organizador<span class="hljs-tag">&lt;/<span class="hljs-name">BotonContactar</span>&gt;</span></span>
&lt;<span class="hljs-regexp">/RifaDinero&gt;
</span></div></code></pre>
<h4 id="estructura-de-una-rifa-con-puntos">Estructura de una Rifa con Puntos</h4>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ° RIFA: Smart TV 55&quot;                                      â”‚
â”‚  ğŸ“ MueblerÃ­a El Hogar                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ« Costo: 50 puntos por boleto (solo puntos de este negocio) â”‚
â”‚  ğŸ“Š Boletos vendidos: 234 / 500                            â”‚
â”‚  â° Cierra: 25 Dic 2024 - 6:00 PM                          â”‚
â”‚  ğŸ† Premio: Smart TV Samsung 55&quot; (valor $12,000)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Tus puntos en este negocio: 150                           â”‚
â”‚  Mis boletos: 0                                             â”‚
â”‚  [Comprar +1] [Comprar +5] [Comprar +10]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h4 id="estructura-de-una-rifa-con-dinero">Estructura de una Rifa con Dinero</h4>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ° RIFA: iPhone 15 Pro                                     â”‚
â”‚  ğŸ“ MarÃ­a GarcÃ­a (usuario personal)                         â”‚
â”‚  ğŸ’µ PAGO FUERA DE LA APP                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ« Costo: $100 por boleto                                 â”‚
â”‚  ğŸ“Š Boletos vendidos: 45 / 100                             â”‚
â”‚  â° Cierra: 31 Dic 2024 - 8:00 PM                          â”‚
â”‚  ğŸ† Premio: iPhone 15 Pro 256GB                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš ï¸ El pago se coordina directamente con el organizador    â”‚
â”‚  Mis boletos: 0                                             â”‚
â”‚  [ğŸ’¬ Contactar para comprar]                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h4 id="componentes">Componentes</h4>
<pre class="hljs"><code><div>pages/private/dinamicas/
â”œâ”€â”€ PaginaDinamicas.tsx           # Lista de rifas y sorteos activos
â”œâ”€â”€ PaginaDinamicaDetalle.tsx     # Detalle y compra de boletos
â”œâ”€â”€ PaginaMisDinamicas.tsx        # Rifas/sorteos donde participo
â”œâ”€â”€ PaginaCrearDinamica.tsx       # Crear rifa o sorteo
â””â”€â”€ components/
    â”œâ”€â”€ TarjetaDinamica.tsx
    â”œâ”€â”€ CompradorBoletos.tsx      # Solo para rifas con puntos
    â”œâ”€â”€ ContactoOrganizador.tsx   # Para rifas con dinero
    â”œâ”€â”€ ProgressBar.tsx           # Boletos vendidos
    â”œâ”€â”€ ContadorRegresivo.tsx
    â”œâ”€â”€ BotonCompartir.tsx
    â”œâ”€â”€ BadgeTipoRifa.tsx         # Puntos vs Dinero
    â””â”€â”€ HistorialGanadores.tsx
</div></code></pre>
<h4 id="funcionalidades">Funcionalidades</h4>
<p><strong>Generales:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox387"><label for="checkbox387">Ver rifas y sorteos activos</label></li>
<li><input type="checkbox" id="checkbox388"><label for="checkbox388">Filtrar por tipo (puntos, dinero, offline, gratis)</label></li>
<li><input type="checkbox" id="checkbox389"><label for="checkbox389">Filtrar por negocio/organizador</label></li>
<li><input type="checkbox" id="checkbox390"><label for="checkbox390">Ver mis boletos comprados</label></li>
<li><input type="checkbox" id="checkbox391"><label for="checkbox391">Contador regresivo para cierre</label></li>
<li><input type="checkbox" id="checkbox392"><label for="checkbox392">NotificaciÃ³n de ganador</label></li>
<li><input type="checkbox" id="checkbox393"><label for="checkbox393">Historial de rifas ganadas</label></li>
<li><input type="checkbox" id="checkbox394"><label for="checkbox394">Crear y administrar rifas (ambos modos)</label></li>
</ul>
<p><strong>Rifas con Puntos:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox395"><label for="checkbox395">Comprar boletos con puntos DEL MISMO NEGOCIO</label></li>
<li><input type="checkbox" id="checkbox396"><label for="checkbox396">Ver balance de puntos en ese negocio</label></li>
<li><input type="checkbox" id="checkbox397"><label for="checkbox397">ValidaciÃ³n: solo participar si tienes puntos ahÃ­</label></li>
</ul>
<p><strong>Rifas con Dinero:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox398"><label for="checkbox398">BotÃ³n &quot;Contactar organizador&quot;</label></li>
<li><input type="checkbox" id="checkbox399"><label for="checkbox399">Organizador confirma pago manual</label></li>
<li><input type="checkbox" id="checkbox400"><label for="checkbox400">AsignaciÃ³n de boleto post-confirmaciÃ³n</label></li>
<li><input type="checkbox" id="checkbox401"><label for="checkbox401">Sin procesamiento de pago en app</label></li>
</ul>
<p><strong>Rifas Offline (GestiÃ³n Manual):</strong></p>
<ul>
<li><input type="checkbox" id="checkbox402"><label for="checkbox402">Registrar boleto individual (nÃºmero + datos opcionales)</label></li>
<li><input type="checkbox" id="checkbox403"><label for="checkbox403">Importar lista de participantes (CSV)</label></li>
<li><input type="checkbox" id="checkbox404"><label for="checkbox404">Exportar plantilla CSV</label></li>
<li><input type="checkbox" id="checkbox405"><label for="checkbox405">Ver lista completa de participantes registrados</label></li>
<li><input type="checkbox" id="checkbox406"><label for="checkbox406">Editar/eliminar participantes</label></li>
<li><input type="checkbox" id="checkbox407"><label for="checkbox407">Sorteo en vivo con animaciÃ³n</label></li>
<li><input type="checkbox" id="checkbox408"><label for="checkbox408">Permitir re-sorteo si es necesario</label></li>
<li><input type="checkbox" id="checkbox409"><label for="checkbox409">Compartir resultado (screenshot/link)</label></li>
<li><input type="checkbox" id="checkbox410"><label for="checkbox410">Historial de sorteos realizados</label></li>
</ul>
<h4 id="flujo-del-sorteo">Flujo del Sorteo</h4>
<p><strong>Rifas con Puntos:</strong></p>
<pre class="hljs"><code><div>1. Negocio crea rifa (fecha cierre + premio + costo en puntos)
2. Usuarios con puntos EN ESE NEGOCIO compran boletos
3. Sistema descuenta puntos del saldo del usuario en ese negocio
4. Al cerrar â†’ Sistema selecciona ganador aleatorio
5. NotificaciÃ³n push al ganador
6. Ganador reclama en el negocio
7. Negocio marca premio como entregado
</div></code></pre>
<p><strong>Rifas con Dinero:</strong></p>
<pre class="hljs"><code><div>1. Usuario crea rifa (fecha cierre + premio + costo $$$)
2. Interesados contactan por ChatYA
3. Pago se hace FUERA de la app
4. Organizador confirma pago y asigna boleto
5. Al cerrar â†’ Sistema selecciona ganador aleatorio
6. NotificaciÃ³n push al ganador
7. Entrega de premio FUERA de la app
8. Organizador marca como entregado
</div></code></pre>
<p><strong>Rifas Offline (GestiÃ³n Manual):</strong></p>
<pre class="hljs"><code><div>1. Organizador crea rifa tipo &quot;GestiÃ³n Offline&quot;
   â””â”€â”€ Define premio, total boletos, fecha sorteo

2. Organizador vende boletos por sus propios medios
   â””â”€â”€ Presencial, redes sociales, WhatsApp, etc.

3. Organizador registra participantes en la app:
   â”œâ”€â”€ OpciÃ³n A: Manual uno por uno
   â”œâ”€â”€ OpciÃ³n B: Importar lista CSV
   â””â”€â”€ Datos: nÃºmero boleto + nombre/tel/email (opcional)

4. Organizador comparte link pÃºblico del sorteo:
   â””â”€â”€ /dinamicas/rifa/abc123/sorteo-publico
   â””â”€â”€ Â¡Cualquiera puede verlo SIN REGISTRO!

5. Al momento del sorteo:
   â”œâ”€â”€ Organizador activa &quot;Sorteo en vivo&quot;
   â”œâ”€â”€ AnimaciÃ³n de nÃºmeros
   â”œâ”€â”€ Sistema selecciona ganador aleatorio
   â”œâ”€â”€ Muestra: #boleto + nombre (si existe)
   â””â”€â”€ Espectadores ven en tiempo real (sin login)

6. Organizador comunica ganador:
   â””â”€â”€ Por WhatsApp, redes, presencial, etc.
   â””â”€â”€ Link pÃºblico del resultado

7. Entrega de premio FUERA de la app
   â””â”€â”€ Marca como &quot;Entregado&quot; (opcional)

8. Organizador puede:
   â”œâ”€â”€ Exportar lista de participantes
   â”œâ”€â”€ Ver historial de sorteos
   â””â”€â”€ Compartir resultado pÃºblicamente
</div></code></pre>
<h4 id="modelo-de-datos">Modelo de Datos</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> Rifa {
  id: <span class="hljs-built_in">string</span>;
  organizadorId: <span class="hljs-built_in">string</span>;
  negocioId?: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// Solo si es rifa con puntos</span>
  tipo: <span class="hljs-string">'puntos'</span> | <span class="hljs-string">'dinero'</span> | <span class="hljs-string">'offline'</span> | <span class="hljs-string">'gratis'</span>;
  titulo: <span class="hljs-built_in">string</span>;
  descripcion: <span class="hljs-built_in">string</span>;
  premio: <span class="hljs-built_in">string</span>;
  imagenPremio: <span class="hljs-built_in">string</span>;
  
  <span class="hljs-comment">// Para rifas con puntos</span>
  costoPorBoletoPuntos?: <span class="hljs-built_in">number</span>;
  
  <span class="hljs-comment">// Para rifas con dinero</span>
  costoPorBoletoDinero?: <span class="hljs-built_in">number</span>;
  
  <span class="hljs-comment">// Para rifas offline</span>
  gestionManual?: <span class="hljs-built_in">boolean</span>;
  permitirImportarCSV?: <span class="hljs-built_in">boolean</span>;
  
  totalBoletos: <span class="hljs-built_in">number</span>;
  boletosVendidos: <span class="hljs-built_in">number</span>;
  fechaCierre: <span class="hljs-built_in">Date</span>;
  estado: <span class="hljs-string">'activa'</span> | <span class="hljs-string">'cerrada'</span> | <span class="hljs-string">'finalizada'</span>;
  ganadorId?: <span class="hljs-built_in">string</span>;
  ganadorExterno?: {  <span class="hljs-comment">// Para rifas offline</span>
    numeroBoleto: <span class="hljs-built_in">string</span>;
    nombre?: <span class="hljs-built_in">string</span>;
    telefono?: <span class="hljs-built_in">string</span>;
    email?: <span class="hljs-built_in">string</span>;
  };
  premioEntregado: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">interface</span> BoletaRifa {
  id: <span class="hljs-built_in">string</span>;
  rifaId: <span class="hljs-built_in">string</span>;
  usuarioId?: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// null si es offline</span>
  numeroBoleto: <span class="hljs-built_in">number</span>;
  
  <span class="hljs-comment">// Para rifas con dinero</span>
  pagadoFueraApp?: <span class="hljs-built_in">boolean</span>;
  confirmadoPor?: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// organizadorId</span>
  fechaConfirmacion?: <span class="hljs-built_in">Date</span>;
  
  <span class="hljs-comment">// Para rifas offline (participante externo)</span>
  participanteExterno?: {
    nombre?: <span class="hljs-built_in">string</span>;
    telefono?: <span class="hljs-built_in">string</span>;
    email?: <span class="hljs-built_in">string</span>;
  };
}

<span class="hljs-comment">// Para importaciÃ³n CSV</span>
<span class="hljs-keyword">interface</span> ImportacionCSV {
  rifaId: <span class="hljs-built_in">string</span>;
  archivo: File;
  registrosImportados: <span class="hljs-built_in">number</span>;
  registrosErrores: <span class="hljs-built_in">number</span>;
  errores?: <span class="hljs-built_in">string</span>[];
}
</div></code></pre>
<h3 id="63-empleos-empleos-%E2%8F%B3-pendiente">6.3 Empleos (<code>/empleos</code>) â³ PENDIENTE</h3>
<table>
<thead>
<tr>
<th>Elemento</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>FunciÃ³n</strong></td>
<td>Plataforma bidireccional de empleos y servicios</td>
</tr>
<tr>
<td><strong>QuiÃ©n publica</strong></td>
<td>Todos los usuarios (Personal y Comercial)</td>
</tr>
<tr>
<td><strong>QuiÃ©n ve</strong></td>
<td>Todos los usuarios (Personal y Comercial)</td>
</tr>
<tr>
<td><strong>GeolocalizaciÃ³n</strong></td>
<td>âœ… Empleos y servicios cercanos</td>
</tr>
</tbody>
</table>
<h4 id="%F0%9F%94%84-sistema-bidireccional">ğŸ”„ Sistema Bidireccional</h4>
<p><strong>Dos tipos de publicaciones:</strong></p>
<table>
<thead>
<tr>
<th>Tipo</th>
<th>QuiÃ©n publica</th>
<th>QuiÃ©n aplica/contrata</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Oferta de Empleo</strong></td>
<td>Modo Comercial</td>
<td>Modo Personal</td>
<td>Negocio busca empleado</td>
</tr>
<tr>
<td><strong>Oferta de Servicio</strong></td>
<td>Modo Personal</td>
<td>Todos</td>
<td>Usuario ofrece sus servicios</td>
</tr>
</tbody>
</table>
<p><strong>Flujos:</strong></p>
<pre class="hljs"><code><div>Negocio (Comercial) busca empleado:
â”œâ”€â”€ Publica &quot;Oferta de Empleo&quot;
â”œâ”€â”€ Usuarios Personal aplican
â””â”€â”€ Negocio revisa aplicaciones

Usuario (Personal) ofrece servicio:
â”œâ”€â”€ Publica &quot;Oferta de Servicio&quot;
â”œâ”€â”€ Cualquiera puede contactar
â””â”€â”€ Usuario recibe solicitudes
</div></code></pre>
<h4 id="tipos-de-publicaciones">Tipos de Publicaciones</h4>
<p><strong>A) Ofertas de Empleo (Comercial publica):</strong></p>
<table>
<thead>
<tr>
<th>Tipo</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tiempo completo</td>
<td>Jornada completa</td>
</tr>
<tr>
<td>Medio tiempo</td>
<td>Horario parcial</td>
</tr>
<tr>
<td>Por proyecto</td>
<td>Trabajo temporal</td>
</tr>
<tr>
<td>PrÃ¡cticas</td>
<td>Estudiantes</td>
</tr>
<tr>
<td>Freelance</td>
<td>Trabajo independiente</td>
</tr>
</tbody>
</table>
<p><strong>B) Ofertas de Servicio (Personal publica):</strong></p>
<table>
<thead>
<tr>
<th>CategorÃ­a</th>
<th>Ejemplos</th>
</tr>
</thead>
<tbody>
<tr>
<td>Profesionales</td>
<td>Contador, Abogado, DiseÃ±ador</td>
</tr>
<tr>
<td>Oficios</td>
<td>Plomero, Electricista, Carpintero</td>
</tr>
<tr>
<td>Creativos</td>
<td>FotÃ³grafo, MÃºsico, DJ</td>
</tr>
<tr>
<td>TÃ©cnicos</td>
<td>ReparaciÃ³n PC, Celulares</td>
</tr>
<tr>
<td>Cuidados</td>
<td>NiÃ±era, Cuidador de ancianos</td>
</tr>
<tr>
<td>EducaciÃ³n</td>
<td>Tutor, Profesor particular</td>
</tr>
<tr>
<td>Transporte</td>
<td>Chofer, MensajerÃ­a</td>
</tr>
<tr>
<td>Limpieza</td>
<td>Limpieza de hogar, Oficinas</td>
</tr>
<tr>
<td>Eventos</td>
<td>Mesero, Chef, Bartender</td>
</tr>
</tbody>
</table>
<h4 id="estructura-de-una-oferta-de-empleo">Estructura de una Oferta de Empleo</h4>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¼ Mesero/a - Tiempo Completo                              â”‚
â”‚  ğŸ“ Restaurante La Palapa â€¢ 1.2 km                          â”‚
â”‚  ğŸª OFERTA DE EMPLEO                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’° $2,500 - $3,500 semanal                                 â”‚
â”‚  ğŸ• Lunes a SÃ¡bado, 10am - 6pm                              â”‚
â”‚  ğŸ“‹ Requisitos:                                             â”‚
â”‚     â€¢ Experiencia 6 meses mÃ­nimo                            â”‚
â”‚     â€¢ Disponibilidad inmediata                              â”‚
â”‚     â€¢ Buena presentaciÃ³n                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“… Publicado: hace 2 dÃ­as                                  â”‚
â”‚  ğŸ‘¥ 12 aplicaciones                                         â”‚
â”‚  [Aplicar] [Guardar] [Compartir]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h4 id="estructura-de-una-oferta-de-servicio">Estructura de una Oferta de Servicio</h4>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”§ Plomero Profesional                                     â”‚
â”‚  ğŸ‘¤ Juan PÃ©rez â€¢ â­ 4.8 (23 reseÃ±as)                        â”‚
â”‚  ğŸ‘¨â€ğŸ”§ OFREZCO MI SERVICIO                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’° Desde $500 (segÃºn trabajo)                              â”‚
â”‚  ğŸ“ Atiendo: CDMX y Ã¡rea metropolitana                      â”‚
â”‚  ğŸ• Disponibilidad: Lun-SÃ¡b 8am-6pm                         â”‚
â”‚  âœ… Especialidades:                                         â”‚
â”‚     â€¢ ReparaciÃ³n de fugas                                   â”‚
â”‚     â€¢ InstalaciÃ³n de tuberÃ­as                               â”‚
â”‚     â€¢ Destapado de drenaje                                  â”‚
â”‚  ğŸ“ WhatsApp disponible                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“… Publicado: hace 1 semana                                â”‚
â”‚  ğŸ’¬ 18 contactos recibidos                                  â”‚
â”‚  [Contactar] [Guardar] [Compartir]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h4 id="componentes">Componentes</h4>
<pre class="hljs"><code><div>pages/private/empleos/
â”œâ”€â”€ PaginaEmpleos.tsx             # Feed principal (empleos + servicios)
â”œâ”€â”€ PaginaEmpleoDetalle.tsx       # Detalle de oferta de empleo
â”œâ”€â”€ PaginaServicioDetalle.tsx     # Detalle de oferta de servicio
â”œâ”€â”€ PaginaMisAplicaciones.tsx     # Empleos donde apliquÃ©
â”œâ”€â”€ PaginaMisServicios.tsx        # Servicios que ofrezco
â”œâ”€â”€ PaginaCrearEmpleo.tsx         # (Comercial) Publicar empleo
â”œâ”€â”€ PaginaCrearServicio.tsx       # (Personal) Publicar servicio
â””â”€â”€ components/
    â”œâ”€â”€ TarjetaEmpleo.tsx         # Card de empleo
    â”œâ”€â”€ TarjetaServicio.tsx       # Card de servicio
    â”œâ”€â”€ FiltrosEmpleos.tsx        # Tipo, categorÃ­a, salario, distancia
    â”œâ”€â”€ FormularioAplicacion.tsx  # Aplicar a empleo
    â”œâ”€â”€ FormularioServicio.tsx    # Crear servicio
    â”œâ”€â”€ EstadoAplicacion.tsx      # Estados de aplicaciÃ³n
    â”œâ”€â”€ ListaAplicantes.tsx       # (Comercial) Ver aplicaciones
    â”œâ”€â”€ BadgeTipoPublicacion.tsx  # Empleo vs Servicio
    â””â”€â”€ CalificacionServicio.tsx  # Rating para servicios
</div></code></pre>
<h4 id="funcionalidades-usuario-personal">Funcionalidades Usuario Personal</h4>
<p><strong>Buscar Empleo:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox411"><label for="checkbox411">Ver ofertas de empleo cercanas</label></li>
<li><input type="checkbox" id="checkbox412"><label for="checkbox412">Filtrar por tipo, salario, categorÃ­a</label></li>
<li><input type="checkbox" id="checkbox413"><label for="checkbox413">Aplicar a oferta (adjuntar CV o perfil)</label></li>
<li><input type="checkbox" id="checkbox414"><label for="checkbox414">Ver estado de mis aplicaciones</label></li>
<li><input type="checkbox" id="checkbox415"><label for="checkbox415">Guardar ofertas interesantes</label></li>
<li><input type="checkbox" id="checkbox416"><label for="checkbox416">Contactar empleador â†’ ChatYA</label></li>
</ul>
<p><strong>Ofrecer Servicio:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox417"><label for="checkbox417">Publicar servicio profesional/oficio</label></li>
<li><input type="checkbox" id="checkbox418"><label for="checkbox418">Definir categorÃ­a, tarifa, zona de atenciÃ³n</label></li>
<li><input type="checkbox" id="checkbox419"><label for="checkbox419">Subir portafolio/fotos de trabajos</label></li>
<li><input type="checkbox" id="checkbox420"><label for="checkbox420">Ver solicitudes recibidas</label></li>
<li><input type="checkbox" id="checkbox421"><label for="checkbox421">Gestionar disponibilidad</label></li>
<li><input type="checkbox" id="checkbox422"><label for="checkbox422">Recibir y responder calificaciones</label></li>
</ul>
<h4 id="funcionalidades-usuario-comercial">Funcionalidades Usuario Comercial</h4>
<p><strong>Publicar Empleo:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox423"><label for="checkbox423">Crear oferta de empleo</label></li>
<li><input type="checkbox" id="checkbox424"><label for="checkbox424">Ver lista de aplicantes</label></li>
<li><input type="checkbox" id="checkbox425"><label for="checkbox425">Marcar aplicaciÃ³n: Vista / En proceso / Rechazada / Aceptada</label></li>
<li><input type="checkbox" id="checkbox426"><label for="checkbox426">Contactar aplicante â†’ ChatYA</label></li>
<li><input type="checkbox" id="checkbox427"><label for="checkbox427">Cerrar/Pausar oferta</label></li>
</ul>
<p><strong>Contratar Servicio:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox428"><label for="checkbox428">Buscar servicios profesionales</label></li>
<li><input type="checkbox" id="checkbox429"><label for="checkbox429">Ver perfil y calificaciones del prestador</label></li>
<li><input type="checkbox" id="checkbox430"><label for="checkbox430">Contactar para cotizar â†’ ChatYA</label></li>
<li><input type="checkbox" id="checkbox431"><label for="checkbox431">Calificar servicio recibido</label></li>
</ul>
<h4 id="estados-de-aplicaci%C3%B3n-empleos">Estados de AplicaciÃ³n (Empleos)</h4>
<pre class="hljs"><code><div>Enviada â†’ Vista â†’ En proceso â†’ Aceptada
                      â†“
                  Rechazada
</div></code></pre>
<h4 id="sistema-de-calificaciones-servicios">Sistema de Calificaciones (Servicios)</h4>
<pre class="hljs"><code><div>Cliente contrata servicio:
â”œâ”€â”€ Servicio se completa
â”œâ”€â”€ Cliente puede calificar (1-5 estrellas + reseÃ±a)
â”œâ”€â”€ CalificaciÃ³n aparece en perfil del prestador
â””â”€â”€ Promedio se actualiza automÃ¡ticamente

Prestador de servicio:
â”œâ”€â”€ Puede responder a reseÃ±as
â”œâ”€â”€ Acumula reputaciÃ³n
â””â”€â”€ Mayor rating = mÃ¡s visible en bÃºsquedas
</div></code></pre>
<h4 id="modelo-de-datos">Modelo de Datos</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">interface</span> Publicacion {
  id: <span class="hljs-built_in">string</span>;
  publicadorId: <span class="hljs-built_in">string</span>;
  tipo: <span class="hljs-string">'empleo'</span> | <span class="hljs-string">'servicio'</span>;
  titulo: <span class="hljs-built_in">string</span>;
  descripcion: <span class="hljs-built_in">string</span>;
  ubicacion: Point;
  estado: <span class="hljs-string">'activa'</span> | <span class="hljs-string">'pausada'</span> | <span class="hljs-string">'cerrada'</span>;
  createdAt: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-comment">// Oferta de Empleo (Comercial publica)</span>
<span class="hljs-keyword">interface</span> OfertaEmpleo <span class="hljs-keyword">extends</span> Publicacion {
  tipo: <span class="hljs-string">'empleo'</span>;
  negocioId: <span class="hljs-built_in">string</span>;
  tipoJornada: <span class="hljs-string">'completo'</span> | <span class="hljs-string">'medio'</span> | <span class="hljs-string">'proyecto'</span> | <span class="hljs-string">'practicas'</span> | <span class="hljs-string">'freelance'</span>;
  salarioMin?: <span class="hljs-built_in">number</span>;
  salarioMax?: <span class="hljs-built_in">number</span>;
  horario: <span class="hljs-built_in">string</span>;
  requisitos: <span class="hljs-built_in">string</span>[];
  beneficios?: <span class="hljs-built_in">string</span>[];
  aplicaciones: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// Oferta de Servicio (Personal publica)</span>
<span class="hljs-keyword">interface</span> OfertaServicio <span class="hljs-keyword">extends</span> Publicacion {
  tipo: <span class="hljs-string">'servicio'</span>;
  usuarioId: <span class="hljs-built_in">string</span>;
  categoria: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// PlomerÃ­a, DiseÃ±o, etc.</span>
  tarifaDesde: <span class="hljs-built_in">number</span>;
  zonaAtencion: <span class="hljs-built_in">string</span>[];
  disponibilidad: <span class="hljs-built_in">string</span>;
  especialidades: <span class="hljs-built_in">string</span>[];
  portafolio: <span class="hljs-built_in">string</span>[];  <span class="hljs-comment">// URLs de imÃ¡genes</span>
  rating: <span class="hljs-built_in">number</span>;
  totalReseÃ±<span class="hljs-keyword">as</span>: <span class="hljs-built_in">number</span>;
  whatsappDisponible: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-comment">// AplicaciÃ³n a Empleo</span>
<span class="hljs-keyword">interface</span> Aplicacion {
  id: <span class="hljs-built_in">string</span>;
  empleoId: <span class="hljs-built_in">string</span>;
  usuarioId: <span class="hljs-built_in">string</span>;
  cv?: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// URL</span>
  mensaje: <span class="hljs-built_in">string</span>;
  estado: <span class="hljs-string">'enviada'</span> | <span class="hljs-string">'vista'</span> | <span class="hljs-string">'proceso'</span> | <span class="hljs-string">'aceptada'</span> | <span class="hljs-string">'rechazada'</span>;
  createdAt: <span class="hljs-built_in">Date</span>;
}

<span class="hljs-comment">// CalificaciÃ³n de Servicio</span>
<span class="hljs-keyword">interface</span> CalificacionServicio {
  id: <span class="hljs-built_in">string</span>;
  servicioId: <span class="hljs-built_in">string</span>;
  usuarioId: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// Quien califica</span>
  estrellas: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">// 1-5</span>
  comentario?: <span class="hljs-built_in">string</span>;
  respuesta?: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// Respuesta del prestador</span>
  createdAt: <span class="hljs-built_in">Date</span>;
}
</div></code></pre>
<h4 id="filtros-disponibles">Filtros Disponibles</h4>
<p><strong>Vista Principal:</strong></p>
<ul>
<li><input type="checkbox" id="checkbox432"><label for="checkbox432">Tipo: Empleos | Servicios | Todos</label></li>
<li><input type="checkbox" id="checkbox433"><label for="checkbox433">CategorÃ­a (diferente por tipo)</label></li>
<li><input type="checkbox" id="checkbox434"><label for="checkbox434">Rango de precio/salario</label></li>
<li><input type="checkbox" id="checkbox435"><label for="checkbox435">Distancia</label></li>
<li><input type="checkbox" id="checkbox436"><label for="checkbox436">Fecha de publicaciÃ³n</label></li>
<li><input type="checkbox" id="checkbox437"><label for="checkbox437">CalificaciÃ³n (solo servicios)</label></li>
</ul>
<hr>
<h3 id="67-panel-admin-admin---sistema-completo">6.7 Panel Admin (<code>/admin</code>) - Sistema Completo</h3>
<blockquote>
<p>Panel administrativo con gestiÃ³n de vendedores, niveles de acceso, mÃ©tricas globales y configuraciÃ³n dinÃ¡mica de la plataforma.</p>
</blockquote>
<p><strong>Acceso:</strong> <code>/admin/*</code> (Requiere cuenta Admin/Vendedor/SuperAdmin)</p>
<hr>
<h2 id="%F0%9F%91%A5-sistema-de-usuarios-admin">ğŸ‘¥ Sistema de Usuarios Admin</h2>
<h3 id="tipos-de-cuenta-admin">Tipos de Cuenta Admin</h3>
<table>
<thead>
<tr>
<th>Tipo</th>
<th>Nivel</th>
<th>DescripciÃ³n</th>
<th>Acceso</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Vendedor</strong></td>
<td>1-3</td>
<td>Vende suscripciones</td>
<td>Limitado segÃºn nivel</td>
</tr>
<tr>
<td><strong>Admin</strong></td>
<td>4</td>
<td>GestiÃ³n general</td>
<td>Amplio pero no total</td>
</tr>
<tr>
<td><strong>SuperAdmin</strong></td>
<td>5</td>
<td>Control total (TÃš)</td>
<td>Sin restricciones</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="%F0%9F%93%8A-sistema-de-vendedores">ğŸ“Š Sistema de Vendedores</h2>
<h3 id="credenciales-de-acceso">Credenciales de Acceso</h3>
<pre class="hljs"><code><div>Login: /admin/login

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” PANEL ADMIN - LOGIN                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Email:                                                     â”‚
â”‚  [_____________________________]                           â”‚
â”‚                                                             â”‚
â”‚  Password:                                                  â”‚
â”‚  [_____________________________]                           â”‚
â”‚                                                             â”‚
â”‚  [Iniciar sesiÃ³n]                                          â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ Solo personal autorizado                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h3 id="dashboard-del-vendedor">Dashboard del Vendedor</h3>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¼ PANEL DE VENTAS                                         â”‚
â”‚  Vendedor: Carlos MartÃ­nez - Nivel 2                       â”‚
â”‚  [Cerrar sesiÃ³n]                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š MIS MÃ‰TRICAS DEL MES:                                  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ¯ Meta      â”‚ ğŸ’° Ventas    â”‚ ğŸ‘¥ Clientes  â”‚ ğŸ’µ Com.  â”‚ â”‚
â”‚  â”‚ 20 cuentas   â”‚ 15 vendidas  â”‚ 15 activos   â”‚ $6,735   â”‚ â”‚
â”‚  â”‚ 75% âœ…       â”‚ $6,735       â”‚ 12 renovÃ³    â”‚ (15%)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  ğŸ“ˆ GrÃ¡fica de ventas (Ãºltimos 30 dÃ­as)                   â”‚
â”‚  [GrÃ¡fico de barras]                                       â”‚
â”‚                                                             â”‚
â”‚  ğŸ”” ALERTAS:                                               â”‚
â”‚  â€¢ 3 clientes por renovar esta semana                     â”‚
â”‚  â€¢ 1 cliente no ha completado onboarding                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h3 id="mi-cartera-de-clientes">Mi Cartera de Clientes</h3>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¥ MI CARTERA                                              â”‚
â”‚  Total: 15 clientes activos                                â”‚
â”‚  [+ Agregar cliente] [Filtros] [Exportar]                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” Buscar...  [Estado: Todos â–¼] [Orden: Recientes â–¼]     â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸª PizzerÃ­a Roma                                     â”‚  â”‚
â”‚  â”‚ Contacto: Juan PÃ©rez â€¢ juan@email.com               â”‚  â”‚
â”‚  â”‚ Estado: âœ… ACTIVO â€¢ RenovaciÃ³n: 15 Ene 2025         â”‚  â”‚
â”‚  â”‚ SuscripciÃ³n desde: 15 Dic 2024 (1 mes)             â”‚  â”‚
â”‚  â”‚ MRR: $449 â€¢ Lifetime: $449                          â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚ ğŸ“Š Actividad:                                        â”‚  â”‚
â”‚  â”‚ â€¢ Ãšltima sesiÃ³n: Hoy a las 10:30 AM                 â”‚  â”‚
â”‚  â”‚ â€¢ Productos: 25 â€¢ Clientes: 89                      â”‚  â”‚
â”‚  â”‚ â€¢ Ventas del mes: $12,450                           â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚ [Ver detalle] [ğŸ’¬ Contactar] [ğŸ“Š Reportes]         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â˜• CafÃ© Central                                      â”‚  â”‚
â”‚  â”‚ Contacto: Ana LÃ³pez â€¢ ana@email.com                 â”‚  â”‚
â”‚  â”‚ Estado: âš ï¸ POR RENOVAR (5 dÃ­as) â€¢ Vence: 27 Dic    â”‚  â”‚
â”‚  â”‚ SuscripciÃ³n desde: 27 Nov 2024 (1 mes)             â”‚  â”‚
â”‚  â”‚ MRR: $449 â€¢ Lifetime: $449                          â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚ âš ï¸ ACCIONES REQUERIDAS:                             â”‚  â”‚
â”‚  â”‚ â€¢ Contactar para renovaciÃ³n                         â”‚  â”‚
â”‚  â”‚ â€¢ Verificar mÃ©todo de pago                          â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚ [ğŸ”” Recordar renovaciÃ³n] [ğŸ’¬ Contactar]            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h3 id="detalle-de-cliente">Detalle de Cliente</h3>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLIENTE: PizzerÃ­a Roma                                     â”‚
â”‚  [â† Volver] [Editar] [Historial completo]                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ INFORMACIÃ“N GENERAL                                     â”‚
â”‚                                                             â”‚
â”‚  Negocio: PizzerÃ­a Roma                                    â”‚
â”‚  DueÃ±o: Juan PÃ©rez                                         â”‚
â”‚  Email: juan@email.com                                     â”‚
â”‚  TelÃ©fono: 55-1234-5678                                    â”‚
â”‚  Vendedor asignado: Carlos MartÃ­nez (yo)                   â”‚
â”‚                                                             â”‚
â”‚  ğŸ’³ SUSCRIPCIÃ“N                                             â”‚
â”‚  Estado: âœ… ACTIVO                                          â”‚
â”‚  Plan: Comercial ($449/mes)                                â”‚
â”‚  Inicio: 15 Dic 2024                                       â”‚
â”‚  PrÃ³xima renovaciÃ³n: 15 Ene 2025 (24 dÃ­as)                â”‚
â”‚  MÃ©todo de pago: â€¢â€¢â€¢â€¢ 4242 (Stripe)                        â”‚
â”‚  MRR: $449                                                 â”‚
â”‚  Lifetime Value: $449                                      â”‚
â”‚                                                             â”‚
â”‚  ğŸ“Š ACTIVIDAD EN LA PLATAFORMA                             â”‚
â”‚  Ãšltima sesiÃ³n: Hoy 10:30 AM                               â”‚
â”‚  Onboarding: âœ… Completado                                  â”‚
â”‚  Productos/Servicios: 25                                   â”‚
â”‚  Clientes registrados: 89                                  â”‚
â”‚  Ventas este mes: $12,450                                  â”‚
â”‚  Empleados: 3                                              â”‚
â”‚  Cupones activos: 2                                        â”‚
â”‚  Ofertas publicadas: 1                                     â”‚
â”‚                                                             â”‚
â”‚  ğŸ“ˆ HISTORIAL DE PAGOS                                     â”‚
â”‚  â€¢ 15 Dic 2024 - $449 âœ… Exitoso                           â”‚
â”‚                                                             â”‚
â”‚  ğŸ’¬ NOTAS DEL VENDEDOR                                     â”‚
â”‚  [Agregar nota...]                                         â”‚
â”‚                                                             â”‚
â”‚  â€¢ 15 Dic - Cliente muy activo, usa la app diariamente    â”‚
â”‚  â€¢ 18 Dic - PidiÃ³ ayuda con cupones, resuelto             â”‚
â”‚                                                             â”‚
â”‚  [Guardar nota]                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ACCIONES:                                                  â”‚
â”‚  [ğŸ’¬ Enviar mensaje] [ğŸ“§ Email] [ğŸ“ Llamar]               â”‚
â”‚  [âš ï¸ Marcar para seguimiento] [ğŸ“Š Ver reportes detallados] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h3 id="estados-de-cliente">Estados de Cliente</h3>
<table>
<thead>
<tr>
<th>Estado</th>
<th>DescripciÃ³n</th>
<th>Color</th>
<th>AcciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td>âœ… <strong>ACTIVO</strong></td>
<td>SuscripciÃ³n pagada</td>
<td>Verde</td>
<td>Monitorear</td>
</tr>
<tr>
<td>âš ï¸ <strong>POR RENOVAR</strong></td>
<td>Vence en &lt;7 dÃ­as</td>
<td>Amarillo</td>
<td>Contactar</td>
</tr>
<tr>
<td>ğŸ”´ <strong>VENCIDO</strong></td>
<td>SuscripciÃ³n expirÃ³</td>
<td>Rojo</td>
<td>Urgente</td>
</tr>
<tr>
<td>ğŸ†• <strong>NUEVO</strong></td>
<td>&lt;30 dÃ­as</td>
<td>Azul</td>
<td>Onboarding</td>
</tr>
<tr>
<td>ğŸ’¤ <strong>INACTIVO</strong></td>
<td>No usa la app</td>
<td>Gris</td>
<td>Reactivar</td>
</tr>
<tr>
<td>âŒ <strong>CANCELADO</strong></td>
<td>CancelÃ³ suscripciÃ³n</td>
<td>Rojo oscuro</td>
<td>Win-back</td>
</tr>
</tbody>
</table>
<h3 id="filtros-de-cartera">Filtros de Cartera</h3>
<pre class="hljs"><code><div>Filtrar por:
â”œâ”€â”€ Estado (Activo, Por renovar, Vencido, etc.)
â”œâ”€â”€ Fecha de renovaciÃ³n (PrÃ³ximos 7/15/30 dÃ­as)
â”œâ”€â”€ Actividad (Activos, Inactivos &gt;7 dÃ­as)
â”œâ”€â”€ Lifetime Value (Alto, Medio, Bajo)
â”œâ”€â”€ Onboarding (Completado, Pendiente)
â””â”€â”€ CategorÃ­a de negocio
</div></code></pre>
<h3 id="m%C3%A9tricas-del-vendedor">MÃ©tricas del Vendedor</h3>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š MIS MÃ‰TRICAS                                            â”‚
â”‚  PerÃ­odo: [Este mes â–¼]                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’° VENTAS                                                  â”‚
â”‚  â€¢ Nuevas suscripciones: 15                                â”‚
â”‚  â€¢ MRR generado: $6,735                                    â”‚
â”‚  â€¢ Meta del mes: 20 (75% âœ…)                               â”‚
â”‚  â€¢ Tasa de conversiÃ³n: 45% (15/33 demos)                   â”‚
â”‚                                                             â”‚
â”‚  ğŸ”„ RENOVACIONES                                            â”‚
â”‚  â€¢ Renovaciones exitosas: 12/13 (92%)                     â”‚
â”‚  â€¢ Churn: 1 cliente (8%)                                   â”‚
â”‚  â€¢ Por renovar esta semana: 3                              â”‚
â”‚                                                             â”‚
â”‚  ğŸ‘¥ CARTERA                                                 â”‚
â”‚  â€¢ Clientes totales: 15                                    â”‚
â”‚  â€¢ Clientes activos: 14                                    â”‚
â”‚  â€¢ Lifetime Value promedio: $449                           â”‚
â”‚                                                             â”‚
â”‚  ğŸ’µ COMISIONES                                              â”‚
â”‚  â€¢ Este mes: $1,010.25 (15% de $6,735)                    â”‚
â”‚  â€¢ AÃ±o acumulado: $1,010.25                                â”‚
â”‚  â€¢ PrÃ³ximo pago: 1 Ene 2025                                â”‚
â”‚                                                             â”‚
â”‚  ğŸ“ˆ TENDENCIA                                               â”‚
â”‚  [GrÃ¡fico de lÃ­neas - Ãºltimos 6 meses]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h2 id="%F0%9F%8E%9A%EF%B8%8F-niveles-de-acceso">ğŸšï¸ Niveles de Acceso</h2>
<h3 id="nivel-1---vendedor-junior">Nivel 1 - Vendedor Junior</h3>
<p><strong>Permisos:</strong></p>
<pre class="hljs"><code><div>MI CARTERA:
â”œâ”€â”€ âœ… Ver mis clientes asignados
â”œâ”€â”€ âœ… Ver mÃ©tricas de mis clientes
â”œâ”€â”€ âœ… Agregar notas
â”œâ”€â”€ âœ… Contactar clientes
â””â”€â”€ âŒ NO puede ver otros vendedores

REPORTES:
â”œâ”€â”€ âœ… Ver mis mÃ©tricas personales
â”œâ”€â”€ âœ… Ver mis comisiones
â””â”€â”€ âŒ NO puede ver mÃ©tricas globales

ACCIONES:
â”œâ”€â”€ âŒ NO puede editar datos de clientes
â”œâ”€â”€ âŒ NO puede reasignar clientes
â””â”€â”€ âŒ NO puede acceder a configuraciÃ³n
</div></code></pre>
<h3 id="nivel-2---vendedor-senior">Nivel 2 - Vendedor Senior</h3>
<p><strong>Permisos:</strong></p>
<pre class="hljs"><code><div>Nivel 1 +

MI CARTERA:
â”œâ”€â”€ âœ… Editar informaciÃ³n de contacto
â”œâ”€â”€ âœ… Ver historial completo de pagos
â””â”€â”€ âœ… Enviar recordatorios automÃ¡ticos

REPORTES:
â”œâ”€â”€ âœ… Ver comparativa con otros vendedores
â””â”€â”€ âœ… Exportar reportes de cartera

ACCIONES:
â”œâ”€â”€ âœ… Solicitar reasignaciÃ³n de clientes
â””â”€â”€ âŒ NO puede acceder a panel global
</div></code></pre>
<h3 id="nivel-3---l%C3%ADder-de-ventas">Nivel 3 - LÃ­der de Ventas</h3>
<p><strong>Permisos:</strong></p>
<pre class="hljs"><code><div>Nivel 2 +

EQUIPO:
â”œâ”€â”€ âœ… Ver todos los vendedores
â”œâ”€â”€ âœ… Ver carteras de su equipo
â”œâ”€â”€ âœ… Reasignar clientes entre vendedores
â””â”€â”€ âœ… Ver mÃ©tricas del equipo

REPORTES:
â”œâ”€â”€ âœ… MÃ©tricas globales de ventas
â”œâ”€â”€ âœ… Embudo de conversiÃ³n
â””â”€â”€ âœ… Proyecciones de MRR

ACCIONES:
â”œâ”€â”€ âœ… Crear metas para vendedores
â””â”€â”€ âŒ NO puede modificar configuraciÃ³n global
</div></code></pre>
<h3 id="nivel-4---admin-general">Nivel 4 - Admin General</h3>
<p><strong>Permisos:</strong></p>
<pre class="hljs"><code><div>Nivel 3 +

GESTIÃ“N:
â”œâ”€â”€ âœ… Gestionar todos los negocios
â”œâ”€â”€ âœ… Gestionar todos los usuarios
â”œâ”€â”€ âœ… Ver y modificar suscripciones
â””â”€â”€ âœ… Acceso a todos los mÃ³dulos

REPORTES:
â”œâ”€â”€ âœ… MÃ©tricas globales completas
â”œâ”€â”€ âœ… Analytics avanzado
â””â”€â”€ âœ… Exportar todo

ACCIONES:
â”œâ”€â”€ âœ… Despublicar/publicar negocios
â”œâ”€â”€ âœ… Suspender/activar cuentas
â””â”€â”€ âŒ NO puede modificar permisos ni configuraciÃ³n
</div></code></pre>
<h3 id="nivel-5---superadmin-t%C3%BA">Nivel 5 - SuperAdmin (TÃš)</h3>
<p><strong>Permisos:</strong></p>
<pre class="hljs"><code><div>SIN RESTRICCIONES â™¾ï¸

GESTIÃ“N TOTAL:
â”œâ”€â”€ âœ… TODO lo que pueden hacer los demÃ¡s niveles
â”œâ”€â”€ âœ… Crear/editar cuentas admin
â”œâ”€â”€ âœ… Asignar niveles de acceso
â”œâ”€â”€ âœ… Definir permisos por nivel
â””â”€â”€ âœ… Ver actividad de todos los admins

CONFIGURACIÃ“N DINÃMICA:
â”œâ”€â”€ âœ… Modificar parÃ¡metros de la app (sin cÃ³digo)
â”œâ”€â”€ âœ… Activar/desactivar features
â”œâ”€â”€ âœ… Configurar precios
â”œâ”€â”€ âœ… Gestionar categorÃ­as
â””â”€â”€ âœ… Modificar textos y labels

REPORTES AVANZADOS:
â”œâ”€â”€ âœ… Dashboards personalizados
â”œâ”€â”€ âœ… MÃ©tricas financieras completas
â”œâ”€â”€ âœ… Proyecciones y forecasting
â””â”€â”€ âœ… Exportar base de datos completa

AUDITORÃA:
â”œâ”€â”€ âœ… Ver log de acciones de admins
â”œâ”€â”€ âœ… Historial de cambios
â””â”€â”€ âœ… Tracking de actividad sospechosa
</div></code></pre>
<hr>
<h2 id="%F0%9F%8E%9B%EF%B8%8F-panel-superadmin">ğŸ›ï¸ Panel SuperAdmin</h2>
<h3 id="dashboard-principal">Dashboard Principal</h3>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘‘ SUPERADMIN - PANEL DE CONTROL                          â”‚
â”‚  [Cerrar sesiÃ³n] [âš™ï¸ ConfiguraciÃ³n] [ğŸ“Š Analytics]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š MÃ‰TRICAS GLOBALES (Diciembre 2024)                     â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ’¼ Negocios  â”‚ ğŸ’° MRR       â”‚ ğŸ‘¥ Usuarios  â”‚ ğŸ”„ Churn â”‚ â”‚
â”‚  â”‚ 234 activos  â”‚ $105,066     â”‚ 12,450       â”‚ 3.2%     â”‚ â”‚
â”‚  â”‚ â†—ï¸ +15 mes   â”‚ â†—ï¸ +$6,735   â”‚ â†—ï¸ +890      â”‚ â†˜ï¸ -0.5% â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  ğŸ‘¥ EQUIPO DE VENTAS (5 vendedores)                        â”‚
â”‚  â€¢ Top vendedor: MarÃ­a G. (23 cuentas, $10,327)           â”‚
â”‚  â€¢ Promedio por vendedor: 47 cuentas                       â”‚
â”‚  â€¢ Meta del mes: 80% alcanzada                             â”‚
â”‚                                                             â”‚
â”‚  ğŸ”” ALERTAS CRÃTICAS:                                      â”‚
â”‚  âš ï¸ 12 suscripciones vencen en 24 horas                    â”‚
â”‚  âš ï¸ 3 pagos rechazados requieren atenciÃ³n                  â”‚
â”‚  âœ… Sistema funcionando correctamente                      â”‚
â”‚                                                             â”‚
â”‚  [Ver reportes completos] [Gestionar vendedores]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h3 id="gesti%C3%B3n-de-vendedores">GestiÃ³n de Vendedores</h3>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¥ GESTIÃ“N DE VENDEDORES                                   â”‚
â”‚  [+ Nuevo vendedor] [Configurar comisiones]                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ MarÃ­a GonzÃ¡lez - Nivel 3 (LÃ­der)                    â”‚  â”‚
â”‚  â”‚ maria@anunciaya.com â€¢ Activa desde: Ene 2024       â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚ ğŸ“Š MÃ©tricas:                                         â”‚  â”‚
â”‚  â”‚ â€¢ Cartera: 23 clientes                              â”‚  â”‚
â”‚  â”‚ â€¢ MRR generado: $10,327                             â”‚  â”‚
â”‚  â”‚ â€¢ Tasa retenciÃ³n: 95%                               â”‚  â”‚
â”‚  â”‚ â€¢ Comisiones del mes: $1,549.05                     â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚ [Ver detalle] [Editar nivel] [Ver actividad]       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h3 id="configuraci%C3%B3n-de-permisos-por-nivel">ConfiguraciÃ³n de Permisos por Nivel</h3>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸšï¸ CONFIGURAR NIVEL 2 - Vendedor Senior                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CARTERA DE CLIENTES:                                       â”‚
â”‚  â˜‘ï¸ Ver clientes asignados                                  â”‚
â”‚  â˜‘ï¸ Ver mÃ©tricas de clientes                                â”‚
â”‚  â˜‘ï¸ Editar informaciÃ³n de contacto                          â”‚
â”‚  â˜ Reasignar clientes                                      â”‚
â”‚  â˜ Ver clientes de otros vendedores                        â”‚
â”‚                                                             â”‚
â”‚  REPORTES:                                                  â”‚
â”‚  â˜‘ï¸ Ver mÃ©tricas personales                                 â”‚
â”‚  â˜‘ï¸ Ver comparativa con equipo                              â”‚
â”‚  â˜ Ver mÃ©tricas globales                                   â”‚
â”‚  â˜ Exportar base de datos                                  â”‚
â”‚                                                             â”‚
â”‚  GESTIÃ“N:                                                   â”‚
â”‚  â˜ Gestionar negocios                                      â”‚
â”‚  â˜ Gestionar usuarios finales                              â”‚
â”‚  â˜ Modificar suscripciones                                 â”‚
â”‚  â˜ Acceder a configuraciÃ³n                                 â”‚
â”‚                                                             â”‚
â”‚  [Guardar cambios] [Cancelar] [Restaurar defaults]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h3 id="configuraci%C3%B3n-din%C3%A1mica-de-la-app">ConfiguraciÃ³n DinÃ¡mica de la App</h3>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ CONFIGURACIÃ“N DINÃMICA - SIN CÃ“DIGO                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’° PRECIOS Y PLANES                                        â”‚
â”‚  Plan Comercial: $[449] MXN/mes                            â”‚
â”‚  Plan Anual (prÃ³ximamente): $[____] MXN/aÃ±o               â”‚
â”‚  Descuento anual: [__]%                                    â”‚
â”‚                                                             â”‚
â”‚  ğŸ¯ FEATURES TOGGLES                                        â”‚
â”‚  â˜‘ï¸ Marketplace habilitado                                  â”‚
â”‚  â˜‘ï¸ Rifas habilitadas                                       â”‚
â”‚  â˜‘ï¸ Bolsa de trabajo habilitada                             â”‚
â”‚  â˜‘ï¸ ChatYA habilitado                                       â”‚
â”‚  â˜ Pagos en app (prÃ³ximamente)                             â”‚
â”‚  â˜ Delivery integrado (beta)                               â”‚
â”‚                                                             â”‚
â”‚  ğŸ“‹ CATEGORÃAS DE NEGOCIOS                                  â”‚
â”‚  [Gestionar categorÃ­as y subcategorÃ­as]                    â”‚
â”‚                                                             â”‚
â”‚  ğŸ’³ LÃMITES Y RESTRICCIONES                                 â”‚
â”‚  â€¢ MÃ¡x. productos por negocio: [____] (0 = ilimitado)     â”‚
â”‚  â€¢ MÃ¡x. servicios por negocio: [____] (0 = ilimitado)     â”‚
â”‚  â€¢ MÃ¡x. empleados por negocio: [____]                      â”‚
â”‚  â€¢ MÃ¡x. sucursales por negocio: [____]                     â”‚
â”‚  â€¢ MÃ¡x. imÃ¡genes por artÃ­culo: [5]                         â”‚
â”‚  â€¢ MÃ¡x. imÃ¡genes en galerÃ­a: [10]                          â”‚
â”‚  â€¢ MÃ¡x. subcategorÃ­as por negocio: [3]                     â”‚
â”‚                                                             â”‚
â”‚  ğŸ¯ SISTEMA DE PUNTOS (CardYA)                              â”‚
â”‚  â€¢ Umbral Bronce â†’ Plata: [5,000] puntos lifetime         â”‚
â”‚  â€¢ Umbral Plata â†’ Oro: [15,000] puntos lifetime           â”‚
â”‚  â€¢ Multiplicador Bronce: [1.0]x                            â”‚
â”‚  â€¢ Multiplicador Plata: [1.25]x                            â”‚
â”‚  â€¢ Multiplicador Oro: [1.5]x                               â”‚
â”‚  â€¢ ExpiraciÃ³n QR CardYA: [2] minutos                       â”‚
â”‚                                                             â”‚
â”‚  ğŸ“ TEXTOS Y LABELS                                         â”‚
â”‚  [Editar textos de la interfaz]                            â”‚
â”‚                                                             â”‚
â”‚  [Guardar cambios]                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h3 id="reportes-y-m%C3%A9tricas-superadmin">Reportes y MÃ©tricas SuperAdmin</h3>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š REPORTES AVANZADOS                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’° FINANCIEROS                                             â”‚
â”‚  â€¢ MRR actual: $105,066                                    â”‚
â”‚  â€¢ ProyecciÃ³n 3 meses: $127,500                            â”‚
â”‚  â€¢ ARR (Annual Run Rate): $1,260,792                       â”‚
â”‚  â€¢ LTV promedio: $2,245                                    â”‚
â”‚  â€¢ CAC promedio: $125                                      â”‚
â”‚  â€¢ LTV/CAC ratio: 18x                                      â”‚
â”‚                                                             â”‚
â”‚  ğŸ‘¥ USUARIOS                                                â”‚
â”‚  â€¢ Total usuarios: 12,450                                  â”‚
â”‚  â€¢ Modo Personal: 12,216                                   â”‚
â”‚  â€¢ Modo Comercial: 234                                     â”‚
â”‚  â€¢ Tasa de conversiÃ³n: 1.9%                                â”‚
â”‚                                                             â”‚
â”‚  ğŸ“ˆ CRECIMIENTO                                             â”‚
â”‚  [GrÃ¡ficos avanzados]                                      â”‚
â”‚  â€¢ MRR growth rate: 6.4%                                   â”‚
â”‚  â€¢ User growth rate: 7.2%                                  â”‚
â”‚  â€¢ Churn rate: 3.2%                                        â”‚
â”‚                                                             â”‚
â”‚  ğŸ¯ POR CATEGORÃA                                           â”‚
â”‚  Top categorÃ­as por MRR:                                   â”‚
â”‚  1. Restaurantes: $32,450 (65 negocios)                   â”‚
â”‚  2. Servicios: $18,780 (42 negocios)                      â”‚
â”‚  3. Retail: $15,230 (34 negocios)                         â”‚
â”‚                                                             â”‚
â”‚  ğŸ† SISTEMA DE LEALTAD (CardYA)                             â”‚
â”‚  â€¢ Total puntos otorgados (global): X                      â”‚
â”‚  â€¢ Usuarios por nivel: Bronce X / Plata X / Oro X         â”‚
â”‚  â€¢ Negocios con CardYA activo: X de Y                      â”‚
â”‚  â€¢ Promedio puntos por transacciÃ³n: X                      â”‚
â”‚                                                             â”‚
â”‚  ğŸŸï¸ CUPONES Y OFERTAS                                       â”‚
â”‚  â€¢ Cupones creados este mes: X                             â”‚
â”‚  â€¢ Cupones canjeados: X                                    â”‚
â”‚  â€¢ Tasa de canje: X%                                       â”‚
â”‚  â€¢ Ofertas activas: X                                      â”‚
â”‚                                                             â”‚
â”‚  ğŸ° DINÃMICAS                                               â”‚
â”‚  â€¢ Rifas activas: X                                        â”‚
â”‚  â€¢ Rifas completadas este mes: X                           â”‚
â”‚  â€¢ Participantes totales: X                                â”‚
â”‚                                                             â”‚
â”‚  ğŸ’¼ EMPLEOS                                                 â”‚
â”‚  â€¢ Vacantes activas: X                                     â”‚
â”‚  â€¢ Aplicaciones este mes: X                                â”‚
â”‚  â€¢ Vacantes cerradas: X                                    â”‚
â”‚                                                             â”‚
â”‚  [Exportar Excel] [Exportar PDF] [Personalizar dashboard] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<h3 id="log-de-actividad-de-admins">Log de Actividad de Admins</h3>
<pre class="hljs"><code><div>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“œ AUDITORÃA - ACTIVIDAD DE ADMINS                         â”‚
â”‚  [Hoy] [Semana] [Mes] [Personalizado]                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  2:45 PM â€¢ MarÃ­a GonzÃ¡lez (Nivel 3)                        â”‚
â”‚  â””â”€ ReasignÃ³ cliente &quot;PizzerÃ­a Roma&quot; a Carlos M.          â”‚
â”‚                                                             â”‚
â”‚  1:30 PM â€¢ Carlos MartÃ­nez (Nivel 2)                       â”‚
â”‚  â””â”€ AgregÃ³ nota a cliente &quot;CafÃ© Central&quot;                   â”‚
â”‚                                                             â”‚
â”‚  10:15 AM â€¢ Admin General (Nivel 4)                        â”‚
â”‚  â””â”€ SuspendiÃ³ negocio &quot;Tienda XYZ&quot; (falta de pago)        â”‚
â”‚                                                             â”‚
â”‚  9:00 AM â€¢ TÃš (SuperAdmin)                                 â”‚
â”‚  â””â”€ ModificÃ³ precio de Plan Comercial a $449              â”‚
â”‚                                                             â”‚
â”‚  [Exportar log] [Filtrar por usuario] [Filtrar por acciÃ³n]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</div></code></pre>
<hr>
<h2 id="%F0%9F%93%8A-m%C3%B3dulos-del-panel-admin">ğŸ“Š MÃ³dulos del Panel Admin</h2>
<h3 id="1-negocios-adminnegocios">1. Negocios (<code>/admin/negocios</code>)</h3>
<p>Funciones:
â”œâ”€â”€ Ver todos los negocios (tabla paginada)
â”œâ”€â”€ Filtrar por estado (activo, suspendido, etc.)
â”œâ”€â”€ Buscar por nombre/categorÃ­a
â”œâ”€â”€ Ver detalle completo del negocio
â”œâ”€â”€ Ver sucursales del negocio
â”œâ”€â”€ EstadÃ­sticas por sucursal
â”œâ”€â”€ Activar/desactivar sucursal especÃ­fica
â”œâ”€â”€ Editar informaciÃ³n
â”œâ”€â”€ Suspender/reactivar negocio
â”œâ”€â”€ Ver actividad (logins, ventas, etc.)
â”œâ”€â”€ Reasignar vendedor
â””â”€â”€ Exportar listado</p>
<pre class="hljs"><code><div>
### 2. Usuarios (`/admin/usuarios`)

</div></code></pre>
<p>Funciones:
â”œâ”€â”€ Ver todos los usuarios
â”œâ”€â”€ Filtrar por modo (Personal/Comercial)
â”œâ”€â”€ Ver perfil completo
â”œâ”€â”€ Cambiar modo de cuenta
â”œâ”€â”€ Ver historial de suscripciones
â”œâ”€â”€ Ver actividad en la app
â”œâ”€â”€ Suspender/reactivar cuenta
â””â”€â”€ Exportar base de usuarios</p>
<pre class="hljs"><code><div>
### 3. Suscripciones y Pagos (`/admin/suscripciones`)

</div></code></pre>
<p>Funciones:
â”œâ”€â”€ Ver todas las suscripciones
â”œâ”€â”€ Estado (activas, vencidas, canceladas)
â”œâ”€â”€ PrÃ³ximas a vencer (alertas)
â”œâ”€â”€ Pagos rechazados
â”œâ”€â”€ GrÃ¡fica de MRR histÃ³rico
â”œâ”€â”€ Proyecciones de ingresos
â”œâ”€â”€ Procesar reembolso manual
â”œâ”€â”€ Exportar reporte financiero
â”œâ”€â”€ Reintentar pagos fallidos
â””â”€â”€ Webhook logs (eventos de Stripe)
âš ï¸ Nota: Reembolsos y ajustes complejos se procesan en el Dashboard de Stripe directamente.</p>
<pre class="hljs"><code><div>
### 4. Vendedores (`/admin/vendedores`)

**Solo SuperAdmin**

</div></code></pre>
<p>Funciones:
â”œâ”€â”€ Ver todos los vendedores
â”œâ”€â”€ Crear nuevo vendedor
â”œâ”€â”€ Asignar nivel de acceso
â”œâ”€â”€ Ver mÃ©tricas por vendedor
â”œâ”€â”€ Reasignar carteras
â”œâ”€â”€ Configurar comisiones
â”œâ”€â”€ Ver log de actividad
â””â”€â”€ Suspender/activar cuenta</p>
<pre class="hljs"><code><div>
### 5. ConfiguraciÃ³n (`/admin/config`)

**Solo SuperAdmin**

</div></code></pre>
<p>Funciones:
â”œâ”€â”€ Configurar precios
â”œâ”€â”€ Activar/desactivar features
â”œâ”€â”€ Gestionar categorÃ­as
â”œâ”€â”€ Configurar lÃ­mites
â”œâ”€â”€ Editar textos de la app
â”œâ”€â”€ Configurar integraciones
â”œâ”€â”€ Gestionar permisos por nivel
â””â”€â”€ Backup de configuraciÃ³n</p>
<pre class="hljs"><code><div>
### 6. Reportes (`/admin/reportes`)

</div></code></pre>
<p>Acceso segÃºn nivel:
â”œâ”€â”€ Vendedores: Solo sus mÃ©tricas
â”œâ”€â”€ LÃ­deres: MÃ©tricas del equipo
â”œâ”€â”€ Admin: MÃ©tricas globales
â””â”€â”€ SuperAdmin: Todo + exportaciÃ³n completa</p>
<pre class="hljs"><code><div>
---

## ğŸ” Modelo de Datos

```typescript
interface AdminUser {
  id: string;
  email: string;
  password: string;  // Hasheado
  nombre: string;
  nivel: 1 | 2 | 3 | 4 | 5;  // 1-3: Vendedores, 4: Admin, 5: SuperAdmin
  activo: boolean;
  
  // Solo vendedores
  carteraClientes?: string[];  // IDs de negocios asignados
  metasMensuales?: {
    nuevasCuentas: number;
    renovaciones: number;
  };
  comisiones?: {
    porcentaje: number;  // 15% por defecto
    acumulado: number;
  };
  
  createdAt: Date;
  ultimoAcceso?: Date;
}

interface ClienteVendedor {
  negocioId: string;
  vendedorId: string;
  fechaAsignacion: Date;
  estado: 'activo' | 'por_renovar' | 'vencido' | 'cancelado';
  notas: Array&lt;{
    fecha: Date;
    vendedorId: string;
    texto: string;
  }&gt;;
  recordatorios: Array&lt;{
    fecha: Date;
    tipo: 'renovacion' | 'seguimiento' | 'otro';
    enviado: boolean;
  }&gt;;
}

interface ConfiguracionApp {
  precios: {
    planComercial: number;
    planAnual?: number;
    descuentoAnual?: number;
  };
  features: {
    marketplace: boolean;
    rifas: boolean;
    bolsaTrabajo: boolean;
    pagosEnApp: boolean;
    chatYA: boolean;
  };
  limites: {
    maxProductos: number;
    maxServicios: number;
    maxEmpleados: number;
    maxSucursales: number;
    maxImagenesPorArticulo: number;
    maxImagenesGaleria: number;
    maxSubcategorias: number;
  };
  cardYA: {
    umbralPlata: number;      // 5000
    umbralOro: number;        // 15000
    multiplicadorBronce: number;  // 1.0
    multiplicadorPlata: number;   // 1.25
    multiplicadorOro: number;     // 1.5
    expiracionQRMinutos: number;  // 2
  };
  textos: {
    [key: string]: string;
  };
}

interface LogAdmin {
  id: string;
  adminId: string;
  accion: string;
  modulo: string;
  detalles: any;
  timestamp: Date;
}
</div></code></pre>
<hr>
<h2 id="%F0%9F%9A%80-fase-7-lanzamiento--operaciones">ğŸš€ FASE 7: Lanzamiento + Operaciones</h2>
<h3 id="71-pre-lanzamiento">7.1 Pre-Lanzamiento</h3>
<ul>
<li>Testing E2E</li>
<li>Performance</li>
<li>SEO</li>
<li>Analytics</li>
<li>Sentry</li>
</ul>
<h3 id="72-infraestructura-producci%C3%B3n">7.2 Infraestructura ProducciÃ³n</h3>
<ul>
<li>Vercel (Frontend)</li>
<li>Railway (Backend + PostgreSQL)</li>
<li>MongoDB Atlas</li>
<li>Upstash (Redis)</li>
<li>Stripe â†’ <strong>Modo LIVE</strong></li>
</ul>
<h3 id="73-beta-50-negocios">7.3 Beta (50 negocios)</h3>
<ol>
<li>Embajadores registran pilotos</li>
<li>Trial de 7 dÃ­as (modo comercial gratis)</li>
<li>CapacitaciÃ³n</li>
<li>Feedback</li>
<li>IteraciÃ³n</li>
</ol>
<hr>
<hr>
<h2 id="%F0%9F%93%8B-parte-3-orden-de-desarrollo">ğŸ“‹ PARTE 3: ORDEN DE DESARROLLO</h2>
<hr>
<h3 id="fase-4-%E2%9C%85-completada">FASE 4 âœ… COMPLETADA</h3>
<p>â””â”€â”€ ColumnaDerecha (rediseÃ±o) âœ…</p>
<hr>
<h3 id="fase-5---bloque-1-fundamentos-%E2%9C%85-completado">FASE 5 - Bloque 1: Fundamentos âœ… COMPLETADO</h3>
<pre class="hljs"><code><div>â”œâ”€â”€ 5.0 Sistema de Modos - Backend âœ… COMPLETADO
â”‚
â”œâ”€â”€ 5.1 Onboarding Backend + Sucursales âœ… COMPLETADO
â”‚   â”œâ”€â”€ 15 endpoints REST
â”‚   â”œâ”€â”€ Sistema de sucursales
â”‚   â””â”€â”€ MigraciÃ³n BD
â”‚
â”œâ”€â”€ 5.1.0 EstandarizaciÃ³n Nomenclatura âœ… COMPLETADO
â”‚   â”œâ”€â”€ Drizzle casing automÃ¡tico
â”‚   â””â”€â”€ API responses en inglÃ©s (439 cambios)
â”‚
â”œâ”€â”€ 5.1.1 Onboarding Frontend âœ… COMPLETADO (26/12/2024)
â”‚   â”œâ”€â”€ Layout + componentes base âœ…
â”‚   â”œâ”€â”€ Paso 1-8 completos âœ…
â”‚   â”œâ”€â”€ Sistema de FinalizaciÃ³n âœ…
â”‚   â””â”€â”€ Cloudinary (imÃ¡genes) âœ…
â”‚
â”œâ”€â”€ 5.2 Toggle UI + ProtecciÃ³n Rutas âœ… COMPLETADO (26/12/2024)
â”‚   â”œâ”€â”€ Componente ToggleModoUsuario âœ…
â”‚   â”œâ”€â”€ ModalCambiarModo âœ…
â”‚   â”œâ”€â”€ ColumnaIzquierda dinÃ¡mica âœ…
â”‚   â”œâ”€â”€ MenuDrawer dinÃ¡mico âœ…
â”‚   â”œâ”€â”€ BottomNav dinÃ¡mico âœ…
â”‚   â”œâ”€â”€ ModoGuard (protecciÃ³n rutas) âœ…
â”‚   â””â”€â”€ Datos dinÃ¡micos del negocio âœ…
â”‚
â”œâ”€â”€ 5.3 Negocios Directorio âœ… COMPLETADO (02/01/2026)
â”‚   â”œâ”€â”€ Lista con geolocalizaciÃ³n (PostGIS) âœ…
â”‚   â”œâ”€â”€ Filtros por categorÃ­a/subcategorÃ­a âœ…
â”‚   â”œâ”€â”€ BÃºsqueda por nombre âœ…
â”‚   â”œâ”€â”€ Vista mapa con marcadores âœ…
â”‚   â”œâ”€â”€ Perfil de negocio (galerÃ­a, horarios, catÃ¡logo) âœ…
â”‚   â””â”€â”€ Sistema de votos y mÃ©tricas âœ…
â”‚
â”‚
â”œâ”€â”€ 5.3.1 Sistema Compartir (base) âœ… PARCIAL (02/01/2026)
â”‚   â”œâ”€â”€ DropdownCompartir.tsx âœ…
â”‚   â”œâ”€â”€ BannerRegistro.tsx âœ…
â”‚   â”œâ”€â”€ LayoutPublico.tsx âœ…
â”‚   â”œâ”€â”€ useOpenGraph.ts âœ…
â”‚   â”œâ”€â”€ /p/negocio/:id âœ…
â”‚   â”œâ”€â”€ /p/articulo/:id âœ…
â”‚   â””â”€â”€ /p/oferta/:id âœ…
â”‚
â”œâ”€â”€ 5.3.2 Auth Opcional + ModalAuthRequerido | âœ… 100% (16/01/2026)
</div></code></pre>
<hr>
<h3 id="fase-5---bloque-2-business-studio-%E2%8F%B3-en-progreso-15">FASE 5 - Bloque 2: Business Studio â³ EN PROGRESO (15%)</h3>
<pre class="hljs"><code><div>â”œâ”€â”€ 5.4 Business Studio - Layout y Base âœ… COMPLETADO (02/01/2026)
â”‚   â”œâ”€â”€ DrawerBusinessStudio.tsx âœ…
â”‚   â”œâ”€â”€ MenuBusinessStudio.tsx âœ…
â”‚   â”œâ”€â”€ PanelPreviewNegocio.tsx âœ…
â”‚   â”œâ”€â”€ Router con 14 rutas âœ…
â”‚   â”œâ”€â”€ Interceptor Axios (sucursalId automÃ¡tico) âœ…
â”‚   â””â”€â”€ negocioManagement.service.ts (15 funciones CRUD) âœ…
â”‚
â”œâ”€â”€ 5.4 Dashboard âœ… COMPLETADO (02/01/2026)
â”‚   â”œâ”€â”€ KPIs principales y secundarios âœ…
â”‚   â”œâ”€â”€ GrÃ¡fica de ventas âœ…
â”‚   â”œâ”€â”€ Actividad reciente âœ…
â”‚   â””â”€â”€ 7 endpoints backend âœ…
â”‚
â”œâ”€â”€ 5.4 Mi Perfil âœ… COMPLETADO (06/01/2026)
â”‚   â”œâ”€â”€ Tab Datos del Negocio + Panel CardYA âœ…
â”‚   â”œâ”€â”€ Tab Contacto (telÃ©fono, WhatsApp, redes) âœ…
â”‚   â”œâ”€â”€ Tab UbicaciÃ³n (mapa Leaflet) âœ…
â”‚   â”œâ”€â”€ Tab Horarios (con break/comida) âœ…
â”‚   â”œâ”€â”€ Tab ImÃ¡genes (logo, portada, galerÃ­a) âœ…
â”‚   â””â”€â”€ Tab OperaciÃ³n (pagos, envÃ­o, servicio) âœ…
â”‚
â”œâ”€â”€ 5.4.1 CatÃ¡logo CRUD âœ… COMPLETADO (10/01/2026)
â”‚   â”œâ”€â”€ Lista de productos/servicios
â”‚   â”œâ”€â”€ Modal crear/editar artÃ­culo
â”‚   â”œâ”€â”€ Upload imÃ¡genes (Cloudinary)
â”‚   â”œâ”€â”€ Filtros por tipo y categorÃ­a
â”‚   â””â”€â”€ Toggle activo/inactivo
â”‚
â””â”€â”€ 5.4.2 Ofertas CRUD âœ… COMPLETADO 90% (16/01/2026)
    â”œâ”€â”€ Lista de ofertas del negocio
    â”œâ”€â”€ Modal crear/editar oferta
    â”œâ”€â”€ Tipos: 2x1, %, $, combo, happy hour
    â”œâ”€â”€ Configurar dÃ­as y horarios
    â””â”€â”€ Vista previa pÃºblica
</div></code></pre>
<hr>
<h3 id="fase-5---bloque-3-sistema-de-lealtad-1-2-semanas">FASE 5 - Bloque 3: Sistema de Lealtad (~1-2 semanas)</h3>
<p>â”œâ”€â”€ 5.5 ScanYA + PWA â³ PENDIENTE (~2-3 dÃ­as)
â”‚   â”œâ”€â”€ Escanear QR de clientes
â”‚   â”œâ”€â”€ Registrar ventas
â”‚   â”œâ”€â”€ Otorgar puntos automÃ¡ticos
â”‚   â”œâ”€â”€ Validar cupones
â”‚   â”œâ”€â”€ Login empleados (nick + PIN)
â”‚   â””â”€â”€ PWA widget standalone
â”‚
â”œâ”€â”€ 5.6 CardYA + PWA â³ PENDIENTE (~2-3 dÃ­as) â†’ depende de 5.5
â”‚   â”œâ”€â”€ Tarjeta de lealtad digital
â”‚   â”œâ”€â”€ QR dinÃ¡mico (expira 2 min)
â”‚   â”œâ”€â”€ Puntos por negocio
â”‚   â”œâ”€â”€ Niveles Bronce/Plata/Oro
â”‚   â”œâ”€â”€ Multiplicadores (1x, 1.25x, 1.5x)
â”‚   â””â”€â”€ PWA widget standalone
â”‚
â”œâ”€â”€ 5.7 Clientes + Transacciones â³ PENDIENTE (~2-3 dÃ­as) â†’ depende de 5.5
â”‚   â”œâ”€â”€ Lista de clientes que han comprado
â”‚   â”œâ”€â”€ Historial de transacciones
â”‚   â”œâ”€â”€ Filtros por fecha/cliente
â”‚   â””â”€â”€ Detalle por cliente (visitas, puntos, nivel)
â”‚
â”œâ”€â”€ 5.8 Opiniones (BS + ScanYA) â³ PENDIENTE (~2-3 dÃ­as) â†’ depende de 5.5 + 5.7
â”‚   â”œâ”€â”€ Ver reseÃ±as con calificaciÃ³n (â­ 1-5)
â”‚   â”œâ”€â”€ Dashboard de mÃ©tricas (promedio, total, tasa respuesta)
â”‚   â”œâ”€â”€ Filtros (calificaciÃ³n, estado, sucursal, fecha)
â”‚   â”œâ”€â”€ Responder reseÃ±as desde BS (web)
â”‚   â”œâ”€â”€ Responder reseÃ±as desde ScanYA (mÃ³vil)
â”‚   â”œâ”€â”€ Templates de respuesta pre-escritos
â”‚   â”œâ”€â”€ Editar/eliminar respuestas propias
â”‚   â”œâ”€â”€ Reportar reseÃ±as inapropiadas
â”‚   â”œâ”€â”€ Badge &quot;Compra verificada&quot; (valida transacciones)
â”‚   â”œâ”€â”€ Sistema de permisos por empleado
â”‚   â”œâ”€â”€ Notificaciones push de nuevas reseÃ±as
â”‚   â”œâ”€â”€ AtribuciÃ³n de respuestas (dueÃ±o/gerente/empleado)
â”‚   â”œâ”€â”€ Vista mÃ³vil simplificada en ScanYA
â”‚   â”œâ”€â”€ LÃ­mite: 1 reseÃ±a cada 30 dÃ­as por cliente
â”‚   â””â”€â”€ EstadÃ­sticas: distribuciÃ³n calificaciones + tiempo respuesta
â”‚
â””â”€â”€ 5.9 Puntos (Config BS) â³ PENDIENTE (~1 dÃ­a) â†’ depende de 5.6
â”œâ”€â”€ Valor del punto ($X = 1 punto)
â”œâ”€â”€ Activar/desactivar CardYA
â”œâ”€â”€ Simulador de acumulaciÃ³n
â””â”€â”€ EstadÃ­sticas de puntos otorgados</p>
<p><strong>Nota importante sobre 5.8 Opiniones:</strong></p>
<ul>
<li><strong>Requiere obligatoriamente:</strong> Tabla <code>transacciones</code> de 5.5 ScanYA para validar compras</li>
<li><strong>Requiere obligatoriamente:</strong> Sistema de clientes de 5.7 para verificar historial</li>
<li><strong>Doble acceso:</strong> Business Studio (web) + ScanYA (PWA mÃ³vil)</li>
<li><strong>ValidaciÃ³n:</strong> Solo clientes con compras verificadas pueden reseÃ±ar</li>
<li><strong>Multi-usuario:</strong> DueÃ±os, gerentes y empleados autorizados pueden responder</li>
<li><strong>Trazabilidad:</strong> Sistema registra quiÃ©n respondiÃ³ y desde dÃ³nde (BS/ScanYA)</li>
</ul>
<hr>
<h3 id="fase-5---bloque-4-comunicaci%C3%B3n-y-cupones-1-semana">FASE 5 - Bloque 4: ComunicaciÃ³n y Cupones (~1 semana)</h3>
<pre class="hljs"><code><div>â”œâ”€â”€ 5.10 ChatYA + PWA â³ PENDIENTE (~3-4 dÃ­as)
â”‚   â”œâ”€â”€ Socket.io + MongoDB
â”‚   â”œâ”€â”€ Identidad segÃºn modo (personal/comercial)
â”‚   â”œâ”€â”€ Overlay persistente (no ruta dedicada)
â”‚   â””â”€â”€ PWA widget standalone
â”‚
â””â”€â”€ 5.11 Cupones â³ PENDIENTE (~2-3 dÃ­as) â†’ depende de 5.5
    â”œâ”€â”€ Vista pÃºblica: /p/cupon/:codigo
    â”œâ”€â”€ CRUD cupones en BS
    â”œâ”€â”€ Tipos: %, $, 2x1, regalo
    â”œâ”€â”€ LÃ­mites de uso
    â””â”€â”€ ValidaciÃ³n en ScanYA
</div></code></pre>
<hr>
<h3 id="fase-6---secciones-p%C3%BAblicas--bs-restantes-2-3-semanas">FASE 6 - Secciones PÃºblicas + BS Restantes (~2-3 semanas)</h3>
<pre class="hljs"><code><div>â”œâ”€â”€ 6.0 Ofertas PÃºblicas â³ PENDIENTE (~1-2 dÃ­as) â†’ depende de 5.4.2
â”‚   â””â”€â”€ Vista pÃºblica lista (ruta ya existe)
â”‚
â”œâ”€â”€ 6.1 MarketPlace â³ PENDIENTE (~3-4 dÃ­as)
â”‚   â”œâ”€â”€ Vista pÃºblica: /p/marketplace/:id
â”‚   â”œâ”€â”€ Compra-venta entre usuarios
â”‚   â””â”€â”€ Publicaciones modo Personal
â”‚
â”œâ”€â”€ 6.2 DinÃ¡micas â³ PENDIENTE (~3-4 dÃ­as)
â”‚   â”œâ”€â”€ Vista pÃºblica: /p/rifa/:id
â”‚   â”œâ”€â”€ Rifas y sorteos
â”‚   â”œâ”€â”€ ParticipaciÃ³n con puntos
â”‚   â””â”€â”€ CRUD Rifas en BS
â”‚
â”œâ”€â”€ 6.3 Empleos â³ PENDIENTE (~2-3 dÃ­as)
â”‚   â”œâ”€â”€ Vista pÃºblica: /p/empleo/:id
â”‚   â”œâ”€â”€ Bolsa de trabajo
â”‚   â””â”€â”€ CRUD Vacantes en BS
â”‚
â”œâ”€â”€ 6.4 Empleados (BS) â³ PENDIENTE (~1-2 dÃ­as) â†’ depende de 5.5
â”‚   â”œâ”€â”€ GestiÃ³n de empleados
â”‚   â”œâ”€â”€ Nick + PIN para ScanYA
â”‚   â””â”€â”€ Permisos configurables
â”‚
â”œâ”€â”€ 6.5 Sucursales (BS) â³ PENDIENTE (~2 dÃ­as)
â”‚   â”œâ”€â”€ Ver todas las sucursales
â”‚   â”œâ”€â”€ Agregar/editar sucursal
â”‚   â””â”€â”€ Configurar sucursal principal
â”‚
â”œâ”€â”€ 6.6 Reportes + Alertas (BS) â³ PENDIENTE (~2-3 dÃ­as) â†’ depende de 5.5
â”‚   â”œâ”€â”€ EstadÃ­sticas de ventas
â”‚   â”œâ”€â”€ Exportar reportes
â”‚   â””â”€â”€ Notificaciones del sistema
â”‚
â””â”€â”€ 6.7 Panel Admin â³ PENDIENTE (~1-2 semanas)
    â”œâ”€â”€ GestiÃ³n de vendedores (niveles 1-5)
    â”œâ”€â”€ MÃ©tricas globales
    â”œâ”€â”€ ConfiguraciÃ³n dinÃ¡mica (sin cÃ³digo)
    â”œâ”€â”€ GestiÃ³n de negocios/usuarios
    â”œâ”€â”€ Suscripciones y pagos (Stripe)
    â””â”€â”€ Log de auditorÃ­a
</div></code></pre>
<hr>
<h3 id="fase-7-1-semana">FASE 7 (~1 semana)</h3>
<pre class="hljs"><code><div>â”œâ”€â”€ Testing y optimizaciÃ³n
â”œâ”€â”€ Infraestructura producciÃ³n
â”œâ”€â”€ Variables de entorno (Railway/Vercel)
â”œâ”€â”€ Stripe modo live
â”œâ”€â”€ Dominio personalizado + SSL
â””â”€â”€ Beta 50 negocios
</div></code></pre>
<hr>
<h2 id="%F0%9F%93%A2-sistema-de-compartir-contenido">ğŸ“¢ SISTEMA DE COMPARTIR CONTENIDO</h2>
<p>Cada secciÃ³n incluye su ruta pÃºblica correspondiente:</p>
<table>
<thead>
<tr>
<th>Fase</th>
<th>SecciÃ³n</th>
<th>Ruta PÃºblica</th>
<th>Estado</th>
</tr>
</thead>
<tbody>
<tr>
<td>5.3</td>
<td>Negocios</td>
<td><code>/p/negocio/:id</code></td>
<td>âœ… Implementado</td>
</tr>
<tr>
<td>5.4.1</td>
<td>ArtÃ­culos</td>
<td><code>/p/articulo/:id</code></td>
<td>âœ… Implementado</td>
</tr>
<tr>
<td>5.4.2</td>
<td>Ofertas</td>
<td><code>/p/oferta/:id</code></td>
<td>âœ… Implementado</td>
</tr>
<tr>
<td>5.10</td>
<td>Cupones</td>
<td><code>/p/cupon/:codigo</code></td>
<td>â³ Pendiente</td>
</tr>
<tr>
<td>6.1</td>
<td>MarketPlace</td>
<td><code>/p/marketplace/:id</code></td>
<td>â³ Pendiente</td>
</tr>
<tr>
<td>6.2</td>
<td>DinÃ¡micas</td>
<td><code>/p/rifa/:id</code></td>
<td>â³ Pendiente</td>
</tr>
<tr>
<td>6.3</td>
<td>Empleos</td>
<td><code>/p/empleo/:id</code></td>
<td>â³ Pendiente</td>
</tr>
</tbody>
</table>
<p>Cada vista pÃºblica incluye:</p>
<ul>
<li>âœ… Contenido completo visible</li>
<li>âœ… ImÃ¡genes y galerÃ­a</li>
<li>âœ… InformaciÃ³n del publicador</li>
<li>âœ… BotÃ³n de registro/descarga de app</li>
<li>âœ… Metadatos Open Graph (preview en redes sociales)</li>
</ul>
<hr>
<h2 id="%E2%8F%B1%EF%B8%8F-tiempo-total-restante-estimado">â±ï¸ TIEMPO TOTAL RESTANTE ESTIMADO</h2>
<table>
<thead>
<tr>
<th>Bloque</th>
<th>Tiempo</th>
</tr>
</thead>
<tbody>
<tr>
<td>5.4.1 + 5.4.2 (CatÃ¡logo + Ofertas)</td>
<td>~2-4 dÃ­as</td>
</tr>
<tr>
<td>5.5 - 5.8 (Sistema de Lealtad)</td>
<td>~7-10 dÃ­as</td>
</tr>
<tr>
<td>5.9 - 5.10 (ChatYA + Cupones)</td>
<td>~5-7 dÃ­as</td>
</tr>
<tr>
<td>6.0 - 6.3 (Secciones PÃºblicas)</td>
<td>~8-11 dÃ­as</td>
</tr>
<tr>
<td>6.4 - 6.6 (BS Restantes)</td>
<td>~5-7 dÃ­as</td>
</tr>
<tr>
<td>6.7 (Panel Admin)</td>
<td>~1-2 semanas</td>
</tr>
<tr>
<td>Fase 7 (Testing + Deploy)</td>
<td>~1 semana</td>
</tr>
<tr>
<td><strong>TOTAL</strong></td>
<td><strong>~8-10 semanas</strong></td>
</tr>
</tbody>
</table>
<hr>
<hr>
<h2 id="%F0%9F%94%97-parte-4-dependencias">ğŸ”— PARTE 4: DEPENDENCIAS</h2>
<pre class="hljs"><code><div>Fase 4 âœ… COMPLETADA
    â”‚
    â–¼
Fase 5.0 (Sistema de Modos Backend) âœ… COMPLETADO
    â”‚
    â–¼
Fase 5.1 (Onboarding Backend + Sucursales) âœ… COMPLETADO
    â”‚
    â–¼
Fase 5.1.0 (EstandarizaciÃ³n) âœ… COMPLETADO
    â”‚
    â–¼
Fase 5.1.1 (Onboarding Frontend) âœ… COMPLETADO
    â”‚
    â–¼                       
Fase 5.2 (Toggle UI) âœ… COMPLETADO
    â”‚
    â–¼
Fase 5.3 (Negocios Directorio) âœ… COMPLETADO
    â”‚
    â–¼
Fase 5.3.1 (Sistema Compartir base) âœ… PARCIAL
    â”‚
    â–¼
Fase 5.4 (BS Dashboard + Mi Perfil) âœ… COMPLETADO
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                       â–¼
Fase 5.4.1 (CatÃ¡logo)   Fase 5.4.2 (Ofertas) âœ… COMPLETADO
    â”‚                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â–¼
Fase 5.5 (ScanYA + PWA) â”€â”€â”€â”€â”€â”€â–º Registra ventas, otorga puntos â³ SIGUIENTE
    â”‚                                  â”‚
    â–¼                                  â–¼
Fase 5.6 (CardYA + PWA) â—„â”€â”€â”€â”€â”€ Usuario ve sus puntos
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                       â–¼
Fase 5.7 (Clientes +    Fase 5.8 (Opiniones Config BS)
Transacciones)              â”‚
    â”‚                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â–¼
Fase 5.9 (Puntos Config BS)
    â”‚
    â–¼         
Fase 5.10 (ChatYA + PWA)
    â”‚
    â–¼
Fase 5.11 (Cupones)
    â”‚
    â–¼
Fase 6.0 (Ofertas PÃºblicas)
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                       â–¼                       â–¼
Fase 6.1 (MarketPlace)  Fase 6.2 (DinÃ¡micas)   Fase 6.3 (Empleos)
    â”‚                       â”‚                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                       â–¼                       â–¼
Fase 6.4 (Empleados)    Fase 6.5 (Sucursales)  Fase 6.6 (Reportes)
    â”‚                       â”‚                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                    Fase 6.7 (Panel Admin)
                            â”‚
                            â–¼
                    Fase 7 (Testing + Deploy)
</div></code></pre>
<h3 id="%F0%9F%93%8A-resumen-de-dependencias-cr%C3%ADticas">ğŸ“Š Resumen de Dependencias CrÃ­ticas</h3>
<table>
<thead>
<tr>
<th>Fase</th>
<th>Depende de</th>
<th>Bloquea a</th>
</tr>
</thead>
<tbody>
<tr>
<td>5.5 ScanYA</td>
<td>5.4.1, 5.4.2</td>
<td>5.6, 5.7, 5.10, 6.4, 6.6</td>
</tr>
<tr>
<td>5.6 CardYA</td>
<td>5.5 ScanYA</td>
<td>5.9 Puntos</td>
</tr>
<tr>
<td>5.7 Clientes</td>
<td>5.5 ScanYA</td>
<td>-</td>
</tr>
<tr>
<td>5.8 Opiniones</td>
<td>5.5 ScanYA</td>
<td>-</td>
</tr>
<tr>
<td>5.9 Puntos</td>
<td>5.6 CardYA</td>
<td>-</td>
</tr>
<tr>
<td>5.11 Cupones</td>
<td>5.5 ScanYA</td>
<td>-</td>
</tr>
<tr>
<td>6.0 Ofertas PÃºblicas</td>
<td>5.4.2 Ofertas</td>
<td>-</td>
</tr>
<tr>
<td>6.4 Empleados</td>
<td>5.5 ScanYA</td>
<td>-</td>
</tr>
<tr>
<td>6.6 Reportes</td>
<td>5.5 ScanYA</td>
<td>-</td>
</tr>
</tbody>
</table>
<h3 id="%E2%9A%A0%EF%B8%8F-ruta-cr%C3%ADtica">âš ï¸ Ruta CrÃ­tica</h3>
<pre class="hljs"><code><div>5.4.1/5.4.2 â†’ 5.5 ScanYA â†’ 5.6 CardYA â†’ 5.8 Opiniones â†’ 5.9 Puntos
                  â†“
              5.7 Clientes
              5.11 Cupones
              6.4 Empleados
              6.6 Reportes
</div></code></pre>
<p><strong>ScanYA (5.5) es el cuello de botella principal</strong> - bloquea 6 fases posteriores.</p>
<pre class="hljs"><code><div>
---

## ğŸ“‹ PARTE 5: CHECKLISTS DE VALIDACIÃ“N

---

### EstandarizaciÃ³n âœ… COMPLETADO
- [x] Drizzle `casing: 'snake_case'` configurado
- [x] TransformaciÃ³n automÃ¡tica snake_case â†” camelCase
- [x] API responses en inglÃ©s (success, data, message)
- [x] 439 cambios aplicados
- [x] 0 errores TypeScript
- [x] Backend compila correctamente
- [x] Frontend compila correctamente

---

### Sistema de Modos âœ… COMPLETADO
- [x] MigraciÃ³n BD ejecutada
- [x] Campo `tieneModoComercial` funciona
- [x] Campo `modoActivo` funciona
- [x] Endpoint PATCH `/api/auth/modo` funciona
- [x] Endpoint GET `/api/auth/modo-info` funciona
- [x] Middleware `requiereModoPersonal` funciona
- [x] Middleware `requiereModoComercial` funciona
- [x] Middleware `requiereAccesoComercial` funciona
- [x] Token JWT incluye `modoActivo`
- [x] Webhook cancelaciÃ³n Stripe implementado
- [x] useAuthStore tiene `cambiarModo()` âœ…
- [x] Toggle UI funciona âœ…
- [x] ColumnaIzquierda cambia segÃºn modo âœ…
- [x] MenuDrawer cambia segÃºn modo âœ…
- [x] BottomNav cambia segÃºn modo âœ…
- [x] Navbar oculta Market en modo Comercial âœ…
- [x] ModoGuard protege rutas âœ…
- [x] Datos dinÃ¡micos del negocio (nombre, correo, foto) âœ…

---

### Toggle UI + ProtecciÃ³n de Rutas âœ… COMPLETADO (26/12/2024)

**Frontend:**
- [x] ToggleModoUsuario.tsx - Componente reutilizable
- [x] ModalCambiarModo.tsx - ConfirmaciÃ³n de cambio
- [x] ModoGuard.tsx - Guard de protecciÃ³n de rutas
- [x] Navbar.tsx - Toggle + NAV_ITEMS dinÃ¡micos
- [x] MenuDrawer.tsx - Toggle + avatar dinÃ¡mico
- [x] ColumnaIzquierda.tsx - Contenido por modo
- [x] BottomNav.tsx - Market â†” Business segÃºn modo
- [x] Avatar dinÃ¡mico segÃºn modo (usuario o negocio)

**Backend:**
- [x] Campo `foto_perfil` en negocio_sucursales
- [x] FunciÃ³n `obtenerDatosNegocio()` reutilizable
- [x] Campos de negocio en respuestas de auth
- [x] PATCH /api/auth/modo devuelve nuevo token

**Decisiones ArquitectÃ³nicas Implementadas:**
- Login respeta Ãºltimo modo usado (guardado en BD)
- Multi-dispositivo: Sesiones independientes
- Notificaciones: Solo del modo activo
- JWT: Nuevo token al cambiar modo
- Persistencia: localStorage + backend siempre gana

---

### Onboarding Wizard âœ… COMPLETADO (26/12/2024)

**Backend:**
- [x] 15 endpoints REST implementados
- [x] Sistema de sucursales
- [x] MigraciÃ³n BD ejecutada
- [x] Validaciones Zod
- [x] TypeScript compila sin errores
- [x] Endpoints de imÃ¡genes (logo, portada, galerÃ­a)
- [x] Endpoint finalizar onboarding

**Frontend:**
- [x] Layout estilo Stripe
- [x] Indicador dinÃ¡mico de pasos (8 pasos)
- [x] BotonesNavegacion con validaciÃ³n
- [x] ModalPausar con guardado
- [x] useOnboardingStore completo
- [x] Paso 1 (CategorÃ­as) completo
- [x] Paso 2 (UbicaciÃ³n) completo
- [x] Paso 3 (Contacto + Lada Editable) completo
- [x] Paso 4 (Horarios) completo
- [x] Paso 5 (ImÃ¡genes + Cloudinary) completo
- [x] Paso 6 (MÃ©todos de Pago) completo
- [x] Paso 7 (Sistema de Puntos) completo
- [x] Paso 8 (Productos/Servicios) completo
- [x] RedirecciÃ³n segÃºn onboardingCompletado
- [x] JWT incluye onboardingCompletado
- [x] Cloudinary upload/delete optimista
- [x] OptimizaciÃ³n automÃ¡tica a .webp
- [x] Upload diferido (sin huÃ©rfanos)
- [x] Sistema de finalizaciÃ³n funcional
- [x] BotÃ³n Anterior guarda cambios
- [x] ValidaciÃ³n flexible (1 guardar, 3 publicar)

**Decisiones Implementadas:**
- Todos los negocios son fÃ­sicos (requieren ubicaciÃ³n)
- Campos `tiene_servicio_domicilio` y `tiene_envio_domicilio` en sucursales
- OptimizaciÃ³n client-side antes de Cloudinary
- Upload diferido para evitar huÃ©rfanos

---

### Negocios Directorio âœ… COMPLETADO (02/01/2026)

**Frontend:**
- [x] PaginaNegocios.tsx - Lista principal
- [x] PaginaPerfilNegocio.tsx - Detalle de negocio
- [x] PanelFiltros.tsx - Filtros por categorÃ­a
- [x] ModalDetalleItem.tsx - Detalle de producto/servicio
- [x] ModalHorarios.tsx - Horarios del negocio
- [x] SeccionCatalogo.tsx - Productos y servicios
- [x] useListaNegocios.ts - Hook de listado
- [x] usePerfilNegocio.ts - Hook de perfil
- [x] useHorariosNegocio.ts - Hook de horarios
- [x] useVotos.ts - Hook de votaciÃ³n

**Backend:**
- [x] Endpoints de negocios con PostGIS
- [x] Sistema de votos y mÃ©tricas
- [x] Filtros por categorÃ­a/subcategorÃ­a
- [x] BÃºsqueda por nombre

---

### Sistema Compartir âœ… PARCIAL (02/01/2026)

**Implementado:**
- [x] DropdownCompartir.tsx - BotÃ³n universal
- [x] BannerRegistro.tsx - CTA para registro
- [x] LayoutPublico.tsx - Layout sin login
- [x] useOpenGraph.ts - Metadatos sociales
- [x] /p/negocio/:id - Vista pÃºblica negocio
- [x] /p/articulo/:id - Vista pÃºblica artÃ­culo
- [x] /p/oferta/:id - Vista pÃºblica oferta

**Pendiente:**
- [ ] /p/cupon/:codigo (Fase 5.10)
- [ ] /p/marketplace/:id (Fase 6.1)
- [ ] /p/rifa/:id (Fase 6.2)
- [ ] /p/empleo/:id (Fase 6.3)
- [ ] Tracking de vistas
- [ ] Deep linking a la app

---

### Business Studio â³ EN PROGRESO (27%)

**Dashboard âœ… COMPLETADO (02/01/2026):**
- [x] PaginaDashboard.tsx
- [x] HeaderDashboard.tsx
- [x] KPIPrincipal.tsx + KPISecundario.tsx
- [x] GraficaVentas.tsx
- [x] ActividadReciente.tsx
- [x] 7 endpoints backend

**Mi Perfil âœ… COMPLETADO (06/01/2026):**
- [x] Tab Datos del Negocio + Panel CardYA
- [x] Tab Contacto (telÃ©fono, WhatsApp, redes)
- [x] Tab UbicaciÃ³n (mapa Leaflet)
- [x] Tab Horarios (con break/comida)
- [x] Tab ImÃ¡genes (logo, portada, galerÃ­a 10 mÃ¡x)
- [x] Tab OperaciÃ³n (pagos, envÃ­o, servicio)

**CatÃ¡logo âœ… COMPLETADO (10/01/2026):**
- [x] Lista de productos/servicios
- [x] Modal crear/editar artÃ­culo
- [x] Upload imÃ¡genes (Cloudinary)
- [x] Filtros por tipo y categorÃ­a
- [x] Toggle activo/inactivo

**Ofertas âœ… COMPLETADO 90/100% (16/01/2026):**-5.4.2
- [x] Lista de ofertas del negocio
- [x] Modal crear/editar oferta
- [x] Tipos: 2x1, %, $, combo, happy hour
- [x] Configurar dÃ­as y horarios
- [x] Vista previa pÃºblica

---

### ScanYA â³ PENDIENTE (5.5)
- [ ] Escanear QR de clientes
- [ ] Registrar ventas
- [ ] Otorgar puntos automÃ¡ticos
- [ ] Validar cupones
- [ ] Login empleados (nick + PIN)
- [ ] Historial de ventas del dÃ­a
- [ ] PWA widget standalone

---

### CardYA con Sistema de Niveles â³ PENDIENTE (5.6)
- [ ] Tarjeta de lealtad digital
- [ ] QR dinÃ¡mico (expira cada 2 min)
- [ ] Puntos por negocio (no transferibles)
- [ ] Bronce (0-4,999) â†’ 1.0x
- [ ] Plata (5,000-14,999) â†’ 1.25x
- [ ] Oro (15,000+) â†’ 1.5x
- [ ] Solo visible en modo Personal
- [ ] NotificaciÃ³n al subir de nivel
- [ ] PWA widget standalone

---

### Clientes + Transacciones â³ PENDIENTE (5.7)
- [ ] Lista de clientes que han comprado
- [ ] Historial de transacciones
- [ ] Filtros por fecha/cliente
- [ ] Detalle por cliente (visitas, puntos, nivel)
- [ ] Exportar reportes

---
### Opiniones Config BS â³ PENDIENTE (5.9)






### Puntos Config BS â³ PENDIENTE (5.9)
- [ ] Valor del punto ($X = 1 punto)
- [ ] Activar/desactivar CardYA
- [ ] Simulador de acumulaciÃ³n
- [ ] EstadÃ­sticas de puntos otorgados

---

### ChatYA â³ PENDIENTE (5.10)
- [ ] Socket.io + MongoDB
- [ ] No se cierra al navegar (overlay persistente)
- [ ] Socket.io permanece conectado
- [ ] Muestra nombre/avatar segÃºn modo activo
- [ ] PWA widget standalone

---

### Cupones â³ PENDIENTE (5.11)
- [ ] Vista pÃºblica: /p/cupon/:codigo
- [ ] CRUD cupones en BS
- [ ] Lista de cupones guardados (usuario)
- [ ] Filtros: Vigentes / Usados / Expirados
- [ ] Countdown de expiraciÃ³n
- [ ] Solo visible en modo Personal
- [ ] Badge con cantidad en menÃº
- [ ] ValidaciÃ³n en ScanYA

---

### Secciones PÃºblicas â³ PENDIENTE

**6.0 Ofertas PÃºblicas:**
- [ ] Vista pÃºblica (ruta ya existe)

**6.1 MarketPlace:**
- [ ] Vista pÃºblica: /p/marketplace/:id
- [ ] Compra-venta entre usuarios
- [ ] Publicaciones modo Personal

**6.2 DinÃ¡micas (Rifas):**
- [ ] Vista pÃºblica: /p/rifa/:id
- [ ] Rifas y sorteos
- [ ] ParticipaciÃ³n con puntos
- [ ] CRUD Rifas en BS

**6.3 Empleos:**
- [ ] Vista pÃºblica: /p/empleo/:id
- [ ] Bolsa de trabajo
- [ ] CRUD Vacantes en BS

---

### BS Restantes â³ PENDIENTE

**6.4 Empleados:**
- [ ] GestiÃ³n de empleados
- [ ] Nick + PIN para ScanYA
- [ ] Permisos configurables

**6.5 Sucursales:**
- [ ] Ver todas las sucursales
- [ ] Agregar/editar sucursal
- [ ] Configurar sucursal principal

**6.6 Reportes + Alertas:**
- [ ] EstadÃ­sticas de ventas
- [ ] Exportar reportes
- [ ] Notificaciones del sistema

---

### Panel Admin â³ PENDIENTE (6.7)
- [ ] GestiÃ³n de vendedores (niveles 1-5)
- [ ] MÃ©tricas globales
- [ ] ConfiguraciÃ³n dinÃ¡mica (sin cÃ³digo)
- [ ] GestiÃ³n de negocios/usuarios
- [ ] Suscripciones y pagos (Stripe)
- [ ] Log de auditorÃ­a

---

### GeolocalizaciÃ³n Global
- [x] Auto-detecciÃ³n GPS con fallback IP/WiFi
- [ ] Cambio de ciudad actualiza TODAS las secciones

---

## ğŸ“ CHANGELOG

---

### 06 Enero 2026 (v5.0)

âœ… **Fase 5.4 Mi Perfil COMPLETADO**

**Componentes Creados:**
- âœ… PaginaPerfil.tsx - Vista principal con tabs
- âœ… TabInformacion.tsx - Nombre, descripciÃ³n, categorÃ­as + Panel CardYA
- âœ… TabContacto.tsx - TelÃ©fono, WhatsApp, email, web, redes sociales
- âœ… TabUbicacion.tsx - DirecciÃ³n, ciudad, mapa Leaflet interactivo
- âœ… TabHorarios.tsx - Horarios por dÃ­a, break/comida, 24/7, duplicar
- âœ… TabImagenes.tsx - Logo, foto perfil, portada, galerÃ­a (mÃ¡x 10)
- âœ… TabOperacion.tsx - MÃ©todos pago, envÃ­o domicilio, servicio domicilio

**DecisiÃ³n ArquitectÃ³nica - Negocios Solo FÃ­sicos:**
- âŒ Eliminado tipo &quot;Online&quot; - Todos los negocios requieren ubicaciÃ³n
- âŒ Eliminada columna `requiere_direccion`
- âœ… Agregado `tiene_servicio_domicilio` (tÃº vas al cliente)
- âœ… Agregado `tiene_envio_domicilio` (envÃ­as productos)

**ActualizaciÃ³n Roadmap:**
- Nueva numeraciÃ³n de fases (5.4.1 - 6.7)
- Panel Admin movido a 6.7
- Testing + Deploy como Fase 7
- Tiempo estimado restante: ~8-10 semanas

---

### 02-03 Enero 2026 (v4.9)

âœ… **Fase 5.3 Negocios Directorio COMPLETADO**

**Frontend Creado:**
- âœ… PaginaNegocios.tsx - Lista con geolocalizaciÃ³n
- âœ… PaginaPerfilNegocio.tsx - Detalle de negocio
- âœ… PanelFiltros.tsx - Filtros por categorÃ­a/subcategorÃ­a
- âœ… ModalDetalleItem.tsx - Detalle de producto/servicio
- âœ… ModalHorarios.tsx - Horarios del negocio
- âœ… SeccionCatalogo.tsx - Productos y servicios
- âœ… useListaNegocios.ts, usePerfilNegocio.ts, useVotos.ts

**Backend:**
- âœ… Endpoints de negocios con PostGIS (ST_DWithin)
- âœ… Sistema de votos y mÃ©tricas
- âœ… Triggers automÃ¡ticos para consistencia

---

âœ… **Fase 5.3.1 Sistema Compartir PARCIAL**

**Componentes Creados:**
- âœ… DropdownCompartir.tsx - BotÃ³n universal
- âœ… BannerRegistro.tsx - CTA para registro
- âœ… LayoutPublico.tsx - Layout sin login
- âœ… useOpenGraph.ts - Metadatos sociales

**Rutas PÃºblicas Implementadas:**
- âœ… /p/negocio/:id
- âœ… /p/articulo/:id
- âœ… /p/oferta/:id

---

âœ… **Fase 5.4 Business Studio - Dashboard COMPLETADO**

**Frontend Creado:**
- âœ… DrawerBusinessStudio.tsx - NavegaciÃ³n lateral
- âœ… MenuBusinessStudio.tsx - MenÃº mÃ³vil
- âœ… PanelPreviewNegocio.tsx - Preview del negocio
- âœ… PaginaDashboard.tsx + 10 componentes KPI

**Backend:**
- âœ… dashboard.controller.ts + dashboard.service.ts
- âœ… 7 endpoints (kpis, grafica-ventas, actividad-reciente, etc.)

---

âœ… **Sistema de Sucursales MÃºltiples COMPLETADO**

**Implementado:**
- âœ… Campo `sucursal_asignada` en usuarios
- âœ… Middleware `verificarNegocio` corregido
- âœ… Middleware `validarAccesoSucursal`
- âœ… Interceptor Axios (sucursalId automÃ¡tico)
- âœ… negocioManagement.service.ts (15 funciones CRUD)
- âœ… Tabla `articulo_sucursales` N:N
- âœ… Alertas con `sucursal_id`

**Decisiones:**
- sucursalActiva = temporal (UI) vs sucursalAsignada = permanente (BD)
- Con 1 sucursal: todo unificado
- Con 2+ sucursales: selector visible + Tab Sucursales

---

### 26 Diciembre 2024 (v4.6)

âœ… **Fase 5.2 Toggle UI + ProtecciÃ³n de Rutas COMPLETADA**

**Componentes Creados:**
- âœ… ToggleModoUsuario.tsx - Toggle reutilizable
- âœ… ModalCambiarModo.tsx - ConfirmaciÃ³n de cambio
- âœ… ModoGuard.tsx - Guard de protecciÃ³n

**Archivos Modificados:**
- âœ… useAuthStore.ts - FunciÃ³n `cambiarModo()` + campos de negocio
- âœ… Navbar.tsx - Toggle + items dinÃ¡micos + avatar dinÃ¡mico
- âœ… MenuDrawer.tsx - Toggle + avatar dinÃ¡mico
- âœ… ColumnaIzquierda.tsx - Contenido por modo
- âœ… BottomNav.tsx - Market â†” Business segÃºn modo
- âœ… router/index.tsx - Guards aplicados

**Backend:**
- âœ… MigraciÃ³n: Campo `foto_perfil` en negocio_sucursales
- âœ… FunciÃ³n `obtenerDatosNegocio()` en negocios.service.ts
- âœ… Datos del negocio incluidos en respuestas de auth

**Decisiones ArquitectÃ³nicas:**
- Login respeta Ãºltimo modo usado
- Multi-dispositivo independiente
- Notificaciones solo modo activo
- Nuevo token JWT al cambiar modo

---

âœ… **Fase 5.1.1 Frontend Onboarding COMPLETADA**
- âœ… Paso 1 (CategorÃ­as) completo
- âœ… Paso 2 (UbicaciÃ³n) completo
- âœ… Paso 3 (Contacto) - Lada editable internacional
- âœ… Paso 4 (Horarios) - 24/7, cerrado, comida
- âœ… Paso 5 (ImÃ¡genes) - Cloudinary + optimizaciÃ³n .webp
- âœ… Paso 6 (MÃ©todos de Pago) - Efectivo, Tarjeta, Transferencia
- âœ… Paso 7 (Puntos) - Toggle CardYA
- âœ… Paso 8 (Productos) - CRUD completo con imÃ¡genes
- âœ… Sistema de FinalizaciÃ³n funcional
- âœ… BotÃ³n Anterior ahora guarda cambios
- âœ… 12 bugs resueltos
- âœ… 8 endpoints nuevos creados
- âœ… ~5,000 lÃ­neas de cÃ³digo

**Bugs Resueltos:**
- âœ… PostGIS retornaba WKB binario â†’ Usar ST_X/ST_Y
- âœ… Lada mostraba 3 dÃ­gitos â†’ FunciÃ³n especÃ­fica por paÃ­s
- âœ… ImÃ¡genes huÃ©rfanas â†’ Upload diferido
- âœ… Error 400 snake_case â†’ Usar camelCase
- âœ… DuplicaciÃ³n productos â†’ DELETE + INSERT
- âœ… Finalizar no funcionaba â†’ LÃ³gica completa implementada
- âœ… /auth/yo devolvÃ­a false â†’ Consultar tabla negocios
- âœ… Loop infinito redirecciÃ³n â†’ Flag sessionStorage

**Pendientes Documentados (Fase 6.7 Panel Admin):**
- âš ï¸ Endpoint DELETE negocios + limpieza Cloudinary
- âš ï¸ Endpoint DELETE usuarios

---

### 21 Diciembre 2024 (v4.4)

- âœ… EstandarizaciÃ³n Parte 1: Drizzle `casing: 'snake_case'`
- âœ… EstandarizaciÃ³n Parte 2: API responses en inglÃ©s (439 cambios)
- âœ… Onboarding Paso 1 (CategorÃ­as) implementado
- âœ… Bugs corregidos: redirecciÃ³n segÃºn onboardingCompletado
- âœ… JWT ahora incluye `onboardingCompletado`
- âœ… Rate Limiter ajustado (1000 dev, 100 prod)
- âœ… AnÃ¡lisis de arquitectura de sucursales completado

---

### 20 Diciembre 2024 (v4.3)

- âœ… Sistema de Modos Backend completado
- âœ… Onboarding Backend completado (15 endpoints)
- âœ… Sistema de sucursales implementado
- âœ… MigraciÃ³n BD ejecutada

---

### 18-19 Diciembre 2024

- âœ… Cloudinary upload/delete optimista
- âœ… GPS con fallback IP/WiFi
- âœ… ActualizaciÃ³n BD (42 tablas en 9 esquemas)

---

# âš ï¸ NOTAS IMPORTANTES

---

## Flujo de Registro

**Flujo Actual:**
</div></code></pre>
<p>Registro â†’ Usuario elige tipo (Personal o Comercial)
â”‚
â”œâ”€â”€ Personal â†’ Acceso gratuito â†’ Modo Personal activo
â”‚
â””â”€â”€ Comercial â†’ Pago ($449 MXN/mes) â†’ Onboarding â†’ Business Studio</p>
<pre class="hljs"><code><div>
---

## Modelo de Cuenta Dual

Un usuario puede tener **ambos modos** con el mismo correo:

| Modo | Acceso | Costo |
|------|--------|-------|
| Personal | Siempre disponible | Gratis |
| Comercial | Requiere suscripciÃ³n | $449 MXN/mes |

---

## Flujo Comercial Completo
</div></code></pre>
<p>Usuario selecciona &quot;Comercial&quot; en registro
â†“
Se muestra modal de planes/pago
â†“
Usuario paga suscripciÃ³n (Stripe)
â†“
Se crea cuenta con tieneModoComercial: true
â†“
Se crea negocio en estado borrador
â†“
Redirige a /business/onboarding
â†“
Usuario completa 8 pasos del wizard
â†“
Al finalizar: onboardingCompletado: true, esBorrador: false
â†“
Acceso completo a Business Studio</p>
<pre class="hljs"><code><div>
---

## CTA &quot;Â¿Tienes un negocio?&quot;

Para usuarios que ya tienen cuenta Personal y quieren agregar Comercial:
</div></code></pre>
<p>Usuario hace clic en CTA
â†“
Se muestra modal de planes
â†“
Usuario paga suscripciÃ³n
â†“
Se actualiza: tieneModoComercial: true
â†“
Se crea negocio en estado borrador
â†“
Redirige a /business/onboarding
â†“
Completa wizard â†’ Acceso a Business Studio</p>
<pre class="hljs"><code><div>
---

## Alternancia de Modos

Usuarios con ambos modos pueden alternar:
</div></code></pre>
<p>[ğŸ‘¤ Personal] â†â†’ [ğŸª Comercial]</p>
<pre class="hljs"><code><div>
- Toggle disponible en Navbar/Sidebar
- Cambia contenido y opciones del menÃº
- ChatYA unificado (mismo historial)

---

## CancelaciÃ³n de SuscripciÃ³n
</div></code></pre>
<p>Usuario cancela suscripciÃ³n comercial
â†“
Stripe webhook notifica
â†“
Backend actualiza:
â”œâ”€â”€ tieneModoComercial: false
â”œâ”€â”€ modoActivo: 'personal' (forzado)
â””â”€â”€ negocio: se oculta del directorio (no se borra)
â†“
Usuario solo puede usar modo Personal
â†“
Si reactiva suscripciÃ³n â†’ negocio vuelve a aparecer</p>
<pre class="hljs"><code><div>
---

## DecisiÃ³n: Negocios Solo FÃ­sicos (06 Enero 2026)
</div></code></pre>
<p>âŒ ELIMINADO: Tipo de negocio &quot;Online&quot;
âœ… TODOS los negocios requieren ubicaciÃ³n fÃ­sica</p>
<p>Campos en sucursales:
â”œâ”€â”€ tiene_servicio_domicilio: boolean  (tÃº vas al cliente: plomero, electricista)
â””â”€â”€ tiene_envio_domicilio: boolean     (envÃ­as productos: restaurante, farmacia)</p>
<pre class="hljs"><code><div>
---

## Nomenclatura Estandarizada (21 Dic 2024)
</div></code></pre>
<p>PostgreSQL:     snake_case (negocio_id, created_at)
â†“ Drizzle (automÃ¡tico)
TypeScript:     camelCase (negocioId, createdAt)
â†“
API Response:   { success, data, message }</p>
<pre class="hljs"><code><div>
---

## ğŸ“Š Resumen del Proyecto

| Ãrea | Estado |
|------|--------|
| Fases 1-4 | âœ… 100% Completadas |
| Fase 5 | â³ ~40% (Bloque 1-2 completos) |
| Fase 6 | â³ 0% Pendiente |
| Business Studio | â³ 15% (2/14 mÃ³dulos) |

---

*Roadmap Maestro: 16 Enero 2026*  
*Proyecto: AnunciaYA v3.0*  
*VersiÃ³n: 5.1*  
*Desarrollador: Juan Manuel Valenzuela*  
*Tiempo Fases 1-4: 4 semanas*  
*Tiempo Total Estimado Restante: ~8-9 semanas*
</div></code></pre>

</body>
</html>
