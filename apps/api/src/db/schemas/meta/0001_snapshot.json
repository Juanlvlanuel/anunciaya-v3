{
  "id": "3f384b09-4983-4a14-bfb1-9d08c2ba94a0",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.spatial_ref_sys": {
      "name": "spatial_ref_sys",
      "schema": "",
      "columns": {
        "srid": {
          "name": "srid",
          "type": "integer",
          "primaryKey": true,
          "notNull": true
        },
        "auth_name": {
          "name": "auth_name",
          "type": "varchar(256)",
          "primaryKey": false,
          "notNull": false
        },
        "auth_srid": {
          "name": "auth_srid",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "srtext": {
          "name": "srtext",
          "type": "varchar(2048)",
          "primaryKey": false,
          "notNull": false
        },
        "proj4text": {
          "name": "proj4text",
          "type": "varchar(2048)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "spatial_ref_sys_srid_check": {
          "name": "spatial_ref_sys_srid_check",
          "value": "(srid > 0) AND (srid <= 998999)"
        }
      },
      "isRLSEnabled": false
    },
    "public.usuarios": {
      "name": "usuarios",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "nombre": {
          "name": "nombre",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "apellidos": {
          "name": "apellidos",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "correo": {
          "name": "correo",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "alias": {
          "name": "alias",
          "type": "varchar(35)",
          "primaryKey": false,
          "notNull": false
        },
        "contrasena_hash": {
          "name": "contrasena_hash",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "autenticado_por_google": {
          "name": "autenticado_por_google",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "autenticado_por_facebook": {
          "name": "autenticado_por_facebook",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "doble_factor_secreto": {
          "name": "doble_factor_secreto",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false
        },
        "doble_factor_habilitado": {
          "name": "doble_factor_habilitado",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "doble_factor_confirmado": {
          "name": "doble_factor_confirmado",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "telefono": {
          "name": "telefono",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "ciudad": {
          "name": "ciudad",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "perfil": {
          "name": "perfil",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'personal'"
        },
        "membresia": {
          "name": "membresia",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "correo_verificado": {
          "name": "correo_verificado",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "correo_verificado_at": {
          "name": "correo_verificado_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "telefono_verificado": {
          "name": "telefono_verificado",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "codigo_verificacion": {
          "name": "codigo_verificacion",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false
        },
        "estado": {
          "name": "estado",
          "type": "varchar(15)",
          "primaryKey": false,
          "notNull": true,
          "default": "'activo'"
        },
        "fecha_cambio_estado": {
          "name": "fecha_cambio_estado",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "motivo_cambio_estado": {
          "name": "motivo_cambio_estado",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "fecha_reactivacion": {
          "name": "fecha_reactivacion",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "intentos_fallidos": {
          "name": "intentos_fallidos",
          "type": "smallint",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "bloqueado_hasta": {
          "name": "bloqueado_hasta",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "calificacion_promedio": {
          "name": "calificacion_promedio",
          "type": "numeric(2, 1)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "total_calificaciones": {
          "name": "total_calificaciones",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_public_id": {
          "name": "avatar_public_id",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_thumb_public_id": {
          "name": "avatar_thumb_public_id",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "fecha_nacimiento": {
          "name": "fecha_nacimiento",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "genero": {
          "name": "genero",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'no_especificado'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "stripe_customer_id": {
          "name": "stripe_customer_id",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_subscription_id": {
          "name": "stripe_subscription_id",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "es_embajador": {
          "name": "es_embajador",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "referido_por": {
          "name": "referido_por",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_usuarios_correo_verificado": {
          "name": "idx_usuarios_correo_verificado",
          "columns": [
            {
              "expression": "correo_verificado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_usuarios_created_at": {
          "name": "idx_usuarios_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_usuarios_es_embajador": {
          "name": "idx_usuarios_es_embajador",
          "columns": [
            {
              "expression": "es_embajador",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(es_embajador = true)",
          "concurrently": false
        },
        "idx_usuarios_estado": {
          "name": "idx_usuarios_estado",
          "columns": [
            {
              "expression": "estado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_usuarios_perfil_membresia": {
          "name": "idx_usuarios_perfil_membresia",
          "columns": [
            {
              "expression": "perfil",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            },
            {
              "expression": "membresia",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_usuarios_referido_por": {
          "name": "idx_usuarios_referido_por",
          "columns": [
            {
              "expression": "referido_por",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(referido_por IS NOT NULL)",
          "concurrently": false
        },
        "idx_usuarios_stripe_customer_id": {
          "name": "idx_usuarios_stripe_customer_id",
          "columns": [
            {
              "expression": "stripe_customer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_usuarios_stripe_subscription_id": {
          "name": "idx_usuarios_stripe_subscription_id",
          "columns": [
            {
              "expression": "stripe_subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_usuarios_telefono": {
          "name": "idx_usuarios_telefono",
          "columns": [
            {
              "expression": "telefono",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "usuarios_alias_unique": {
          "name": "usuarios_alias_unique",
          "columns": [
            {
              "expression": "alias",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "where": "(alias IS NOT NULL)",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_usuarios_referido_por": {
          "name": "fk_usuarios_referido_por",
          "tableFrom": "usuarios",
          "columnsFrom": [
            "referido_por"
          ],
          "tableTo": "embajadores",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "set null"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "usuarios_correo_unique": {
          "name": "usuarios_correo_unique",
          "columns": [
            "correo"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "usuarios_estado_check": {
          "name": "usuarios_estado_check",
          "value": "(estado)::text = ANY ((ARRAY['activo'::character varying, 'inactivo'::character varying, 'suspendido'::character varying])::text[])"
        },
        "usuarios_genero_check": {
          "name": "usuarios_genero_check",
          "value": "(genero)::text = ANY ((ARRAY['masculino'::character varying, 'femenino'::character varying, 'otro'::character varying, 'no_especificado'::character varying])::text[])"
        },
        "usuarios_membresia_check": {
          "name": "usuarios_membresia_check",
          "value": "membresia = ANY (ARRAY[1, 2, 3])"
        },
        "usuarios_perfil_check": {
          "name": "usuarios_perfil_check",
          "value": "(perfil)::text = ANY ((ARRAY['personal'::character varying, 'comercial'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.usuario_codigos_respaldo": {
      "name": "usuario_codigos_respaldo",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "codigo_hash": {
          "name": "codigo_hash",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "usado_at": {
          "name": "usado_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_usuario_codigos_respaldo_usuario_id": {
          "name": "idx_usuario_codigos_respaldo_usuario_id",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "usuario_codigos_respaldo_usuario_id_fkey": {
          "name": "usuario_codigos_respaldo_usuario_id_fkey",
          "tableFrom": "usuario_codigos_respaldo",
          "columnsFrom": [
            "usuario_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.negocios": {
      "name": "negocios",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "nombre": {
          "name": "nombre",
          "type": "varchar(120)",
          "primaryKey": false,
          "notNull": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "categoria_id": {
          "name": "categoria_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "subcategoria_id": {
          "name": "subcategoria_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "ubicacion": {
          "name": "ubicacion",
          "type": "geography",
          "primaryKey": false,
          "notNull": false
        },
        "ciudad": {
          "name": "ciudad",
          "type": "varchar(120)",
          "primaryKey": false,
          "notNull": true
        },
        "direccion": {
          "name": "direccion",
          "type": "varchar(250)",
          "primaryKey": false,
          "notNull": false
        },
        "whatsapp": {
          "name": "whatsapp",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "telefono": {
          "name": "telefono",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "correo": {
          "name": "correo",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "sitio_web": {
          "name": "sitio_web",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": false
        },
        "logo_url": {
          "name": "logo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "portada_url": {
          "name": "portada_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tiene_envio_domicilio": {
          "name": "tiene_envio_domicilio",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "requiere_direccion": {
          "name": "requiere_direccion",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "calificacion_promedio": {
          "name": "calificacion_promedio",
          "type": "numeric(2, 1)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "total_calificaciones": {
          "name": "total_calificaciones",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_likes": {
          "name": "total_likes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_visitas": {
          "name": "total_visitas",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "activo": {
          "name": "activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "es_borrador": {
          "name": "es_borrador",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "verificado": {
          "name": "verificado",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "promocionado": {
          "name": "promocionado",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "promocion_expira": {
          "name": "promocion_expira",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "meses_gratis_restantes": {
          "name": "meses_gratis_restantes",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "embajador_id": {
          "name": "embajador_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "region_id": {
          "name": "region_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "onboarding_completado": {
          "name": "onboarding_completado",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "fecha_primer_pago": {
          "name": "fecha_primer_pago",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_negocios_activo": {
          "name": "idx_negocios_activo",
          "columns": [
            {
              "expression": "activo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_negocios_categoria_id": {
          "name": "idx_negocios_categoria_id",
          "columns": [
            {
              "expression": "categoria_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_negocios_ciudad": {
          "name": "idx_negocios_ciudad",
          "columns": [
            {
              "expression": "ciudad",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_negocios_embajador": {
          "name": "idx_negocios_embajador",
          "columns": [
            {
              "expression": "embajador_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(embajador_id IS NOT NULL)",
          "concurrently": false
        },
        "idx_negocios_es_borrador": {
          "name": "idx_negocios_es_borrador",
          "columns": [
            {
              "expression": "es_borrador",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_negocios_fecha_primer_pago": {
          "name": "idx_negocios_fecha_primer_pago",
          "columns": [
            {
              "expression": "fecha_primer_pago",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(fecha_primer_pago IS NOT NULL)",
          "concurrently": false
        },
        "idx_negocios_meses_gratis": {
          "name": "idx_negocios_meses_gratis",
          "columns": [
            {
              "expression": "meses_gratis_restantes",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(meses_gratis_restantes > 0)",
          "concurrently": false
        },
        "idx_negocios_onboarding": {
          "name": "idx_negocios_onboarding",
          "columns": [
            {
              "expression": "onboarding_completado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(onboarding_completado = false)",
          "concurrently": false
        },
        "idx_negocios_region": {
          "name": "idx_negocios_region",
          "columns": [
            {
              "expression": "region_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(region_id IS NOT NULL)",
          "concurrently": false
        },
        "idx_negocios_tiene_envio": {
          "name": "idx_negocios_tiene_envio",
          "columns": [
            {
              "expression": "tiene_envio_domicilio",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_negocios_ubicacion": {
          "name": "idx_negocios_ubicacion",
          "columns": [
            {
              "expression": "ubicacion",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "gist_geography_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "gist",
          "concurrently": false
        },
        "idx_negocios_usuario_id": {
          "name": "idx_negocios_usuario_id",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_negocios_embajador": {
          "name": "fk_negocios_embajador",
          "tableFrom": "negocios",
          "columnsFrom": [
            "embajador_id"
          ],
          "tableTo": "embajadores",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "set null"
        },
        "fk_negocios_region": {
          "name": "fk_negocios_region",
          "tableFrom": "negocios",
          "columnsFrom": [
            "region_id"
          ],
          "tableTo": "regiones",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "set null"
        },
        "negocios_categoria_id_fkey": {
          "name": "negocios_categoria_id_fkey",
          "tableFrom": "negocios",
          "columnsFrom": [
            "categoria_id"
          ],
          "tableTo": "categorias_negocio",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "negocios_subcategoria_id_fkey": {
          "name": "negocios_subcategoria_id_fkey",
          "tableFrom": "negocios",
          "columnsFrom": [
            "subcategoria_id"
          ],
          "tableTo": "subcategorias_negocio",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "negocios_usuario_id_fkey": {
          "name": "negocios_usuario_id_fkey",
          "tableFrom": "negocios",
          "columnsFrom": [
            "usuario_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.negocio_horarios": {
      "name": "negocio_horarios",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "dia_semana": {
          "name": "dia_semana",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true
        },
        "abierto": {
          "name": "abierto",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "hora_apertura": {
          "name": "hora_apertura",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "hora_cierre": {
          "name": "hora_cierre",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "comida_inicio": {
          "name": "comida_inicio",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "comida_fin": {
          "name": "comida_fin",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "tiene_horario_comida": {
          "name": "tiene_horario_comida",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "negocio_horarios_negocio_id_fkey": {
          "name": "negocio_horarios_negocio_id_fkey",
          "tableFrom": "negocio_horarios",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "negocio_horarios_unique": {
          "name": "negocio_horarios_unique",
          "columns": [
            "negocio_id",
            "dia_semana"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "negocio_horarios_dia_check": {
          "name": "negocio_horarios_dia_check",
          "value": "(dia_semana >= 0) AND (dia_semana <= 6)"
        }
      },
      "isRLSEnabled": false
    },
    "public.negocio_modulos": {
      "name": "negocio_modulos",
      "schema": "",
      "columns": {
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "catalogo_activo": {
          "name": "catalogo_activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "pedidos_online_activo": {
          "name": "pedidos_online_activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "citas_activo": {
          "name": "citas_activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "reservaciones_activo": {
          "name": "reservaciones_activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "apartados_activo": {
          "name": "apartados_activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "empleados_activo": {
          "name": "empleados_activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        }
      },
      "indexes": {
        "idx_negocio_modulos_citas": {
          "name": "idx_negocio_modulos_citas",
          "columns": [
            {
              "expression": "citas_activo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_negocio_modulos_pedidos": {
          "name": "idx_negocio_modulos_pedidos",
          "columns": [
            {
              "expression": "pedidos_online_activo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "negocio_modulos_negocio_id_fkey": {
          "name": "negocio_modulos_negocio_id_fkey",
          "tableFrom": "negocio_modulos",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.negocio_metodos_pago": {
      "name": "negocio_metodos_pago",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tipo": {
          "name": "tipo",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": true
        },
        "activo": {
          "name": "activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "stripe_cuenta_id": {
          "name": "stripe_cuenta_id",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "banco_nombre": {
          "name": "banco_nombre",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "banco_titular": {
          "name": "banco_titular",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": false
        },
        "banco_clabe": {
          "name": "banco_clabe",
          "type": "varchar(18)",
          "primaryKey": false,
          "notNull": false
        },
        "instrucciones": {
          "name": "instrucciones",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "negocio_metodos_pago_negocio_id_fkey": {
          "name": "negocio_metodos_pago_negocio_id_fkey",
          "tableFrom": "negocio_metodos_pago",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "negocio_metodos_pago_unique": {
          "name": "negocio_metodos_pago_unique",
          "columns": [
            "negocio_id",
            "tipo"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "negocio_metodos_pago_tipo_check": {
          "name": "negocio_metodos_pago_tipo_check",
          "value": "(tipo)::text = ANY ((ARRAY['efectivo_en_local'::character varying, 'efectivo_en_entrega'::character varying, 'transferencia'::character varying, 'stripe'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.negocio_citas_config": {
      "name": "negocio_citas_config",
      "schema": "",
      "columns": {
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "duracion_default_minutos": {
          "name": "duracion_default_minutos",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 30
        },
        "dias_anticipacion_maxima": {
          "name": "dias_anticipacion_maxima",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 7
        },
        "horas_minimas_cancelacion": {
          "name": "horas_minimas_cancelacion",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 2
        },
        "confirmar_automaticamente": {
          "name": "confirmar_automaticamente",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "dias_disponibles": {
          "name": "dias_disponibles",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "negocio_citas_config_negocio_id_fkey": {
          "name": "negocio_citas_config_negocio_id_fkey",
          "tableFrom": "negocio_citas_config",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.negocio_citas_fechas_especificas": {
      "name": "negocio_citas_fechas_especificas",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "fecha": {
          "name": "fecha",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "activo": {
          "name": "activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "hora_inicio": {
          "name": "hora_inicio",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "hora_fin": {
          "name": "hora_fin",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_negocio_citas_fechas_fecha": {
          "name": "idx_negocio_citas_fechas_fecha",
          "columns": [
            {
              "expression": "fecha",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "negocio_citas_fechas_especificas_negocio_id_fkey": {
          "name": "negocio_citas_fechas_especificas_negocio_id_fkey",
          "tableFrom": "negocio_citas_fechas_especificas",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "negocio_citas_fechas_unique": {
          "name": "negocio_citas_fechas_unique",
          "columns": [
            "negocio_id",
            "fecha"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.negocio_galeria": {
      "name": "negocio_galeria",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "cloudinary_public_id": {
          "name": "cloudinary_public_id",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": false
        },
        "titulo": {
          "name": "titulo",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "orden": {
          "name": "orden",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_negocio_galeria_negocio_id": {
          "name": "idx_negocio_galeria_negocio_id",
          "columns": [
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "negocio_galeria_negocio_id_fkey": {
          "name": "negocio_galeria_negocio_id_fkey",
          "tableFrom": "negocio_galeria",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.negocio_preferencias": {
      "name": "negocio_preferencias",
      "schema": "",
      "columns": {
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "permite_mensajes": {
          "name": "permite_mensajes",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "mostrar_en_mapa": {
          "name": "mostrar_en_mapa",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "respuesta_automatica_activa": {
          "name": "respuesta_automatica_activa",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "mensaje_respuesta_automatica": {
          "name": "mensaje_respuesta_automatica",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notificar_pedidos": {
          "name": "notificar_pedidos",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "notificar_mensajes": {
          "name": "notificar_mensajes",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "notificar_citas": {
          "name": "notificar_citas",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "negocio_preferencias_negocio_id_fkey": {
          "name": "negocio_preferencias_negocio_id_fkey",
          "tableFrom": "negocio_preferencias",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.articulos": {
      "name": "articulos",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tipo": {
          "name": "tipo",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "nombre": {
          "name": "nombre",
          "type": "varchar(150)",
          "primaryKey": false,
          "notNull": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "categoria": {
          "name": "categoria",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "default": "'General'"
        },
        "sku": {
          "name": "sku",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "precio_base": {
          "name": "precio_base",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "precio_desde": {
          "name": "precio_desde",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "imagen_principal": {
          "name": "imagen_principal",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "imagenes_adicionales": {
          "name": "imagenes_adicionales",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"\"}'"
        },
        "requiere_cita": {
          "name": "requiere_cita",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "duracion_estimada": {
          "name": "duracion_estimada",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "disponible": {
          "name": "disponible",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "destacado": {
          "name": "destacado",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "orden": {
          "name": "orden",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_ventas": {
          "name": "total_ventas",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_reservas": {
          "name": "total_reservas",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_vistas": {
          "name": "total_vistas",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_articulos_categoria": {
          "name": "idx_articulos_categoria",
          "columns": [
            {
              "expression": "categoria",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_articulos_disponible": {
          "name": "idx_articulos_disponible",
          "columns": [
            {
              "expression": "disponible",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_articulos_negocio_id": {
          "name": "idx_articulos_negocio_id",
          "columns": [
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "articulos_negocio_id_fkey": {
          "name": "articulos_negocio_id_fkey",
          "tableFrom": "articulos",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "articulos_precio_check": {
          "name": "articulos_precio_check",
          "value": "precio_base >= (0)::numeric"
        },
        "articulos_tipo_check": {
          "name": "articulos_tipo_check",
          "value": "(tipo)::text = ANY ((ARRAY['producto'::character varying, 'servicio'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.articulo_inventario": {
      "name": "articulo_inventario",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "articulo_id": {
          "name": "articulo_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "stock": {
          "name": "stock",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "stock_minimo": {
          "name": "stock_minimo",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "permite_venta_sin_stock": {
          "name": "permite_venta_sin_stock",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "stock_bajo": {
          "name": "stock_bajo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "articulo_inventario_articulo_id_fkey": {
          "name": "articulo_inventario_articulo_id_fkey",
          "tableFrom": "articulo_inventario",
          "columnsFrom": [
            "articulo_id"
          ],
          "tableTo": "articulos",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "articulo_inventario_articulo_id_key": {
          "name": "articulo_inventario_articulo_id_key",
          "columns": [
            "articulo_id"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "articulo_inventario_stock_check": {
          "name": "articulo_inventario_stock_check",
          "value": "stock >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.articulo_variantes": {
      "name": "articulo_variantes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "articulo_id": {
          "name": "articulo_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "nombre": {
          "name": "nombre",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "requerido": {
          "name": "requerido",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "seleccion_multiple": {
          "name": "seleccion_multiple",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "min_selecciones": {
          "name": "min_selecciones",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "max_selecciones": {
          "name": "max_selecciones",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "orden": {
          "name": "orden",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_articulo_variantes_articulo_id": {
          "name": "idx_articulo_variantes_articulo_id",
          "columns": [
            {
              "expression": "articulo_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "articulo_variantes_articulo_id_fkey": {
          "name": "articulo_variantes_articulo_id_fkey",
          "tableFrom": "articulo_variantes",
          "columnsFrom": [
            "articulo_id"
          ],
          "tableTo": "articulos",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.articulo_variante_opciones": {
      "name": "articulo_variante_opciones",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "variante_id": {
          "name": "variante_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "nombre": {
          "name": "nombre",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "precio_ajuste": {
          "name": "precio_ajuste",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "disponible": {
          "name": "disponible",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "orden": {
          "name": "orden",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_articulo_variante_opciones_variante_id": {
          "name": "idx_articulo_variante_opciones_variante_id",
          "columns": [
            {
              "expression": "variante_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "articulo_variante_opciones_variante_id_fkey": {
          "name": "articulo_variante_opciones_variante_id_fkey",
          "tableFrom": "articulo_variante_opciones",
          "columnsFrom": [
            "variante_id"
          ],
          "tableTo": "articulo_variantes",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.citas": {
      "name": "citas",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "servicio_id": {
          "name": "servicio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "cliente_id": {
          "name": "cliente_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "empleado_id": {
          "name": "empleado_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "fecha": {
          "name": "fecha",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "hora_inicio": {
          "name": "hora_inicio",
          "type": "time",
          "primaryKey": false,
          "notNull": true
        },
        "hora_fin": {
          "name": "hora_fin",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "duracion": {
          "name": "duracion",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "hora_fin_real": {
          "name": "hora_fin_real",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "terminada_manualmente": {
          "name": "terminada_manualmente",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "creada_por": {
          "name": "creada_por",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'cliente'"
        },
        "estado": {
          "name": "estado",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'pendiente'"
        },
        "nombre_cliente": {
          "name": "nombre_cliente",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "telefono_cliente": {
          "name": "telefono_cliente",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "correo_cliente": {
          "name": "correo_cliente",
          "type": "varchar(150)",
          "primaryKey": false,
          "notNull": false
        },
        "precio_servicio": {
          "name": "precio_servicio",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "notas_cliente": {
          "name": "notas_cliente",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notas_negocio": {
          "name": "notas_negocio",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "recordatorio_enviado": {
          "name": "recordatorio_enviado",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "recordatorio_enviado_fecha": {
          "name": "recordatorio_enviado_fecha",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "cancelada_por": {
          "name": "cancelada_por",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "motivo_cancelacion": {
          "name": "motivo_cancelacion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "fecha_cancelacion": {
          "name": "fecha_cancelacion",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "confirmada_por_negocio": {
          "name": "confirmada_por_negocio",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "fecha_confirmacion": {
          "name": "fecha_confirmacion",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "codigo_confirmacion": {
          "name": "codigo_confirmacion",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false
        },
        "origen_reserva": {
          "name": "origen_reserva",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'app'"
        },
        "es_bloqueo_horario": {
          "name": "es_bloqueo_horario",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "calificacion": {
          "name": "calificacion",
          "type": "smallint",
          "primaryKey": false,
          "notNull": false
        },
        "resena": {
          "name": "resena",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "fecha_calificacion": {
          "name": "fecha_calificacion",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_citas_cliente_id": {
          "name": "idx_citas_cliente_id",
          "columns": [
            {
              "expression": "cliente_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_citas_empleado_id": {
          "name": "idx_citas_empleado_id",
          "columns": [
            {
              "expression": "empleado_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_citas_estado": {
          "name": "idx_citas_estado",
          "columns": [
            {
              "expression": "estado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_citas_fecha": {
          "name": "idx_citas_fecha",
          "columns": [
            {
              "expression": "fecha",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_citas_negocio_id": {
          "name": "idx_citas_negocio_id",
          "columns": [
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "citas_cliente_id_fkey": {
          "name": "citas_cliente_id_fkey",
          "tableFrom": "citas",
          "columnsFrom": [
            "cliente_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "citas_empleado_id_fkey": {
          "name": "citas_empleado_id_fkey",
          "tableFrom": "citas",
          "columnsFrom": [
            "empleado_id"
          ],
          "tableTo": "empleados",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "set null"
        },
        "citas_negocio_id_fkey": {
          "name": "citas_negocio_id_fkey",
          "tableFrom": "citas",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "citas_servicio_id_fkey": {
          "name": "citas_servicio_id_fkey",
          "tableFrom": "citas",
          "columnsFrom": [
            "servicio_id"
          ],
          "tableTo": "articulos",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "citas_codigo_confirmacion_key": {
          "name": "citas_codigo_confirmacion_key",
          "columns": [
            "codigo_confirmacion"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "citas_calificacion_check": {
          "name": "citas_calificacion_check",
          "value": "(calificacion IS NULL) OR ((calificacion >= 1) AND (calificacion <= 5))"
        },
        "citas_cancelada_por_check": {
          "name": "citas_cancelada_por_check",
          "value": "(cancelada_por IS NULL) OR ((cancelada_por)::text = ANY ((ARRAY['cliente'::character varying, 'negocio'::character varying, 'sistema'::character varying])::text[]))"
        },
        "citas_estado_check": {
          "name": "citas_estado_check",
          "value": "(estado)::text = ANY ((ARRAY['pendiente'::character varying, 'confirmada'::character varying, 'en_proceso'::character varying, 'completada'::character varying, 'cancelada'::character varying, 'no_asistio'::character varying])::text[])"
        },
        "citas_hora_fin_check": {
          "name": "citas_hora_fin_check",
          "value": "(hora_fin IS NOT NULL) OR ((creada_por)::text = 'negocio'::text)"
        },
        "citas_origen_check": {
          "name": "citas_origen_check",
          "value": "(origen_reserva)::text = ANY ((ARRAY['web'::character varying, 'app'::character varying, 'telefono'::character varying, 'presencial'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.empleado_horarios": {
      "name": "empleado_horarios",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "empleado_id": {
          "name": "empleado_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "dia_semana": {
          "name": "dia_semana",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true
        },
        "hora_entrada": {
          "name": "hora_entrada",
          "type": "time",
          "primaryKey": false,
          "notNull": true
        },
        "hora_salida": {
          "name": "hora_salida",
          "type": "time",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "idx_empleado_horarios_empleado_id": {
          "name": "idx_empleado_horarios_empleado_id",
          "columns": [
            {
              "expression": "empleado_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_empleado_horarios_negocio_id": {
          "name": "idx_empleado_horarios_negocio_id",
          "columns": [
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "empleado_horarios_empleado_id_fkey": {
          "name": "empleado_horarios_empleado_id_fkey",
          "tableFrom": "empleado_horarios",
          "columnsFrom": [
            "empleado_id"
          ],
          "tableTo": "empleados",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "empleado_horarios_negocio_id_fkey": {
          "name": "empleado_horarios_negocio_id_fkey",
          "tableFrom": "empleado_horarios",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "empleado_horarios_unique": {
          "name": "empleado_horarios_unique",
          "columns": [
            "empleado_id",
            "negocio_id",
            "dia_semana",
            "hora_entrada"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "empleado_horarios_dia_check": {
          "name": "empleado_horarios_dia_check",
          "value": "(dia_semana >= 0) AND (dia_semana <= 6)"
        }
      },
      "isRLSEnabled": false
    },
    "public.direcciones_usuario": {
      "name": "direcciones_usuario",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "etiqueta": {
          "name": "etiqueta",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "es_predeterminada": {
          "name": "es_predeterminada",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "calle": {
          "name": "calle",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "numero_exterior": {
          "name": "numero_exterior",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "numero_interior": {
          "name": "numero_interior",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "colonia": {
          "name": "colonia",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "ciudad": {
          "name": "ciudad",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "estado": {
          "name": "estado",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "codigo_postal": {
          "name": "codigo_postal",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "referencias": {
          "name": "referencias",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "nombre_receptor": {
          "name": "nombre_receptor",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "telefono_receptor": {
          "name": "telefono_receptor",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "latitud": {
          "name": "latitud",
          "type": "numeric(10, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "longitud": {
          "name": "longitud",
          "type": "numeric(11, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_direcciones_usuario_usuario_id": {
          "name": "idx_direcciones_usuario_usuario_id",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "direcciones_usuario_usuario_id_fkey": {
          "name": "direcciones_usuario_usuario_id_fkey",
          "tableFrom": "direcciones_usuario",
          "columnsFrom": [
            "usuario_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.pedido_articulos": {
      "name": "pedido_articulos",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "pedido_id": {
          "name": "pedido_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "nombre": {
          "name": "nombre",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "imagen_url": {
          "name": "imagen_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sku": {
          "name": "sku",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "precio_unitario": {
          "name": "precio_unitario",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "cantidad": {
          "name": "cantidad",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "subtotal": {
          "name": "subtotal",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "modificadores": {
          "name": "modificadores",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "notas": {
          "name": "notas",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_pedido_articulos_pedido_id": {
          "name": "idx_pedido_articulos_pedido_id",
          "columns": [
            {
              "expression": "pedido_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "pedido_articulos_pedido_id_fkey": {
          "name": "pedido_articulos_pedido_id_fkey",
          "tableFrom": "pedido_articulos",
          "columnsFrom": [
            "pedido_id"
          ],
          "tableTo": "pedidos",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.carrito": {
      "name": "carrito",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "tipo_seccion": {
          "name": "tipo_seccion",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'marketplace'"
        },
        "tipo_vendedor": {
          "name": "tipo_vendedor",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true,
          "default": "'comercial'"
        },
        "vendedor_id": {
          "name": "vendedor_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true,
          "default": "'00000000-0000-0000-0000-000000000000'"
        }
      },
      "indexes": {
        "idx_carrito_usuario_id": {
          "name": "idx_carrito_usuario_id",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "carrito_usuario_id_fkey": {
          "name": "carrito_usuario_id_fkey",
          "tableFrom": "carrito",
          "columnsFrom": [
            "usuario_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "carrito_usuario_vendedor_unique": {
          "name": "carrito_usuario_vendedor_unique",
          "columns": [
            "usuario_id",
            "tipo_vendedor",
            "vendedor_id"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "carrito_tipo_seccion_check": {
          "name": "carrito_tipo_seccion_check",
          "value": "(tipo_seccion)::text = ANY ((ARRAY['marketplace'::character varying, 'negocios_locales'::character varying, 'promociones'::character varying, 'rifas'::character varying, 'subastas'::character varying, 'turismo'::character varying])::text[])"
        },
        "carrito_tipo_vendedor_check": {
          "name": "carrito_tipo_vendedor_check",
          "value": "(tipo_vendedor)::text = ANY ((ARRAY['comercial'::character varying, 'personal'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.pedidos": {
      "name": "pedidos",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "numero_pedido": {
          "name": "numero_pedido",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "tipo_seccion": {
          "name": "tipo_seccion",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "comprador_id": {
          "name": "comprador_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tipo_vendedor": {
          "name": "tipo_vendedor",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "vendedor_id": {
          "name": "vendedor_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "estado": {
          "name": "estado",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'pendiente'"
        },
        "motivo_cancelacion": {
          "name": "motivo_cancelacion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cancelado_por": {
          "name": "cancelado_por",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "tipo_entrega": {
          "name": "tipo_entrega",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "direccion_entrega": {
          "name": "direccion_entrega",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "metodo_pago": {
          "name": "metodo_pago",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": true
        },
        "estado_pago": {
          "name": "estado_pago",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'pendiente'"
        },
        "subtotal": {
          "name": "subtotal",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "descuento": {
          "name": "descuento",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "costo_envio": {
          "name": "costo_envio",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "total": {
          "name": "total",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "cupon_id": {
          "name": "cupon_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "codigo_cupon_usado": {
          "name": "codigo_cupon_usado",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "notas_comprador": {
          "name": "notas_comprador",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notas_vendedor": {
          "name": "notas_vendedor",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "confirmado_at": {
          "name": "confirmado_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "entregado_at": {
          "name": "entregado_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "referencia_pago": {
          "name": "referencia_pago",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_pedidos_comprador_estado": {
          "name": "idx_pedidos_comprador_estado",
          "columns": [
            {
              "expression": "comprador_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            },
            {
              "expression": "estado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_pedidos_seccion_fecha": {
          "name": "idx_pedidos_seccion_fecha",
          "columns": [
            {
              "expression": "tipo_seccion",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_pedidos_vendedor": {
          "name": "idx_pedidos_vendedor",
          "columns": [
            {
              "expression": "tipo_vendedor",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "vendedor_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            },
            {
              "expression": "estado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_pedidos_cupon": {
          "name": "fk_pedidos_cupon",
          "tableFrom": "pedidos",
          "columnsFrom": [
            "cupon_id"
          ],
          "tableTo": "cupones",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "set null"
        },
        "pedidos_comprador_id_fkey": {
          "name": "pedidos_comprador_id_fkey",
          "tableFrom": "pedidos",
          "columnsFrom": [
            "comprador_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "restrict"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "pedidos_numero_pedido_key": {
          "name": "pedidos_numero_pedido_key",
          "columns": [
            "numero_pedido"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "pedidos_estado_check": {
          "name": "pedidos_estado_check",
          "value": "(estado)::text = ANY ((ARRAY['pendiente'::character varying, 'confirmado'::character varying, 'en_preparacion'::character varying, 'en_camino'::character varying, 'entregado'::character varying, 'cancelado'::character varying])::text[])"
        },
        "pedidos_metodo_pago_check": {
          "name": "pedidos_metodo_pago_check",
          "value": "(metodo_pago)::text = ANY ((ARRAY['efectivo'::character varying, 'tarjeta'::character varying, 'transferencia'::character varying])::text[])"
        },
        "pedidos_tipo_entrega_check": {
          "name": "pedidos_tipo_entrega_check",
          "value": "(tipo_entrega)::text = ANY ((ARRAY['recoger_tienda'::character varying, 'envio_domicilio'::character varying])::text[])"
        },
        "pedidos_tipo_seccion_check": {
          "name": "pedidos_tipo_seccion_check",
          "value": "(tipo_seccion)::text = ANY ((ARRAY['negocios_locales'::character varying, 'marketplace'::character varying, 'turismo'::character varying, 'promociones'::character varying, 'rifas'::character varying, 'subastas'::character varying])::text[])"
        },
        "pedidos_tipo_vendedor_check": {
          "name": "pedidos_tipo_vendedor_check",
          "value": "(tipo_vendedor)::text = ANY ((ARRAY['negocio'::character varying, 'usuario'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.ofertas": {
      "name": "ofertas",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "articulo_id": {
          "name": "articulo_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "titulo": {
          "name": "titulo",
          "type": "varchar(150)",
          "primaryKey": false,
          "notNull": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tipo": {
          "name": "tipo",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "valor": {
          "name": "valor",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "compra_minima": {
          "name": "compra_minima",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "fecha_inicio": {
          "name": "fecha_inicio",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "fecha_fin": {
          "name": "fecha_fin",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "limite_usos": {
          "name": "limite_usos",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "usos_actuales": {
          "name": "usos_actuales",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "activo": {
          "name": "activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_ofertas_activo": {
          "name": "idx_ofertas_activo",
          "columns": [
            {
              "expression": "activo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_ofertas_fecha_fin": {
          "name": "idx_ofertas_fecha_fin",
          "columns": [
            {
              "expression": "fecha_fin",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_ofertas_fecha_inicio": {
          "name": "idx_ofertas_fecha_inicio",
          "columns": [
            {
              "expression": "fecha_inicio",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_ofertas_negocio_id": {
          "name": "idx_ofertas_negocio_id",
          "columns": [
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "ofertas_articulo_id_fkey": {
          "name": "ofertas_articulo_id_fkey",
          "tableFrom": "ofertas",
          "columnsFrom": [
            "articulo_id"
          ],
          "tableTo": "articulos",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "ofertas_negocio_id_fkey": {
          "name": "ofertas_negocio_id_fkey",
          "tableFrom": "ofertas",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "ofertas_tipo_check": {
          "name": "ofertas_tipo_check",
          "value": "(tipo)::text = ANY ((ARRAY['porcentaje'::character varying, 'monto_fijo'::character varying, '2x1'::character varying, '3x2'::character varying, 'envio_gratis'::character varying, 'otro'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.cupon_galeria": {
      "name": "cupon_galeria",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "cupon_id": {
          "name": "cupon_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "public_id": {
          "name": "public_id",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "thumb_url": {
          "name": "thumb_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "orden": {
          "name": "orden",
          "type": "smallint",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "es_logo": {
          "name": "es_logo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        }
      },
      "indexes": {
        "idx_cupon_galeria_cupon_id": {
          "name": "idx_cupon_galeria_cupon_id",
          "columns": [
            {
              "expression": "cupon_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "cupon_galeria_cupon_id_fkey": {
          "name": "cupon_galeria_cupon_id_fkey",
          "tableFrom": "cupon_galeria",
          "columnsFrom": [
            "cupon_id"
          ],
          "tableTo": "cupones",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.cupon_usos": {
      "name": "cupon_usos",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "cupon_id": {
          "name": "cupon_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "estado": {
          "name": "estado",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'asignado'"
        },
        "codigo_generado": {
          "name": "codigo_generado",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "metodo_canje": {
          "name": "metodo_canje",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "monto_compra": {
          "name": "monto_compra",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "descuento_aplicado": {
          "name": "descuento_aplicado",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "pedido_id": {
          "name": "pedido_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "notas": {
          "name": "notas",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "usado_at": {
          "name": "usado_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_cupon_usos_created_at": {
          "name": "idx_cupon_usos_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_cupon_usos_cupon_usuario": {
          "name": "idx_cupon_usos_cupon_usuario",
          "columns": [
            {
              "expression": "cupon_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_cupon_usos_usado_at": {
          "name": "idx_cupon_usos_usado_at",
          "columns": [
            {
              "expression": "usado_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_cupon_usos_usuario_estado": {
          "name": "idx_cupon_usos_usuario_estado",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "estado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "cupon_usos_cupon_id_fkey": {
          "name": "cupon_usos_cupon_id_fkey",
          "tableFrom": "cupon_usos",
          "columnsFrom": [
            "cupon_id"
          ],
          "tableTo": "cupones",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "cupon_usos_usuario_id_fkey": {
          "name": "cupon_usos_usuario_id_fkey",
          "tableFrom": "cupon_usos",
          "columnsFrom": [
            "usuario_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "cupon_usos_codigo_generado_key": {
          "name": "cupon_usos_codigo_generado_key",
          "columns": [
            "codigo_generado"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "cupon_usos_estado_check": {
          "name": "cupon_usos_estado_check",
          "value": "(estado)::text = ANY ((ARRAY['asignado'::character varying, 'usado'::character varying, 'expirado'::character varying])::text[])"
        },
        "cupon_usos_metodo_check": {
          "name": "cupon_usos_metodo_check",
          "value": "(metodo_canje IS NULL) OR ((metodo_canje)::text = ANY ((ARRAY['qr_presencial'::character varying, 'codigo_online'::character varying, 'carrito'::character varying])::text[]))"
        }
      },
      "isRLSEnabled": false
    },
    "public.cupon_usuarios": {
      "name": "cupon_usuarios",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "cupon_id": {
          "name": "cupon_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "motivo": {
          "name": "motivo",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": false
        },
        "asignado_at": {
          "name": "asignado_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_cupon_usuarios_cupon_id": {
          "name": "idx_cupon_usuarios_cupon_id",
          "columns": [
            {
              "expression": "cupon_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_cupon_usuarios_usuario_id": {
          "name": "idx_cupon_usuarios_usuario_id",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "cupon_usuarios_cupon_id_fkey": {
          "name": "cupon_usuarios_cupon_id_fkey",
          "tableFrom": "cupon_usuarios",
          "columnsFrom": [
            "cupon_id"
          ],
          "tableTo": "cupones",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "cupon_usuarios_usuario_id_fkey": {
          "name": "cupon_usuarios_usuario_id_fkey",
          "tableFrom": "cupon_usuarios",
          "columnsFrom": [
            "usuario_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "cupon_usuarios_unique": {
          "name": "cupon_usuarios_unique",
          "columns": [
            "cupon_id",
            "usuario_id"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.cupones": {
      "name": "cupones",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "codigo": {
          "name": "codigo",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "titulo": {
          "name": "titulo",
          "type": "varchar(150)",
          "primaryKey": false,
          "notNull": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": false
        },
        "tipo": {
          "name": "tipo",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "valor": {
          "name": "valor",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "compra_minima": {
          "name": "compra_minima",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "fecha_inicio": {
          "name": "fecha_inicio",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "fecha_expiracion": {
          "name": "fecha_expiracion",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "limite_usos_total": {
          "name": "limite_usos_total",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "limite_usos_por_usuario": {
          "name": "limite_usos_por_usuario",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "usos_actuales": {
          "name": "usos_actuales",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "estado": {
          "name": "estado",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'borrador'"
        },
        "activo": {
          "name": "activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "visibilidad": {
          "name": "visibilidad",
          "type": "varchar(15)",
          "primaryKey": false,
          "notNull": false,
          "default": "'publico'"
        }
      },
      "indexes": {
        "idx_cupones_activo": {
          "name": "idx_cupones_activo",
          "columns": [
            {
              "expression": "activo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_cupones_negocio_id": {
          "name": "idx_cupones_negocio_id",
          "columns": [
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "cupones_negocio_id_fkey": {
          "name": "cupones_negocio_id_fkey",
          "tableFrom": "cupones",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "cupones_codigo_key": {
          "name": "cupones_codigo_key",
          "columns": [
            "codigo"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "cupones_estado_check": {
          "name": "cupones_estado_check",
          "value": "(estado)::text = ANY ((ARRAY['borrador'::character varying, 'publicado'::character varying, 'pausado'::character varying, 'archivado'::character varying])::text[])"
        },
        "cupones_tipo_check": {
          "name": "cupones_tipo_check",
          "value": "(tipo)::text = ANY ((ARRAY['porcentaje'::character varying, 'monto_fijo'::character varying, '2x1'::character varying, '3x2'::character varying, 'envio_gratis'::character varying, 'otro'::character varying])::text[])"
        },
        "cupones_visibilidad_check": {
          "name": "cupones_visibilidad_check",
          "value": "(visibilidad)::text = ANY ((ARRAY['publico'::character varying, 'privado'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.marketplace": {
      "name": "marketplace",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "autor_id": {
          "name": "autor_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "categoria_id": {
          "name": "categoria_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "titulo": {
          "name": "titulo",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "precio": {
          "name": "precio",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "condicion": {
          "name": "condicion",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "imagenes": {
          "name": "imagenes",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "ciudad": {
          "name": "ciudad",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "estado": {
          "name": "estado",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'activo'"
        },
        "fecha_expiracion": {
          "name": "fecha_expiracion",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "calificacion_promedio": {
          "name": "calificacion_promedio",
          "type": "numeric(2, 1)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "total_calificaciones": {
          "name": "total_calificaciones",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_likes": {
          "name": "total_likes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_visitas": {
          "name": "total_visitas",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_marketplace_autor_id": {
          "name": "idx_marketplace_autor_id",
          "columns": [
            {
              "expression": "autor_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_marketplace_categoria_id": {
          "name": "idx_marketplace_categoria_id",
          "columns": [
            {
              "expression": "categoria_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_marketplace_ciudad": {
          "name": "idx_marketplace_ciudad",
          "columns": [
            {
              "expression": "ciudad",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_marketplace_estado": {
          "name": "idx_marketplace_estado",
          "columns": [
            {
              "expression": "estado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "marketplace_autor_id_fkey": {
          "name": "marketplace_autor_id_fkey",
          "tableFrom": "marketplace",
          "columnsFrom": [
            "autor_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "marketplace_categoria_id_fkey": {
          "name": "marketplace_categoria_id_fkey",
          "tableFrom": "marketplace",
          "columnsFrom": [
            "categoria_id"
          ],
          "tableTo": "categorias_marketplace",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "marketplace_negocio_id_fkey": {
          "name": "marketplace_negocio_id_fkey",
          "tableFrom": "marketplace",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "marketplace_condicion_check": {
          "name": "marketplace_condicion_check",
          "value": "(condicion IS NULL) OR ((condicion)::text = ANY ((ARRAY['nuevo'::character varying, 'usado'::character varying, 'reacondicionado'::character varying])::text[]))"
        },
        "marketplace_estado_check": {
          "name": "marketplace_estado_check",
          "value": "(estado)::text = ANY ((ARRAY['activo'::character varying, 'vendido'::character varying, 'pausado'::character varying, 'expirado'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.categorias_marketplace": {
      "name": "categorias_marketplace",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "nombre": {
          "name": "nombre",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "icono": {
          "name": "icono",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "orden": {
          "name": "orden",
          "type": "smallint",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "activa": {
          "name": "activa",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "categorias_marketplace_nombre_key": {
          "name": "categorias_marketplace_nombre_key",
          "columns": [
            "nombre"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.planes": {
      "name": "planes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "perfil": {
          "name": "perfil",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "membresia": {
          "name": "membresia",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true
        },
        "nombre": {
          "name": "nombre",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "precio_mensual": {
          "name": "precio_mensual",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "precio_anual": {
          "name": "precio_anual",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "moneda": {
          "name": "moneda",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": false,
          "default": "'MXN'"
        },
        "activo": {
          "name": "activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "orden_display": {
          "name": "orden_display",
          "type": "smallint",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_planes_activo": {
          "name": "idx_planes_activo",
          "columns": [
            {
              "expression": "activo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "planes_unique": {
          "name": "planes_unique",
          "columns": [
            "perfil",
            "membresia"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "planes_membresia_check": {
          "name": "planes_membresia_check",
          "value": "membresia = ANY (ARRAY[1, 2, 3])"
        },
        "planes_perfil_check": {
          "name": "planes_perfil_check",
          "value": "(perfil)::text = ANY ((ARRAY['personal'::character varying, 'comercial'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.plan_reglas": {
      "name": "plan_reglas",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "plan_id": {
          "name": "plan_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "clave": {
          "name": "clave",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": false
        },
        "tipo": {
          "name": "tipo",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "seccion": {
          "name": "seccion",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "valor": {
          "name": "valor",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "activo": {
          "name": "activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "updated_by": {
          "name": "updated_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_plan_reglas_activo": {
          "name": "idx_plan_reglas_activo",
          "columns": [
            {
              "expression": "activo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_plan_reglas_plan_id": {
          "name": "idx_plan_reglas_plan_id",
          "columns": [
            {
              "expression": "plan_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_plan_reglas_seccion": {
          "name": "idx_plan_reglas_seccion",
          "columns": [
            {
              "expression": "seccion",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "plan_reglas_plan_id_fkey": {
          "name": "plan_reglas_plan_id_fkey",
          "tableFrom": "plan_reglas",
          "columnsFrom": [
            "plan_id"
          ],
          "tableTo": "planes",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "plan_reglas_updated_by_fkey": {
          "name": "plan_reglas_updated_by_fkey",
          "tableFrom": "plan_reglas",
          "columnsFrom": [
            "updated_by"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "plan_reglas_unique": {
          "name": "plan_reglas_unique",
          "columns": [
            "plan_id",
            "clave"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "plan_reglas_tipo_check": {
          "name": "plan_reglas_tipo_check",
          "value": "(tipo)::text = ANY ((ARRAY['configuracion'::character varying, 'limite'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.bitacora_uso": {
      "name": "bitacora_uso",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "clave": {
          "name": "clave",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "seccion": {
          "name": "seccion",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "accion": {
          "name": "accion",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "cantidad": {
          "name": "cantidad",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "entidad_id": {
          "name": "entidad_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "entidad_tipo": {
          "name": "entidad_tipo",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "notas": {
          "name": "notas",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_bitacora_uso_clave": {
          "name": "idx_bitacora_uso_clave",
          "columns": [
            {
              "expression": "clave",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_bitacora_uso_seccion": {
          "name": "idx_bitacora_uso_seccion",
          "columns": [
            {
              "expression": "seccion",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_bitacora_uso_usuario_clave": {
          "name": "idx_bitacora_uso_usuario_clave",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "clave",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_bitacora_uso_usuario_created": {
          "name": "idx_bitacora_uso_usuario_created",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_bitacora_uso_usuario_id": {
          "name": "idx_bitacora_uso_usuario_id",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "bitacora_uso_negocio_id_fkey": {
          "name": "bitacora_uso_negocio_id_fkey",
          "tableFrom": "bitacora_uso",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        },
        "bitacora_uso_usuario_id_fkey": {
          "name": "bitacora_uso_usuario_id_fkey",
          "tableFrom": "bitacora_uso",
          "columnsFrom": [
            "usuario_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "bitacora_uso_accion_check": {
          "name": "bitacora_uso_accion_check",
          "value": "(accion)::text = ANY ((ARRAY['incremento'::character varying, 'decremento'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.votos": {
      "name": "votos",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_votos_entity": {
          "name": "idx_votos_entity",
          "columns": [
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_votos_user_id": {
          "name": "idx_votos_user_id",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "votos_user_id_fkey": {
          "name": "votos_user_id_fkey",
          "tableFrom": "votos",
          "columnsFrom": [
            "user_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "votos_unique": {
          "name": "votos_unique",
          "columns": [
            "user_id",
            "entity_type",
            "entity_id"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "votos_entity_type_check": {
          "name": "votos_entity_type_check",
          "value": "(entity_type)::text = ANY ((ARRAY['negocio'::character varying, 'usuario'::character varying, 'articulo'::character varying, 'publicacion'::character varying, 'rifa'::character varying, 'subasta'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.resenas": {
      "name": "resenas",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "autor_id": {
          "name": "autor_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "autor_tipo": {
          "name": "autor_tipo",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "destino_tipo": {
          "name": "destino_tipo",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "destino_id": {
          "name": "destino_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "rating": {
          "name": "rating",
          "type": "smallint",
          "primaryKey": false,
          "notNull": false
        },
        "texto": {
          "name": "texto",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "interaccion_tipo": {
          "name": "interaccion_tipo",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "interaccion_id": {
          "name": "interaccion_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_resenas_destino": {
          "name": "idx_resenas_destino",
          "columns": [
            {
              "expression": "destino_tipo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "destino_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_resenas_interaccion": {
          "name": "idx_resenas_interaccion",
          "columns": [
            {
              "expression": "interaccion_tipo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            },
            {
              "expression": "interaccion_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "resenas_autor_id_fkey": {
          "name": "resenas_autor_id_fkey",
          "tableFrom": "resenas",
          "columnsFrom": [
            "autor_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "resenas_unique": {
          "name": "resenas_unique",
          "columns": [
            "autor_id",
            "destino_tipo",
            "destino_id",
            "interaccion_id"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "resenas_autor_tipo_check": {
          "name": "resenas_autor_tipo_check",
          "value": "(autor_tipo)::text = ANY ((ARRAY['cliente'::character varying, 'negocio'::character varying])::text[])"
        },
        "resenas_contenido_check": {
          "name": "resenas_contenido_check",
          "value": "(rating IS NOT NULL) OR (texto IS NOT NULL)"
        },
        "resenas_destino_tipo_check": {
          "name": "resenas_destino_tipo_check",
          "value": "(destino_tipo)::text = ANY ((ARRAY['negocio'::character varying, 'usuario'::character varying])::text[])"
        },
        "resenas_direccion_check": {
          "name": "resenas_direccion_check",
          "value": "(((autor_tipo)::text = 'cliente'::text) AND ((destino_tipo)::text = 'negocio'::text)) OR (((autor_tipo)::text = 'negocio'::text) AND ((destino_tipo)::text = 'usuario'::text))"
        },
        "resenas_interaccion_tipo_check": {
          "name": "resenas_interaccion_tipo_check",
          "value": "(interaccion_tipo)::text = ANY ((ARRAY['pedido'::character varying, 'cita'::character varying, 'mensaje'::character varying])::text[])"
        },
        "resenas_rating_check": {
          "name": "resenas_rating_check",
          "value": "(rating IS NULL) OR ((rating >= 1) AND (rating <= 5))"
        }
      },
      "isRLSEnabled": false
    },
    "public.metricas_entidad": {
      "name": "metricas_entidad",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "total_likes": {
          "name": "total_likes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_ratings": {
          "name": "total_ratings",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "promedio_rating": {
          "name": "promedio_rating",
          "type": "numeric(2, 1)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "total_resenas": {
          "name": "total_resenas",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_views": {
          "name": "total_views",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_clicks": {
          "name": "total_clicks",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_shares": {
          "name": "total_shares",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_messages": {
          "name": "total_messages",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_saves": {
          "name": "total_saves",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_metricas_entidad_entity": {
          "name": "idx_metricas_entidad_entity",
          "columns": [
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "metricas_entidad_unique": {
          "name": "metricas_entidad_unique",
          "columns": [
            "entity_type",
            "entity_id"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "metricas_entidad_type_check": {
          "name": "metricas_entidad_type_check",
          "value": "(entity_type)::text = ANY ((ARRAY['negocio'::character varying, 'articulo'::character varying, 'publicacion'::character varying, 'rifa'::character varying, 'subasta'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.metricas_usuario": {
      "name": "metricas_usuario",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "total_likes": {
          "name": "total_likes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_ratings": {
          "name": "total_ratings",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "promedio_rating": {
          "name": "promedio_rating",
          "type": "numeric(2, 1)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "total_resenas": {
          "name": "total_resenas",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_metricas_usuario_user_id": {
          "name": "idx_metricas_usuario_user_id",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "metricas_usuario_user_id_fkey": {
          "name": "metricas_usuario_user_id_fkey",
          "tableFrom": "metricas_usuario",
          "columnsFrom": [
            "user_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "metricas_usuario_user_id_key": {
          "name": "metricas_usuario_user_id_key",
          "columns": [
            "user_id"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.carrito_articulos": {
      "name": "carrito_articulos",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "carrito_id": {
          "name": "carrito_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "articulo_id": {
          "name": "articulo_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "cantidad": {
          "name": "cantidad",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "modificadores": {
          "name": "modificadores",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "notas": {
          "name": "notas",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_carrito_articulos_carrito_id": {
          "name": "idx_carrito_articulos_carrito_id",
          "columns": [
            {
              "expression": "carrito_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "carrito_articulos_articulo_id_fkey": {
          "name": "carrito_articulos_articulo_id_fkey",
          "tableFrom": "carrito_articulos",
          "columnsFrom": [
            "articulo_id"
          ],
          "tableTo": "articulos",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "carrito_articulos_carrito_id_fkey": {
          "name": "carrito_articulos_carrito_id_fkey",
          "tableFrom": "carrito_articulos",
          "columnsFrom": [
            "carrito_id"
          ],
          "tableTo": "carrito",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "carrito_articulos_carrito_id_articulo_id_modificadores_key": {
          "name": "carrito_articulos_carrito_id_articulo_id_modificadores_key",
          "columns": [
            "carrito_id",
            "articulo_id",
            "modificadores"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.categorias_negocio": {
      "name": "categorias_negocio",
      "schema": "",
      "columns": {
        "nombre": {
          "name": "nombre",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "icono": {
          "name": "icono",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "orden": {
          "name": "orden",
          "type": "smallint",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "activa": {
          "name": "activa",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "categorias_negocio_nombre_key": {
          "name": "categorias_negocio_nombre_key",
          "columns": [
            "nombre"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.subcategorias_negocio": {
      "name": "subcategorias_negocio",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "categoria_id": {
          "name": "categoria_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "nombre": {
          "name": "nombre",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "orden": {
          "name": "orden",
          "type": "smallint",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "activa": {
          "name": "activa",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "icono": {
          "name": "icono",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "subcategorias_negocio_unique": {
          "name": "subcategorias_negocio_unique",
          "columns": [
            "categoria_id",
            "nombre"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.configuracion_sistema": {
      "name": "configuracion_sistema",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "clave": {
          "name": "clave",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "valor": {
          "name": "valor",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "tipo": {
          "name": "tipo",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "categoria": {
          "name": "categoria",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "unidad": {
          "name": "unidad",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "valor_minimo": {
          "name": "valor_minimo",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "valor_maximo": {
          "name": "valor_maximo",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "actualizado_por": {
          "name": "actualizado_por",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_configuracion_categoria": {
          "name": "idx_configuracion_categoria",
          "columns": [
            {
              "expression": "categoria",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_configuracion_clave": {
          "name": "idx_configuracion_clave",
          "columns": [
            {
              "expression": "clave",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_configuracion_usuario": {
          "name": "fk_configuracion_usuario",
          "tableFrom": "configuracion_sistema",
          "columnsFrom": [
            "actualizado_por"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "set null"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "configuracion_sistema_clave_key": {
          "name": "configuracion_sistema_clave_key",
          "columns": [
            "clave"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "configuracion_categoria_check": {
          "name": "configuracion_categoria_check",
          "value": "(categoria)::text = ANY (ARRAY[('transacciones'::character varying)::text, ('notificaciones'::character varying)::text, ('seguridad'::character varying)::text, ('pagos'::character varying)::text, ('promociones'::character varying)::text, ('trials'::character varying)::text, ('general'::character varying)::text])"
        },
        "configuracion_tipo_check": {
          "name": "configuracion_tipo_check",
          "value": "(tipo)::text = ANY ((ARRAY['numero'::character varying, 'texto'::character varying, 'booleano'::character varying, 'json'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.planes_anuncios": {
      "name": "planes_anuncios",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "nombre": {
          "name": "nombre",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "duracion_dias": {
          "name": "duracion_dias",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "precio": {
          "name": "precio",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "max_secciones": {
          "name": "max_secciones",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "prioridad_base": {
          "name": "prioridad_base",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 5
        },
        "activo": {
          "name": "activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "orden": {
          "name": "orden",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_planes_anuncios_activo_orden": {
          "name": "idx_planes_anuncios_activo_orden",
          "columns": [
            {
              "expression": "activo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            },
            {
              "expression": "orden",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(activo = true)",
          "concurrently": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "planes_anuncios_duracion_dias_check": {
          "name": "planes_anuncios_duracion_dias_check",
          "value": "duracion_dias > 0"
        },
        "planes_anuncios_max_secciones_check": {
          "name": "planes_anuncios_max_secciones_check",
          "value": "(max_secciones >= 1) AND (max_secciones <= 5)"
        },
        "planes_anuncios_precio_check": {
          "name": "planes_anuncios_precio_check",
          "value": "precio >= (0)::numeric"
        },
        "planes_anuncios_prioridad_check": {
          "name": "planes_anuncios_prioridad_check",
          "value": "(prioridad_base >= 1) AND (prioridad_base <= 10)"
        }
      },
      "isRLSEnabled": false
    },
    "public.promociones_pagadas": {
      "name": "promociones_pagadas",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "plan_anuncio_id": {
          "name": "plan_anuncio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tipo_entidad": {
          "name": "tipo_entidad",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "entidad_id": {
          "name": "entidad_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "secciones_activas": {
          "name": "secciones_activas",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "modo_visualizacion": {
          "name": "modo_visualizacion",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'carousel'"
        },
        "prioridad": {
          "name": "prioridad",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "clicks_totales": {
          "name": "clicks_totales",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "impresiones_totales": {
          "name": "impresiones_totales",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "stripe_payment_intent_id": {
          "name": "stripe_payment_intent_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "precio_pagado": {
          "name": "precio_pagado",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "duracion_dias": {
          "name": "duracion_dias",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "inicia_at": {
          "name": "inicia_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expira_at": {
          "name": "expira_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "estado": {
          "name": "estado",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'activo'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_promociones_estado_expira": {
          "name": "idx_promociones_estado_expira",
          "columns": [
            {
              "expression": "estado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            },
            {
              "expression": "expira_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "((estado)::text = 'activo'::text)",
          "concurrently": false
        },
        "idx_promociones_secciones": {
          "name": "idx_promociones_secciones",
          "columns": [
            {
              "expression": "secciones_activas",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "gin",
          "concurrently": false
        },
        "idx_promociones_tipo_entidad": {
          "name": "idx_promociones_tipo_entidad",
          "columns": [
            {
              "expression": "tipo_entidad",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "entidad_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_promociones_usuario": {
          "name": "idx_promociones_usuario",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_promociones_plan": {
          "name": "fk_promociones_plan",
          "tableFrom": "promociones_pagadas",
          "columnsFrom": [
            "plan_anuncio_id"
          ],
          "tableTo": "planes_anuncios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "restrict"
        },
        "fk_promociones_usuario": {
          "name": "fk_promociones_usuario",
          "tableFrom": "promociones_pagadas",
          "columnsFrom": [
            "usuario_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "promociones_pagadas_estado_check": {
          "name": "promociones_pagadas_estado_check",
          "value": "(estado)::text = ANY ((ARRAY['activo'::character varying, 'pausado'::character varying, 'expirado'::character varying, 'cancelado'::character varying])::text[])"
        },
        "promociones_pagadas_fechas_check": {
          "name": "promociones_pagadas_fechas_check",
          "value": "expira_at > inicia_at"
        },
        "promociones_pagadas_modo_check": {
          "name": "promociones_pagadas_modo_check",
          "value": "(modo_visualizacion)::text = ANY ((ARRAY['carousel'::character varying, 'estatico'::character varying])::text[])"
        },
        "promociones_pagadas_precio_check": {
          "name": "promociones_pagadas_precio_check",
          "value": "precio_pagado >= (0)::numeric"
        },
        "promociones_pagadas_tipo_entidad_check": {
          "name": "promociones_pagadas_tipo_entidad_check",
          "value": "(tipo_entidad)::text = ANY ((ARRAY['marketplace'::character varying, 'oferta'::character varying, 'dinamica'::character varying, 'bolsa'::character varying, 'negocio'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.promociones_temporales": {
      "name": "promociones_temporales",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "codigo": {
          "name": "codigo",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "nombre": {
          "name": "nombre",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tipo_descuento": {
          "name": "tipo_descuento",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "valor_descuento": {
          "name": "valor_descuento",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "aplica_a": {
          "name": "aplica_a",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "planes_incluidos": {
          "name": "planes_incluidos",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "fecha_inicio": {
          "name": "fecha_inicio",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "fecha_fin": {
          "name": "fecha_fin",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "max_usos_totales": {
          "name": "max_usos_totales",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "max_usos_por_usuario": {
          "name": "max_usos_por_usuario",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "usos_actuales": {
          "name": "usos_actuales",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "activo": {
          "name": "activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "visible_publico": {
          "name": "visible_publico",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "creado_por": {
          "name": "creado_por",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_promociones_temp_activo_fechas": {
          "name": "idx_promociones_temp_activo_fechas",
          "columns": [
            {
              "expression": "activo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            },
            {
              "expression": "fecha_inicio",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            },
            {
              "expression": "fecha_fin",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(activo = true)",
          "concurrently": false
        },
        "idx_promociones_temp_aplica": {
          "name": "idx_promociones_temp_aplica",
          "columns": [
            {
              "expression": "aplica_a",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_promociones_temp_codigo": {
          "name": "idx_promociones_temp_codigo",
          "columns": [
            {
              "expression": "upper((codigo)::text)",
              "isExpression": true,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_promociones_temp_visible": {
          "name": "idx_promociones_temp_visible",
          "columns": [
            {
              "expression": "visible_publico",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(visible_publico = true)",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_promociones_temporales_creador": {
          "name": "fk_promociones_temporales_creador",
          "tableFrom": "promociones_temporales",
          "columnsFrom": [
            "creado_por"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "set null"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "promociones_temporales_codigo_key": {
          "name": "promociones_temporales_codigo_key",
          "columns": [
            "codigo"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "promociones_temporales_aplica_check": {
          "name": "promociones_temporales_aplica_check",
          "value": "(aplica_a)::text = ANY ((ARRAY['planes'::character varying, 'anuncios'::character varying, 'ambos'::character varying])::text[])"
        },
        "promociones_temporales_codigo_check": {
          "name": "promociones_temporales_codigo_check",
          "value": "((codigo)::text = upper((codigo)::text)) AND ((codigo)::text !~ '\\s'::text)"
        },
        "promociones_temporales_fechas_check": {
          "name": "promociones_temporales_fechas_check",
          "value": "fecha_fin > fecha_inicio"
        },
        "promociones_temporales_fijo_check": {
          "name": "promociones_temporales_fijo_check",
          "value": "((tipo_descuento)::text <> 'fijo'::text) OR (valor_descuento > (0)::numeric)"
        },
        "promociones_temporales_max_usos_check": {
          "name": "promociones_temporales_max_usos_check",
          "value": "(max_usos_totales IS NULL) OR (max_usos_totales > 0)"
        },
        "promociones_temporales_porcentaje_check": {
          "name": "promociones_temporales_porcentaje_check",
          "value": "((tipo_descuento)::text <> 'porcentaje'::text) OR ((valor_descuento >= (1)::numeric) AND (valor_descuento <= (100)::numeric))"
        },
        "promociones_temporales_tipo_check": {
          "name": "promociones_temporales_tipo_check",
          "value": "(tipo_descuento)::text = ANY ((ARRAY['porcentaje'::character varying, 'fijo'::character varying, '3x2'::character varying, 'meses_gratis'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.promociones_usadas": {
      "name": "promociones_usadas",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "promocion_id": {
          "name": "promocion_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tipo_entidad": {
          "name": "tipo_entidad",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "entidad_id": {
          "name": "entidad_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "precio_original": {
          "name": "precio_original",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "precio_final": {
          "name": "precio_final",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "descuento_aplicado": {
          "name": "descuento_aplicado",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "stripe_payment_intent_id": {
          "name": "stripe_payment_intent_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_promociones_usadas_promocion_fecha": {
          "name": "idx_promociones_usadas_promocion_fecha",
          "columns": [
            {
              "expression": "promocion_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_promociones_usadas_promocion_usuario": {
          "name": "idx_promociones_usadas_promocion_usuario",
          "columns": [
            {
              "expression": "promocion_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_promociones_usadas_usuario_fecha": {
          "name": "idx_promociones_usadas_usuario_fecha",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "first",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_promociones_usadas_promocion": {
          "name": "fk_promociones_usadas_promocion",
          "tableFrom": "promociones_usadas",
          "columnsFrom": [
            "promocion_id"
          ],
          "tableTo": "promociones_temporales",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "fk_promociones_usadas_usuario": {
          "name": "fk_promociones_usadas_usuario",
          "tableFrom": "promociones_usadas",
          "columnsFrom": [
            "usuario_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "promociones_usadas_precios_check": {
          "name": "promociones_usadas_precios_check",
          "value": "(precio_final <= precio_original) AND (descuento_aplicado >= (0)::numeric)"
        },
        "promociones_usadas_tipo_check": {
          "name": "promociones_usadas_tipo_check",
          "value": "(tipo_entidad)::text = ANY ((ARRAY['plan'::character varying, 'anuncio'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.embajador_comisiones": {
      "name": "embajador_comisiones",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "embajador_id": {
          "name": "embajador_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tipo": {
          "name": "tipo",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "monto_base": {
          "name": "monto_base",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "porcentaje": {
          "name": "porcentaje",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "monto_comision": {
          "name": "monto_comision",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "estado": {
          "name": "estado",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'pendiente'"
        },
        "pagada_at": {
          "name": "pagada_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_embajador_comisiones_embajador": {
          "name": "idx_embajador_comisiones_embajador",
          "columns": [
            {
              "expression": "embajador_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "first",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_embajador_comisiones_estado": {
          "name": "idx_embajador_comisiones_estado",
          "columns": [
            {
              "expression": "estado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "((estado)::text = 'pendiente'::text)",
          "concurrently": false
        },
        "idx_embajador_comisiones_negocio": {
          "name": "idx_embajador_comisiones_negocio",
          "columns": [
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_embajador_comisiones_tipo": {
          "name": "idx_embajador_comisiones_tipo",
          "columns": [
            {
              "expression": "tipo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_embajador_comisiones_embajador": {
          "name": "fk_embajador_comisiones_embajador",
          "tableFrom": "embajador_comisiones",
          "columnsFrom": [
            "embajador_id"
          ],
          "tableTo": "embajadores",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "fk_embajador_comisiones_negocio": {
          "name": "fk_embajador_comisiones_negocio",
          "tableFrom": "embajador_comisiones",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "embajador_comisiones_estado_check": {
          "name": "embajador_comisiones_estado_check",
          "value": "(estado)::text = ANY ((ARRAY['pendiente'::character varying, 'pagada'::character varying, 'cancelada'::character varying])::text[])"
        },
        "embajador_comisiones_monto_base_check": {
          "name": "embajador_comisiones_monto_base_check",
          "value": "monto_base >= (0)::numeric"
        },
        "embajador_comisiones_monto_comision_check": {
          "name": "embajador_comisiones_monto_comision_check",
          "value": "monto_comision >= (0)::numeric"
        },
        "embajador_comisiones_porcentaje_check": {
          "name": "embajador_comisiones_porcentaje_check",
          "value": "(porcentaje >= (0)::numeric) AND (porcentaje <= (100)::numeric)"
        },
        "embajador_comisiones_tipo_check": {
          "name": "embajador_comisiones_tipo_check",
          "value": "(tipo)::text = ANY ((ARRAY['primer_pago'::character varying, 'recurrente'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.dinamica_premios": {
      "name": "dinamica_premios",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "dinamica_id": {
          "name": "dinamica_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "proveedor_negocio_id": {
          "name": "proveedor_negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "nombre_premio": {
          "name": "nombre_premio",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "imagen_url": {
          "name": "imagen_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "valor_estimado": {
          "name": "valor_estimado",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "cantidad_disponible": {
          "name": "cantidad_disponible",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "orden": {
          "name": "orden",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_dinamica_premios_dinamica": {
          "name": "idx_dinamica_premios_dinamica",
          "columns": [
            {
              "expression": "dinamica_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            },
            {
              "expression": "orden",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_dinamica_premios_proveedor": {
          "name": "idx_dinamica_premios_proveedor",
          "columns": [
            {
              "expression": "proveedor_negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(proveedor_negocio_id IS NOT NULL)",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_dinamica_premios_dinamica": {
          "name": "fk_dinamica_premios_dinamica",
          "tableFrom": "dinamica_premios",
          "columnsFrom": [
            "dinamica_id"
          ],
          "tableTo": "dinamicas",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "fk_dinamica_premios_negocio": {
          "name": "fk_dinamica_premios_negocio",
          "tableFrom": "dinamica_premios",
          "columnsFrom": [
            "proveedor_negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "set null"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "dinamica_premios_cantidad_check": {
          "name": "dinamica_premios_cantidad_check",
          "value": "cantidad_disponible >= 0"
        },
        "dinamica_premios_valor_check": {
          "name": "dinamica_premios_valor_check",
          "value": "valor_estimado >= (0)::numeric"
        }
      },
      "isRLSEnabled": false
    },
    "public.embajadores": {
      "name": "embajadores",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "region_id": {
          "name": "region_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "codigo_referido": {
          "name": "codigo_referido",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "porcentaje_primer_pago": {
          "name": "porcentaje_primer_pago",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'30.00'"
        },
        "porcentaje_recurrente": {
          "name": "porcentaje_recurrente",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'15.00'"
        },
        "negocios_registrados": {
          "name": "negocios_registrados",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "estado": {
          "name": "estado",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'activo'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_embajadores_codigo": {
          "name": "idx_embajadores_codigo",
          "columns": [
            {
              "expression": "codigo_referido",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_embajadores_estado": {
          "name": "idx_embajadores_estado",
          "columns": [
            {
              "expression": "estado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "((estado)::text = 'activo'::text)",
          "concurrently": false
        },
        "idx_embajadores_region": {
          "name": "idx_embajadores_region",
          "columns": [
            {
              "expression": "region_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_embajadores_usuario": {
          "name": "idx_embajadores_usuario",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_embajadores_region": {
          "name": "fk_embajadores_region",
          "tableFrom": "embajadores",
          "columnsFrom": [
            "region_id"
          ],
          "tableTo": "regiones",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "restrict"
        },
        "fk_embajadores_usuario": {
          "name": "fk_embajadores_usuario",
          "tableFrom": "embajadores",
          "columnsFrom": [
            "usuario_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "embajadores_codigo_referido_key": {
          "name": "embajadores_codigo_referido_key",
          "columns": [
            "codigo_referido"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "embajadores_estado_check": {
          "name": "embajadores_estado_check",
          "value": "(estado)::text = ANY ((ARRAY['activo'::character varying, 'inactivo'::character varying, 'suspendido'::character varying])::text[])"
        },
        "embajadores_negocios_check": {
          "name": "embajadores_negocios_check",
          "value": "negocios_registrados >= 0"
        },
        "embajadores_porcentaje_primer_check": {
          "name": "embajadores_porcentaje_primer_check",
          "value": "(porcentaje_primer_pago >= (0)::numeric) AND (porcentaje_primer_pago <= (100)::numeric)"
        },
        "embajadores_porcentaje_recurrente_check": {
          "name": "embajadores_porcentaje_recurrente_check",
          "value": "(porcentaje_recurrente >= (0)::numeric) AND (porcentaje_recurrente <= (100)::numeric)"
        }
      },
      "isRLSEnabled": false
    },
    "public.regiones": {
      "name": "regiones",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "nombre": {
          "name": "nombre",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "estado": {
          "name": "estado",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "pais": {
          "name": "pais",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true,
          "default": "'Mxico'"
        },
        "activa": {
          "name": "activa",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_regiones_activa": {
          "name": "idx_regiones_activa",
          "columns": [
            {
              "expression": "activa",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(activa = true)",
          "concurrently": false
        },
        "idx_regiones_estado": {
          "name": "idx_regiones_estado",
          "columns": [
            {
              "expression": "estado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "regiones_nombre_estado_unique": {
          "name": "regiones_nombre_estado_unique",
          "columns": [
            "nombre",
            "estado"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.empleados": {
      "name": "empleados",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "nombre": {
          "name": "nombre",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "especialidad": {
          "name": "especialidad",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "telefono": {
          "name": "telefono",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "correo": {
          "name": "correo",
          "type": "varchar(150)",
          "primaryKey": false,
          "notNull": false
        },
        "foto_url": {
          "name": "foto_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "total_citas_atendidas": {
          "name": "total_citas_atendidas",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "calificacion_promedio": {
          "name": "calificacion_promedio",
          "type": "numeric(2, 1)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "total_resenas": {
          "name": "total_resenas",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "activo": {
          "name": "activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "orden": {
          "name": "orden",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "notas_internas": {
          "name": "notas_internas",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "puede_registrar_ventas": {
          "name": "puede_registrar_ventas",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "puede_procesar_canjes": {
          "name": "puede_procesar_canjes",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "puede_ver_historial": {
          "name": "puede_ver_historial",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "pin_acceso": {
          "name": "pin_acceso",
          "type": "varchar(4)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_empleados_activo": {
          "name": "idx_empleados_activo",
          "columns": [
            {
              "expression": "activo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_empleados_pin_acceso": {
          "name": "idx_empleados_pin_acceso",
          "columns": [
            {
              "expression": "pin_acceso",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(pin_acceso IS NOT NULL)",
          "concurrently": false
        },
        "idx_empleados_usuario_id": {
          "name": "idx_empleados_usuario_id",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "empleados_usuario_id_fkey": {
          "name": "empleados_usuario_id_fkey",
          "tableFrom": "empleados",
          "columnsFrom": [
            "usuario_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "empleados_pin_acceso_check": {
          "name": "empleados_pin_acceso_check",
          "value": "(pin_acceso IS NULL) OR ((pin_acceso)::text ~ '^[0-9]{4}$'::text)"
        }
      },
      "isRLSEnabled": false
    },
    "public.dinamicas": {
      "name": "dinamicas",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "creado_por": {
          "name": "creado_por",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "titulo": {
          "name": "titulo",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "tipo": {
          "name": "tipo",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "imagen_url": {
          "name": "imagen_url",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "fecha_inicio": {
          "name": "fecha_inicio",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "fecha_fin": {
          "name": "fecha_fin",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "fecha_sorteo": {
          "name": "fecha_sorteo",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "requisitos": {
          "name": "requisitos",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "estado": {
          "name": "estado",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'borrador'"
        },
        "es_publica": {
          "name": "es_publica",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_dinamicas_creado_por": {
          "name": "idx_dinamicas_creado_por",
          "columns": [
            {
              "expression": "creado_por",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_dinamicas_es_publica": {
          "name": "idx_dinamicas_es_publica",
          "columns": [
            {
              "expression": "es_publica",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(es_publica = true)",
          "concurrently": false
        },
        "idx_dinamicas_estado": {
          "name": "idx_dinamicas_estado",
          "columns": [
            {
              "expression": "estado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "((estado)::text = 'activa'::text)",
          "concurrently": false
        },
        "idx_dinamicas_fecha_sorteo": {
          "name": "idx_dinamicas_fecha_sorteo",
          "columns": [
            {
              "expression": "fecha_sorteo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(fecha_sorteo IS NOT NULL)",
          "concurrently": false
        },
        "idx_dinamicas_fechas": {
          "name": "idx_dinamicas_fechas",
          "columns": [
            {
              "expression": "fecha_inicio",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            },
            {
              "expression": "fecha_fin",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_dinamicas_negocio": {
          "name": "idx_dinamicas_negocio",
          "columns": [
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(negocio_id IS NOT NULL)",
          "concurrently": false
        },
        "idx_dinamicas_tipo": {
          "name": "idx_dinamicas_tipo",
          "columns": [
            {
              "expression": "tipo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_dinamicas_creado_por": {
          "name": "fk_dinamicas_creado_por",
          "tableFrom": "dinamicas",
          "columnsFrom": [
            "creado_por"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "fk_dinamicas_negocio": {
          "name": "fk_dinamicas_negocio",
          "tableFrom": "dinamicas",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "set null"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "dinamicas_estado_check": {
          "name": "dinamicas_estado_check",
          "value": "(estado)::text = ANY ((ARRAY['borrador'::character varying, 'activa'::character varying, 'finalizada'::character varying, 'cancelada'::character varying])::text[])"
        },
        "dinamicas_fecha_sorteo_check": {
          "name": "dinamicas_fecha_sorteo_check",
          "value": "(fecha_sorteo IS NULL) OR (fecha_sorteo >= fecha_inicio)"
        },
        "dinamicas_fechas_check": {
          "name": "dinamicas_fechas_check",
          "value": "fecha_fin > fecha_inicio"
        },
        "dinamicas_tipo_check": {
          "name": "dinamicas_tipo_check",
          "value": "(tipo)::text = ANY ((ARRAY['rifa'::character varying, 'sorteo'::character varying, 'promocion'::character varying, 'giveaway'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.dinamica_participaciones": {
      "name": "dinamica_participaciones",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "dinamica_id": {
          "name": "dinamica_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "entradas": {
          "name": "entradas",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "datos_extra": {
          "name": "datos_extra",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_dinamica_participaciones_dinamica": {
          "name": "idx_dinamica_participaciones_dinamica",
          "columns": [
            {
              "expression": "dinamica_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "first",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_dinamica_participaciones_entradas": {
          "name": "idx_dinamica_participaciones_entradas",
          "columns": [
            {
              "expression": "entradas",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(entradas > 1)",
          "concurrently": false
        },
        "idx_dinamica_participaciones_usuario": {
          "name": "idx_dinamica_participaciones_usuario",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_dinamica_participaciones_dinamica": {
          "name": "fk_dinamica_participaciones_dinamica",
          "tableFrom": "dinamica_participaciones",
          "columnsFrom": [
            "dinamica_id"
          ],
          "tableTo": "dinamicas",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "fk_dinamica_participaciones_usuario": {
          "name": "fk_dinamica_participaciones_usuario",
          "tableFrom": "dinamica_participaciones",
          "columnsFrom": [
            "usuario_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "dinamica_participaciones_unique": {
          "name": "dinamica_participaciones_unique",
          "columns": [
            "dinamica_id",
            "usuario_id"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "dinamica_participaciones_entradas_check": {
          "name": "dinamica_participaciones_entradas_check",
          "value": "entradas > 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.bolsa_trabajo": {
      "name": "bolsa_trabajo",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tipo": {
          "name": "tipo",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "titulo": {
          "name": "titulo",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "salario_minimo": {
          "name": "salario_minimo",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "salario_maximo": {
          "name": "salario_maximo",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "modalidad": {
          "name": "modalidad",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "ubicacion": {
          "name": "ubicacion",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "categoria_servicio": {
          "name": "categoria_servicio",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "experiencia_anios": {
          "name": "experiencia_anios",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "portafolio_url": {
          "name": "portafolio_url",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "estado": {
          "name": "estado",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'activo'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "requisitos": {
          "name": "requisitos",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tipo_contrato": {
          "name": "tipo_contrato",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "contacto_email": {
          "name": "contacto_email",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "contacto_telefono": {
          "name": "contacto_telefono",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "fecha_expiracion": {
          "name": "fecha_expiracion",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_bolsa_trabajo_categoria": {
          "name": "idx_bolsa_trabajo_categoria",
          "columns": [
            {
              "expression": "categoria_servicio",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(categoria_servicio IS NOT NULL)",
          "concurrently": false
        },
        "idx_bolsa_trabajo_fecha_expiracion": {
          "name": "idx_bolsa_trabajo_fecha_expiracion",
          "columns": [
            {
              "expression": "fecha_expiracion",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(fecha_expiracion IS NOT NULL)",
          "concurrently": false
        },
        "idx_bolsa_trabajo_modalidad": {
          "name": "idx_bolsa_trabajo_modalidad",
          "columns": [
            {
              "expression": "modalidad",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_bolsa_trabajo_negocio": {
          "name": "idx_bolsa_trabajo_negocio",
          "columns": [
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(negocio_id IS NOT NULL)",
          "concurrently": false
        },
        "idx_bolsa_trabajo_tipo_contrato": {
          "name": "idx_bolsa_trabajo_tipo_contrato",
          "columns": [
            {
              "expression": "tipo_contrato",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(tipo_contrato IS NOT NULL)",
          "concurrently": false
        },
        "idx_bolsa_trabajo_tipo_estado": {
          "name": "idx_bolsa_trabajo_tipo_estado",
          "columns": [
            {
              "expression": "tipo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            },
            {
              "expression": "estado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "((estado)::text = 'activo'::text)",
          "concurrently": false
        },
        "idx_bolsa_trabajo_ubicacion": {
          "name": "idx_bolsa_trabajo_ubicacion",
          "columns": [
            {
              "expression": "ubicacion",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_bolsa_trabajo_usuario": {
          "name": "idx_bolsa_trabajo_usuario",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(usuario_id IS NOT NULL)",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_bolsa_trabajo_negocio": {
          "name": "fk_bolsa_trabajo_negocio",
          "tableFrom": "bolsa_trabajo",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "fk_bolsa_trabajo_usuario": {
          "name": "fk_bolsa_trabajo_usuario",
          "tableFrom": "bolsa_trabajo",
          "columnsFrom": [
            "usuario_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "bolsa_trabajo_estado_check": {
          "name": "bolsa_trabajo_estado_check",
          "value": "(estado)::text = ANY ((ARRAY['activo'::character varying, 'pausado'::character varying, 'cerrado'::character varying, 'expirado'::character varying])::text[])"
        },
        "bolsa_trabajo_exclusividad": {
          "name": "bolsa_trabajo_exclusividad",
          "value": "(((tipo)::text = 'vacante'::text) AND (negocio_id IS NOT NULL) AND (usuario_id IS NULL)) OR (((tipo)::text = 'servicio'::text) AND (usuario_id IS NOT NULL) AND (negocio_id IS NULL))"
        },
        "bolsa_trabajo_modalidad_check": {
          "name": "bolsa_trabajo_modalidad_check",
          "value": "(modalidad)::text = ANY ((ARRAY['presencial'::character varying, 'remoto'::character varying, 'hibrido'::character varying])::text[])"
        },
        "bolsa_trabajo_salario_check": {
          "name": "bolsa_trabajo_salario_check",
          "value": "(salario_minimo IS NULL) OR (salario_maximo IS NULL) OR (salario_maximo >= salario_minimo)"
        },
        "bolsa_trabajo_servicio_requiere_usuario": {
          "name": "bolsa_trabajo_servicio_requiere_usuario",
          "value": "((tipo)::text <> 'servicio'::text) OR (usuario_id IS NOT NULL)"
        },
        "bolsa_trabajo_tipo_check": {
          "name": "bolsa_trabajo_tipo_check",
          "value": "(tipo)::text = ANY ((ARRAY['vacante'::character varying, 'servicio'::character varying])::text[])"
        },
        "bolsa_trabajo_tipo_contrato_check": {
          "name": "bolsa_trabajo_tipo_contrato_check",
          "value": "(tipo_contrato IS NULL) OR ((tipo_contrato)::text = ANY ((ARRAY['tiempo_completo'::character varying, 'medio_tiempo'::character varying, 'temporal'::character varying, 'freelance'::character varying])::text[]))"
        },
        "bolsa_trabajo_vacante_requiere_negocio": {
          "name": "bolsa_trabajo_vacante_requiere_negocio",
          "value": "((tipo)::text <> 'vacante'::text) OR (negocio_id IS NOT NULL)"
        }
      },
      "isRLSEnabled": false
    },
    "public.puntos_configuracion": {
      "name": "puntos_configuracion",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "puntos_por_peso": {
          "name": "puntos_por_peso",
          "type": "numeric(10, 4)",
          "primaryKey": false,
          "notNull": true,
          "default": "'1.0'"
        },
        "minimo_compra": {
          "name": "minimo_compra",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "dias_expiracion_puntos": {
          "name": "dias_expiracion_puntos",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 90
        },
        "dias_expiracion_voucher": {
          "name": "dias_expiracion_voucher",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 30
        },
        "requiere_foto_evidencia": {
          "name": "requiere_foto_evidencia",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "requiere_numero_orden": {
          "name": "requiere_numero_orden",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "validar_horario": {
          "name": "validar_horario",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "horario_inicio": {
          "name": "horario_inicio",
          "type": "time",
          "primaryKey": false,
          "notNull": true,
          "default": "'09:00:00'"
        },
        "horario_fin": {
          "name": "horario_fin",
          "type": "time",
          "primaryKey": false,
          "notNull": true,
          "default": "'22:00:00'"
        },
        "monto_alerta_alto": {
          "name": "monto_alerta_alto",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'2000'"
        },
        "activo": {
          "name": "activo",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_puntos_configuracion_activo": {
          "name": "idx_puntos_configuracion_activo",
          "columns": [
            {
              "expression": "activo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(activo = true)",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_puntos_configuracion_negocio": {
          "name": "fk_puntos_configuracion_negocio",
          "tableFrom": "puntos_configuracion",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "puntos_configuracion_negocio_unique": {
          "name": "puntos_configuracion_negocio_unique",
          "columns": [
            "negocio_id"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "puntos_configuracion_dias_expiracion_check": {
          "name": "puntos_configuracion_dias_expiracion_check",
          "value": "(dias_expiracion_puntos > 0) AND (dias_expiracion_voucher > 0)"
        },
        "puntos_configuracion_horario_check": {
          "name": "puntos_configuracion_horario_check",
          "value": "horario_fin > horario_inicio"
        },
        "puntos_configuracion_minimo_compra_check": {
          "name": "puntos_configuracion_minimo_compra_check",
          "value": "minimo_compra >= (0)::numeric"
        },
        "puntos_configuracion_monto_alerta_check": {
          "name": "puntos_configuracion_monto_alerta_check",
          "value": "monto_alerta_alto >= (0)::numeric"
        },
        "puntos_configuracion_puntos_por_peso_check": {
          "name": "puntos_configuracion_puntos_por_peso_check",
          "value": "puntos_por_peso > (0)::numeric"
        }
      },
      "isRLSEnabled": false
    },
    "public.puntos_billetera": {
      "name": "puntos_billetera",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "puntos_disponibles": {
          "name": "puntos_disponibles",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "puntos_acumulados_total": {
          "name": "puntos_acumulados_total",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "puntos_canjeados_total": {
          "name": "puntos_canjeados_total",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "puntos_expirados_total": {
          "name": "puntos_expirados_total",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "ultima_actividad": {
          "name": "ultima_actividad",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_puntos_billetera_negocio": {
          "name": "idx_puntos_billetera_negocio",
          "columns": [
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_puntos_billetera_usuario_negocio": {
          "name": "idx_puntos_billetera_usuario_negocio",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_puntos_billetera_negocio": {
          "name": "fk_puntos_billetera_negocio",
          "tableFrom": "puntos_billetera",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "fk_puntos_billetera_usuario": {
          "name": "fk_puntos_billetera_usuario",
          "tableFrom": "puntos_billetera",
          "columnsFrom": [
            "usuario_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "puntos_billetera_unique": {
          "name": "puntos_billetera_unique",
          "columns": [
            "usuario_id",
            "negocio_id"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "puntos_billetera_puntos_disponibles_check": {
          "name": "puntos_billetera_puntos_disponibles_check",
          "value": "puntos_disponibles >= 0"
        },
        "puntos_billetera_totales_check": {
          "name": "puntos_billetera_totales_check",
          "value": "(puntos_acumulados_total >= 0) AND (puntos_canjeados_total >= 0) AND (puntos_expirados_total >= 0)"
        }
      },
      "isRLSEnabled": false
    },
    "public.recompensas": {
      "name": "recompensas",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "nombre": {
          "name": "nombre",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "puntos_requeridos": {
          "name": "puntos_requeridos",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "imagen_url": {
          "name": "imagen_url",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "stock": {
          "name": "stock",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": "'-1'"
        },
        "requiere_aprobacion": {
          "name": "requiere_aprobacion",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "activa": {
          "name": "activa",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "orden": {
          "name": "orden",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_recompensas_negocio_activa": {
          "name": "idx_recompensas_negocio_activa",
          "columns": [
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            },
            {
              "expression": "activa",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "(activa = true)",
          "concurrently": false
        },
        "idx_recompensas_orden": {
          "name": "idx_recompensas_orden",
          "columns": [
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "orden",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_recompensas_negocio": {
          "name": "fk_recompensas_negocio",
          "tableFrom": "recompensas",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "recompensas_puntos_requeridos_check": {
          "name": "recompensas_puntos_requeridos_check",
          "value": "puntos_requeridos > 0"
        },
        "recompensas_stock_check": {
          "name": "recompensas_stock_check",
          "value": "stock >= '-1'::integer"
        }
      },
      "isRLSEnabled": false
    },
    "public.puntos_transacciones": {
      "name": "puntos_transacciones",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "billetera_id": {
          "name": "billetera_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "empleado_id": {
          "name": "empleado_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "cliente_id": {
          "name": "cliente_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "monto_compra": {
          "name": "monto_compra",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "puntos_otorgados": {
          "name": "puntos_otorgados",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "numero_orden": {
          "name": "numero_orden",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "tipo": {
          "name": "tipo",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'presencial'"
        },
        "estado": {
          "name": "estado",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'pendiente'"
        },
        "confirmado_por_cliente": {
          "name": "confirmado_por_cliente",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "expira_confirmacion": {
          "name": "expira_confirmacion",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_puntos_transacciones_billetera": {
          "name": "idx_puntos_transacciones_billetera",
          "columns": [
            {
              "expression": "billetera_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_puntos_transacciones_cliente": {
          "name": "idx_puntos_transacciones_cliente",
          "columns": [
            {
              "expression": "cliente_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_puntos_transacciones_estado": {
          "name": "idx_puntos_transacciones_estado",
          "columns": [
            {
              "expression": "estado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            },
            {
              "expression": "expira_confirmacion",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_puntos_transacciones_negocio": {
          "name": "idx_puntos_transacciones_negocio",
          "columns": [
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "first",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_puntos_transacciones_billetera": {
          "name": "fk_puntos_transacciones_billetera",
          "tableFrom": "puntos_transacciones",
          "columnsFrom": [
            "billetera_id"
          ],
          "tableTo": "puntos_billetera",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "fk_puntos_transacciones_cliente": {
          "name": "fk_puntos_transacciones_cliente",
          "tableFrom": "puntos_transacciones",
          "columnsFrom": [
            "cliente_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "fk_puntos_transacciones_empleado": {
          "name": "fk_puntos_transacciones_empleado",
          "tableFrom": "puntos_transacciones",
          "columnsFrom": [
            "empleado_id"
          ],
          "tableTo": "empleados",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "set null"
        },
        "fk_puntos_transacciones_negocio": {
          "name": "fk_puntos_transacciones_negocio",
          "tableFrom": "puntos_transacciones",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "puntos_transacciones_estado_check": {
          "name": "puntos_transacciones_estado_check",
          "value": "(estado)::text = ANY ((ARRAY['pendiente'::character varying, 'confirmado'::character varying, 'rechazado'::character varying, 'cancelado'::character varying])::text[])"
        },
        "puntos_transacciones_monto_check": {
          "name": "puntos_transacciones_monto_check",
          "value": "monto_compra > (0)::numeric"
        },
        "puntos_transacciones_puntos_check": {
          "name": "puntos_transacciones_puntos_check",
          "value": "puntos_otorgados >= 0"
        },
        "puntos_transacciones_tipo_check": {
          "name": "puntos_transacciones_tipo_check",
          "value": "(tipo)::text = ANY ((ARRAY['presencial'::character varying, 'domicilio'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.transacciones_evidencia": {
      "name": "transacciones_evidencia",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "transaccion_id": {
          "name": "transaccion_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "url_imagen": {
          "name": "url_imagen",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": true
        },
        "tipo": {
          "name": "tipo",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'ticket'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_transacciones_evidencia_transaccion": {
          "name": "idx_transacciones_evidencia_transaccion",
          "columns": [
            {
              "expression": "transaccion_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_transacciones_evidencia_transaccion": {
          "name": "fk_transacciones_evidencia_transaccion",
          "tableFrom": "transacciones_evidencia",
          "columnsFrom": [
            "transaccion_id"
          ],
          "tableTo": "puntos_transacciones",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "transacciones_evidencia_tipo_check": {
          "name": "transacciones_evidencia_tipo_check",
          "value": "(tipo)::text = ANY ((ARRAY['ticket'::character varying, 'producto'::character varying, 'otro'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    },
    "public.vouchers_canje": {
      "name": "vouchers_canje",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "billetera_id": {
          "name": "billetera_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "recompensa_id": {
          "name": "recompensa_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "usuario_id": {
          "name": "usuario_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "codigo": {
          "name": "codigo",
          "type": "varchar(6)",
          "primaryKey": false,
          "notNull": true
        },
        "qr_data": {
          "name": "qr_data",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "puntos_usados": {
          "name": "puntos_usados",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "estado": {
          "name": "estado",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": true,
          "default": "'pendiente'"
        },
        "expira_at": {
          "name": "expira_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "usado_at": {
          "name": "usado_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "usado_por_empleado_id": {
          "name": "usado_por_empleado_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_vouchers_canje_codigo": {
          "name": "idx_vouchers_canje_codigo",
          "columns": [
            {
              "expression": "codigo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_vouchers_canje_estado": {
          "name": "idx_vouchers_canje_estado",
          "columns": [
            {
              "expression": "estado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            },
            {
              "expression": "expira_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_vouchers_canje_negocio": {
          "name": "idx_vouchers_canje_negocio",
          "columns": [
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            },
            {
              "expression": "estado",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_vouchers_canje_usuario": {
          "name": "idx_vouchers_canje_usuario",
          "columns": [
            {
              "expression": "usuario_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "first",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_vouchers_canje_billetera": {
          "name": "fk_vouchers_canje_billetera",
          "tableFrom": "vouchers_canje",
          "columnsFrom": [
            "billetera_id"
          ],
          "tableTo": "puntos_billetera",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "fk_vouchers_canje_empleado": {
          "name": "fk_vouchers_canje_empleado",
          "tableFrom": "vouchers_canje",
          "columnsFrom": [
            "usado_por_empleado_id"
          ],
          "tableTo": "empleados",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "set null"
        },
        "fk_vouchers_canje_negocio": {
          "name": "fk_vouchers_canje_negocio",
          "tableFrom": "vouchers_canje",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "fk_vouchers_canje_recompensa": {
          "name": "fk_vouchers_canje_recompensa",
          "tableFrom": "vouchers_canje",
          "columnsFrom": [
            "recompensa_id"
          ],
          "tableTo": "recompensas",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "fk_vouchers_canje_usuario": {
          "name": "fk_vouchers_canje_usuario",
          "tableFrom": "vouchers_canje",
          "columnsFrom": [
            "usuario_id"
          ],
          "tableTo": "usuarios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "vouchers_canje_codigo_key": {
          "name": "vouchers_canje_codigo_key",
          "columns": [
            "codigo"
          ],
          "nullsNotDistinct": false
        }
      },
      "policies": {},
      "checkConstraints": {
        "vouchers_canje_codigo_check": {
          "name": "vouchers_canje_codigo_check",
          "value": "(codigo)::text ~ '^[A-Z0-9]{6}$'::text"
        },
        "vouchers_canje_estado_check": {
          "name": "vouchers_canje_estado_check",
          "value": "(estado)::text = ANY ((ARRAY['pendiente'::character varying, 'aprobacion_pendiente'::character varying, 'usado'::character varying, 'expirado'::character varying, 'cancelado'::character varying])::text[])"
        },
        "vouchers_canje_puntos_check": {
          "name": "vouchers_canje_puntos_check",
          "value": "puntos_usados > 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.alertas_seguridad": {
      "name": "alertas_seguridad",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "negocio_id": {
          "name": "negocio_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "transaccion_id": {
          "name": "transaccion_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "empleado_id": {
          "name": "empleado_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "tipo": {
          "name": "tipo",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": true
        },
        "severidad": {
          "name": "severidad",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true,
          "default": "'media'"
        },
        "titulo": {
          "name": "titulo",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "descripcion": {
          "name": "descripcion",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "datos": {
          "name": "datos",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "leida": {
          "name": "leida",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "leida_at": {
          "name": "leida_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_alertas_seguridad_negocio_leida": {
          "name": "idx_alertas_seguridad_negocio_leida",
          "columns": [
            {
              "expression": "negocio_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            },
            {
              "expression": "leida",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "first",
              "opclass": "bool_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "idx_alertas_seguridad_severidad": {
          "name": "idx_alertas_seguridad_severidad",
          "columns": [
            {
              "expression": "severidad",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "where": "((severidad)::text = 'alta'::text)",
          "concurrently": false
        },
        "idx_alertas_seguridad_tipo": {
          "name": "idx_alertas_seguridad_tipo",
          "columns": [
            {
              "expression": "tipo",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "fk_alertas_seguridad_empleado": {
          "name": "fk_alertas_seguridad_empleado",
          "tableFrom": "alertas_seguridad",
          "columnsFrom": [
            "empleado_id"
          ],
          "tableTo": "empleados",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "set null"
        },
        "fk_alertas_seguridad_negocio": {
          "name": "fk_alertas_seguridad_negocio",
          "tableFrom": "alertas_seguridad",
          "columnsFrom": [
            "negocio_id"
          ],
          "tableTo": "negocios",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "fk_alertas_seguridad_transaccion": {
          "name": "fk_alertas_seguridad_transaccion",
          "tableFrom": "alertas_seguridad",
          "columnsFrom": [
            "transaccion_id"
          ],
          "tableTo": "puntos_transacciones",
          "schemaTo": "public",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "alertas_seguridad_severidad_check": {
          "name": "alertas_seguridad_severidad_check",
          "value": "(severidad)::text = ANY ((ARRAY['baja'::character varying, 'media'::character varying, 'alta'::character varying])::text[])"
        },
        "alertas_seguridad_tipo_check": {
          "name": "alertas_seguridad_tipo_check",
          "value": "(tipo)::text = ANY ((ARRAY['monto_inusual'::character varying, 'cliente_frecuente'::character varying, 'fuera_horario'::character varying, 'montos_redondos'::character varying, 'empleado_destacado'::character varying, 'cliente_reporte'::character varying])::text[])"
        }
      },
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "views": {
    "public.geography_columns": {
      "name": "geography_columns",
      "schema": "public",
      "columns": {
        "f_table_catalog": {
          "name": "f_table_catalog",
          "type": "name",
          "primaryKey": false,
          "notNull": false
        },
        "f_table_schema": {
          "name": "f_table_schema",
          "type": "name",
          "primaryKey": false,
          "notNull": false
        },
        "f_table_name": {
          "name": "f_table_name",
          "type": "name",
          "primaryKey": false,
          "notNull": false
        },
        "f_geography_column": {
          "name": "f_geography_column",
          "type": "name",
          "primaryKey": false,
          "notNull": false
        },
        "coord_dimension": {
          "name": "coord_dimension",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "srid": {
          "name": "srid",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "definition": "SELECT current_database() AS f_table_catalog, n.nspname AS f_table_schema, c.relname AS f_table_name, a.attname AS f_geography_column, postgis_typmod_dims(a.atttypmod) AS coord_dimension, postgis_typmod_srid(a.atttypmod) AS srid, postgis_typmod_type(a.atttypmod) AS type FROM pg_class c, pg_attribute a, pg_type t, pg_namespace n WHERE t.typname = 'geography'::name AND a.attisdropped = false AND a.atttypid = t.oid AND a.attrelid = c.oid AND c.relnamespace = n.oid AND (c.relkind = ANY (ARRAY['r'::\"char\", 'v'::\"char\", 'm'::\"char\", 'f'::\"char\", 'p'::\"char\"])) AND NOT pg_is_other_temp_schema(c.relnamespace) AND has_table_privilege(c.oid, 'SELECT'::text)",
      "materialized": false,
      "isExisting": false
    },
    "public.geometry_columns": {
      "name": "geometry_columns",
      "schema": "public",
      "columns": {
        "f_table_catalog": {
          "name": "f_table_catalog",
          "type": "varchar(256)",
          "primaryKey": false,
          "notNull": false
        },
        "f_table_schema": {
          "name": "f_table_schema",
          "type": "name",
          "primaryKey": false,
          "notNull": false
        },
        "f_table_name": {
          "name": "f_table_name",
          "type": "name",
          "primaryKey": false,
          "notNull": false
        },
        "f_geometry_column": {
          "name": "f_geometry_column",
          "type": "name",
          "primaryKey": false,
          "notNull": false
        },
        "coord_dimension": {
          "name": "coord_dimension",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "srid": {
          "name": "srid",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "definition": "SELECT current_database()::character varying(256) AS f_table_catalog, n.nspname AS f_table_schema, c.relname AS f_table_name, a.attname AS f_geometry_column, COALESCE(postgis_typmod_dims(a.atttypmod), sn.ndims, 2) AS coord_dimension, COALESCE(NULLIF(postgis_typmod_srid(a.atttypmod), 0), sr.srid, 0) AS srid, replace(replace(COALESCE(NULLIF(upper(postgis_typmod_type(a.atttypmod)), 'GEOMETRY'::text), st.type, 'GEOMETRY'::text), 'ZM'::text, ''::text), 'Z'::text, ''::text)::character varying(30) AS type FROM pg_class c JOIN pg_attribute a ON a.attrelid = c.oid AND NOT a.attisdropped JOIN pg_namespace n ON c.relnamespace = n.oid JOIN pg_type t ON a.atttypid = t.oid LEFT JOIN ( SELECT s.connamespace, s.conrelid, s.conkey, replace(split_part(s.consrc, ''''::text, 2), ')'::text, ''::text) AS type FROM ( SELECT pg_constraint.connamespace, pg_constraint.conrelid, pg_constraint.conkey, pg_get_constraintdef(pg_constraint.oid) AS consrc FROM pg_constraint) s WHERE s.consrc ~~* '%geometrytype(% = %'::text) st ON st.connamespace = n.oid AND st.conrelid = c.oid AND (a.attnum = ANY (st.conkey)) LEFT JOIN ( SELECT s.connamespace, s.conrelid, s.conkey, replace(split_part(s.consrc, ' = '::text, 2), ')'::text, ''::text)::integer AS ndims FROM ( SELECT pg_constraint.connamespace, pg_constraint.conrelid, pg_constraint.conkey, pg_get_constraintdef(pg_constraint.oid) AS consrc FROM pg_constraint) s WHERE s.consrc ~~* '%ndims(% = %'::text) sn ON sn.connamespace = n.oid AND sn.conrelid = c.oid AND (a.attnum = ANY (sn.conkey)) LEFT JOIN ( SELECT s.connamespace, s.conrelid, s.conkey, replace(replace(split_part(s.consrc, ' = '::text, 2), ')'::text, ''::text), '('::text, ''::text)::integer AS srid FROM ( SELECT pg_constraint.connamespace, pg_constraint.conrelid, pg_constraint.conkey, pg_get_constraintdef(pg_constraint.oid) AS consrc FROM pg_constraint) s WHERE s.consrc ~~* '%srid(% = %'::text) sr ON sr.connamespace = n.oid AND sr.conrelid = c.oid AND (a.attnum = ANY (sr.conkey)) WHERE (c.relkind = ANY (ARRAY['r'::\"char\", 'v'::\"char\", 'm'::\"char\", 'f'::\"char\", 'p'::\"char\"])) AND NOT c.relname = 'raster_columns'::name AND t.typname = 'geometry'::name AND NOT pg_is_other_temp_schema(c.relnamespace) AND has_table_privilege(c.oid, 'SELECT'::text)",
      "materialized": false,
      "isExisting": false
    }
  },
  "sequences": {},
  "roles": {},
  "policies": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  },
  "internal": {
    "tables": {
      "articulos": {
        "columns": {
          "imagenes_adicionales": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "recompensas": {
        "columns": {
          "stock": {
            "isDefaultAnExpression": true
          }
        }
      }
    }
  }
}